(this["webpackJsonprcpchgrowth-react"]=this["webpackJsonprcpchgrowth-react"]||[]).push([[0],{224:function(e,t,n){},276:function(e,t,n){},459:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(57),s=n.n(i),l=(n(276),n(59)),o=n(29),c=n(25),h=n(26),u=n(20),d=n(68),b=n(233),m=n(471),g=n(161),j=n(474),f=n(479),x=n(470),v=n(460),p=n(62),O=n(468),y=n(1);var _=function(e){for(var t=[],n=23;n<=42;)t.push({key:n.toString(10),value:n,text:n.toString(10)}),n++;return Object(y.jsxs)("span",{children:[Object(y.jsx)(O.a,{compact:!0,name:"gestation_weeks",value:e.weeks,options:t,onChange:function(t,n){return e.handleGestationChange(n)}}),"\xa0+",Object(y.jsx)(O.a,{compact:!0,name:"gestation_days",value:e.days,options:[{key:"0",value:0,text:"0"},{key:"1",value:1,text:"1"},{key:"2",value:2,text:"2"},{key:"3",value:3,text:"3"},{key:"4",value:4,text:"4"},{key:"5",value:5,text:"5"},{key:"6",value:6,text:"6"}],onChange:function(t,n){return e.handleGestationChange(n)}}),"\xa0 weeks"]})};var C=function(e){return Object(y.jsx)(O.a,{name:"measurement_method",placeholder:"Measurement",value:e.measurementMethod,onChange:function(t,n){return e.handleChangeMeasurementMethod(n.value)},options:e.measurementOptions})};var S=function(e){return Object(y.jsx)(O.a,{name:"reference",placeholder:"UK-WHO",value:e.reference,onChange:function(t,n){return e.handleChangeReference(n)},options:e.referenceOptions})};var k=function(e){return Object(y.jsx)(O.a,{name:"sex",placeholder:"Sex",value:e.sex,onChange:function(t,n){return e.handleSexChange(n)},options:e.sexOptions})},w=[{key:"height",value:"height",text:"Height (cm)",disabled:!1},{key:"weight",value:"weight",text:"Weight (kg)",disabled:!1},{key:"bmi",value:"bmi",text:"BMI (kg/m\xb2)",disabled:!1},{key:"ofc",value:"ofc",text:"Head Circumference (cm)",disabled:!1}],A=[{key:"male",value:"male",text:"Boy",disabled:!1},{key:"female",value:"female",text:"Girl",disabled:!1}],F=[{key:"uk-who",value:"uk-who",text:"UK-WHO"},{key:"trisomy-21",value:"trisomy-21",text:"Down's Syndrome"},{key:"turner",value:"turner",text:"Turner's syndrome"}],D=n(477);function T(e){var t=e.errorText,n=e.showError;if(!t)return null;var a=!!t;return!1===n&&(a=!1),Object(y.jsx)(y.Fragment,{children:a&&Object(y.jsx)(D.a,{color:"red",children:t})})}var M=[{key:"gp",value:"greulich-pyle",text:"Greulich & Pyle"},{key:"twii",value:"tanner-whitehouse-ii",text:"Tanner Whitehouse II"},{key:"twiii",value:"tanner-whitehouse-iii",text:"Tanner Whitehouse III"},{key:"fels",value:"fels",text:"Fels"},{key:"bxpt",value:"bonexpert",text:"BoneXpert"}];var B=function(e){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a.Group,{children:Object(y.jsx)(j.a.Field,{style:{textAlign:"left"},width:"16",children:Object(y.jsx)(x.a,{type:"decimal",name:"boneAge",placeholder:"e.g. 3.5",labelPosition:"right",label:"years",value:e.boneAge,onChange:e.handleBoneAgeChange})})}),Object(y.jsxs)(j.a.Group,{children:[Object(y.jsx)(j.a.Field,{style:{textAlign:"left"},width:"8",children:Object(y.jsx)(x.a,{type:"decimal",name:"boneAgeSDS",placeholder:"e.g. -3.5",labelPosition:"right",label:"SDS",value:e.boneAgeSDS,onChange:e.handleBoneAgeSDSChange})}),Object(y.jsx)(j.a.Field,{style:{textAlign:"left"},width:"8",children:Object(y.jsx)(x.a,{type:"decimal",name:"boneAgeCentile",placeholder:"e.g. 50",labelPosition:"right",label:"centile",value:e.boneAgeCentile,onChange:e.handleBoneAgeCentileChange})})]}),Object(y.jsx)(j.a.Group,{children:Object(y.jsxs)(j.a.Field,{style:{textAlign:"left"},width:"16",children:[Object(y.jsx)("label",{children:"Comment"}),Object(y.jsx)(x.a,{type:"text",name:"boneAgeText",placeholder:"e.g. This bone age is advanced",value:e.boneAgeText,onChange:e.handleBoneAgeTextChange})]})}),Object(y.jsx)(j.a.Group,{children:Object(y.jsxs)(j.a.Field,{style:{textAlign:"left"},width:"16",children:[Object(y.jsx)("label",{children:"Bone Age Reference"}),Object(y.jsx)(O.a,{name:"boneagetype",placeholder:"e.g. G&P",value:e.boneAgeType,onChange:function(t,n){return e.handleChangeBoneAgeType(n)},options:M})]})})]})},P=n(245),I=n(123),N=n(17),G=function(e){var t,n,a,r;try{return e.getTime(),n=""+((t=new Date(e)).getMonth()+1),a=""+t.getDate(),r=t.getFullYear(),n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}catch(i){throw new Error("Input date for formatDate not recognised")}},E=function(e){try{var t=e.split("-").map((function(e,t){if(""!==e){var n=Number(e);if(Number.isNaN(n))throw new Error;return 1===t?n-1:n}throw new Error}));if(3!==t.length||t[1]<0||t[1]>11||t[2]<1||t[2]>31)throw new Error;if(function(e){var t=Object(N.a)(e,3),n=t[0],a=t[1],r=t[2];if(1===a&&29===r)return n%4===0;var i=[31,28,31,30,31,30,31,31,30,31,30,31][a];return void 0!==i&&r<=i}(t))return Object(P.a)(Date,Object(I.a)(t));throw new Error}catch(n){return null}},H=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeReference=function(e){var t=e.value;"uk-who"!==t&&a.props.updateGlobalState("mid-parental-height","reset"),a.props.updateGlobalState("reference",t)},a.handleBoneAgeTypeChange=function(e){var t=e.value;a.setState({boneAgeType:t})},a.handleBoneAgeChange=function(e,t){var n=t.value;a.setState({boneAge:n})},a.handleBoneAgeSDSChange=function(e,t){var n=t.value;a.setState({boneAgeSDS:n})},a.handleBoneAgeCentileChange=function(e,t){var n=t.value;a.setState({boneAgeCentile:n})},a.handleBoneAgeTextChange=function(e,t){var n=t.value;a.setState({boneAgeText:n})},a.handleObservationChange=function(e,t){var n=t.value,r=a.state,i=r.measurement,s=r.observation_value_error;i.observation_value=n,s=a.validateObservationValue(a.props.globalState.measurementMethod,n),a.setState({measurement:i,observation_value_error:s})},a.state={birth_date:G(new Date),observation_date:G(new Date),measurement:{observation_value:""},gestation_weeks:40,gestation_days:0,birth_date_error:"",observation_date_error:"",observation_value_error:"empty",form_valid:!1,measurementResult:[],boneAge:"",boneAgeType:"greulich-pyle",boneAgeSDS:"",boneAgeCentile:"",boneAgeText:"",events:[""],showBoneAge:!1,showEvents:!1},a.handleChangeDate=a.handleChangeDate.bind(Object(u.a)(a)),a.handleChangeMeasurementMethod=a.handleChangeMeasurementMethod.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleChangeGestation=a.handleChangeGestation.bind(Object(u.a)(a)),a.handleChangeSex=a.handleChangeSex.bind(Object(u.a)(a)),a.handleObservationChange=a.handleObservationChange.bind(Object(u.a)(a)),a.handleChangeReference=a.handleChangeReference.bind(Object(u.a)(a)),a.handleResetCurrentGraph=a.handleResetCurrentGraph.bind(Object(u.a)(a)),a.handleUndoLast=a.handleUndoLast.bind(Object(u.a)(a)),a.handleShowBoneAge=a.handleShowBoneAge.bind(Object(u.a)(a)),a.handleShowEvents=a.handleShowEvents.bind(Object(u.a)(a)),a.handleBoneAgeChange=a.handleBoneAgeChange.bind(Object(u.a)(a)),a.handleBoneAgeTypeChange=a.handleBoneAgeTypeChange.bind(Object(u.a)(a)),a.handleBoneAgeSDSChange=a.handleBoneAgeSDSChange.bind(Object(u.a)(a)),a.handleBoneAgeCentileChange=a.handleBoneAgeCentileChange.bind(Object(u.a)(a)),a.handleBoneAgeTextChange=a.handleBoneAgeTextChange.bind(Object(u.a)(a)),a}return Object(h.a)(n,[{key:"handleChangeDate",value:function(e){this.setState(Object(o.a)({},e.target.name,e.target.value));var t=E(e.target.value);if(t){var n="birth_date"===e.target.name?E(this.state.observation_date):t,a="birth_date"===e.target.name?t:E(this.state.birth_date),r=n.getTime()-a.getTime();r<0?"birth_date"===e.target.name?this.setState({birth_date_error:"Date of birth cannot come after the date of measurement"}):"observation_date"===e.target.name&&this.setState({observation_date_error:"Date of measurement cannot come before the date of birth."}):r>63113904e4?this.setState(Object(o.a)({},"".concat(e.target.name,"_error"),"No centile data exists over 20 years of age.")):this.setState({birth_date_error:"",observation_date_error:""})}else this.setState(Object(o.a)({},"".concat(e.target.name,"_error"),"Please enter a valid date."))}},{key:"validateObservationValue",value:function(e,t){return""===t?"empty":Number.isNaN(Number(t))?"Please enter a valid number.":"height"===e?t<20?"The "+e+" you entered is too low.":t>272?"The "+e+" you entered is too tall.":"":"weight"===e?t<.01?"The "+e+" you entered is too low.":t>635?"The "+e+" you entered is too heavy.":"":"bmi"===e?t<5?"The "+e+" you entered is too low.":t>204?"The "+e+" you entered is too high.":"":"ofc"===e?t<25?"The "+e+" you entered is too low.":t>70?"The "+e+" you entered is too high.":"":void 0}},{key:"formIsValid",value:function(){return""===this.state.birth_date_error&&""===this.state.observation_date_error&&""===this.state.observation_value_error}},{key:"handleSubmit",value:function(){var e={},t={events:[]};this.state.events.length>0&&this.state.events[0].length>0&&(t={events_text:this.state.events}),this.state.showBoneAge&&(isNaN(parseFloat(this.state.boneAge))||(e={bone_age:parseFloat(this.state.boneAge),bone_age_type:this.state.boneAgeType,bone_age_centile:isNaN(parseFloat(this.state.boneAgeCentile))?null:parseFloat(this.state.boneAgeCentile),bone_age_sds:isNaN(parseFloat(this.state.boneAgeSDS))?null:parseFloat(this.state.boneAgeSDS),bone_age_text:this.state.boneAgeText}));var n={birth_date:this.state.birth_date,observation_date:this.state.observation_date,measurement_method:this.props.globalState.measurementMethod,observation_value:this.state.measurement.observation_value,gestation_weeks:this.state.gestation_weeks,gestation_days:this.state.gestation_days,sex:this.props.globalState.sex},a=Object.assign(n,e,t);this.props.handleMeasurementResult(a)}},{key:"handleChangeMeasurementMethod",value:function(e){this.props.updateGlobalState("measurementMethod",e)}},{key:"handleChangeGestation",value:function(e){var t=e.name,n=e.value;"gestation_weeks"===t?(this.setState({gestation_weeks:n}),42===n&&this.setState({gestation_days:0})):"gestation_days"===t&&(42===this.state.gestation_weeks?this.setState({gestation_days:0}):this.setState({gestation_days:n}))}},{key:"handleChangeSex",value:function(e){this.props.updateGlobalState("sex",e.value)}},{key:"handleResetCurrentGraph",value:function(){this.props.updateGlobalState("resetCurrent",!0)}},{key:"handleUndoLast",value:function(){this.props.updateGlobalState("undoLast",!0)}},{key:"handleShowEvents",value:function(e){e.preventDefault();var t=this.state.showEvents;this.setState({showEvents:!t,events:[""]})}},{key:"handleShowBoneAge",value:function(e){e.preventDefault();var t=this.state.showBoneAge;this.setState({showBoneAge:!t,boneAge:"",boneAgeCentile:"",boneAgeSDS:"",boneAgeType:"greulich-pyle",boneAgeText:""})}},{key:"componentDidUpdate",value:function(){if(this.state.form_valid!==this.formIsValid()&&this.setState({form_valid:this.formIsValid()}),this.props.globalState.clearMeasurement){var e=Object(l.a)({},this.state.measurement);e.observation_value="",this.setState({measurement:e,observation_value_error:"empty",form_valid:!1,showBoneAge:!1,showEvents:!1,events:[""],boneAge:"",boneAgeCentile:"",boneAgeSDS:"",boneAgeType:"greulich-pyle",boneAgeText:""}),this.props.updateGlobalState("clearMeasurement",!1)}}},{key:"render",value:function(){var e=this,t=function(t){var n=e.props.globalState.disabled[t.key];return Object(l.a)(Object(l.a)({},t),{},{disabled:n})},n=w.map(t),a=A.map(t);return Object(y.jsx)(m.a,{children:Object(y.jsxs)(g.a,{textAlign:"center",children:[Object(y.jsxs)(j.a,{onSubmit:this.handleSubmit,children:[Object(y.jsxs)(j.a.Field,{children:[Object(y.jsx)(f.a,{as:"h5",textAlign:"left",children:"Reference"}),Object(y.jsx)(S,{reference:this.props.globalState.reference,handleChangeReference:this.handleChangeReference,referenceOptions:F})]}),Object(y.jsxs)(j.a.Field,{required:!0,children:[Object(y.jsx)(f.a,{as:"h5",textAlign:"left",children:"Dates"}),Object(y.jsx)(x.a,{label:"Birth Date",type:"date",name:"birth_date",value:this.state.birth_date,placeholder:"Date of Birth",onChange:this.handleChangeDate})]}),Object(y.jsx)(j.a.Field,{required:!0,children:Object(y.jsx)(x.a,{label:"Measurement Date",type:"date",name:"observation_date",value:this.state.observation_date,placeholder:"Date of Measurement",onChange:this.handleChangeDate})}),Object(y.jsx)(T,{errorText:this.state.observation_date_error}),Object(y.jsx)(T,{errorText:this.state.birth_date_error}),Object(y.jsxs)(j.a.Group,{style:{textAlign:"left"},children:[Object(y.jsxs)(j.a.Field,{required:!0,style:{marginRight:20},children:[Object(y.jsx)("label",{children:"Sex"}),Object(y.jsx)(k,{sex:this.props.globalState.sex,handleSexChange:this.handleChangeSex,sexOptions:a})]}),Object(y.jsx)(j.a.Group,{children:Object(y.jsxs)(j.a.Field,{children:[Object(y.jsx)("label",{children:"Gestation"}),Object(y.jsx)(_,{name:"gestation_select",weeks:this.state.gestation_weeks,days:this.state.gestation_days,handleGestationChange:this.handleChangeGestation})]})})]}),Object(y.jsx)(f.a,{as:"h5",textAlign:"left",children:"Measurements"}),Object(y.jsxs)(j.a.Group,{children:[Object(y.jsx)(j.a.Field,{required:!0,children:Object(y.jsx)(C,{measurementMethod:this.props.globalState.measurementMethod,handleChangeMeasurementMethod:this.handleChangeMeasurementMethod,measurementOptions:n})}),Object(y.jsx)(j.a.Field,{required:!0,width:8,children:Object(y.jsx)(x.a,{type:"decimal",name:"observation_value",placeholder:"Measurement",value:this.state.measurement.observation_value,label:{content:this.props.globalState.units.toString(),basic:!0,color:"blue"},labelPosition:"right",onChange:this.handleObservationChange})})]}),Object(y.jsx)(T,{showError:"empty"!==this.state.observation_value_error,errorText:this.state.observation_value_error}),Object(y.jsxs)(j.a.Group,{children:["height"===this.props.globalState.measurementMethod&&Object(y.jsx)(j.a.Field,{children:Object(y.jsxs)(v.a,{icon:!0,labelPosition:"left",onClick:this.handleShowBoneAge,children:[Object(y.jsx)(p.a,{name:"hand paper outline"}),"Add Bone Age"]})}),Object(y.jsx)(j.a.Field,{children:Object(y.jsxs)(v.a,{icon:!0,labelPosition:"left",onClick:this.handleShowEvents,children:[Object(y.jsx)(p.a,{name:"bookmark outline"}),"Add Event"]})})]}),this.state.showBoneAge&&Object(y.jsx)(g.a,{children:Object(y.jsx)(B,{boneAge:this.state.boneAge,handleBoneAgeChange:this.handleBoneAgeChange,boneAgeType:this.state.boneAgeType,handleChangeBoneAgeType:this.handleBoneAgeTypeChange,boneAgeCentile:this.state.boneAgeCentile,handleBoneAgeCentileChange:this.handleBoneAgeCentileChange,boneAgeSDS:this.state.boneAgeSDS,handleBoneAgeSDSChange:this.handleBoneAgeSDSChange,boneAgeText:this.state.boneAgeText,handleBoneAgeTextChange:this.handleBoneAgeTextChange})}),this.state.showEvents&&Object(y.jsx)(g.a,{children:this.state.events.map((function(t,n){return Object(y.jsxs)(j.a.Group,{children:[Object(y.jsx)(j.a.Field,{style:{textAlign:"left"},width:"14",children:Object(y.jsx)(x.a,{name:"event",placeholder:"e.g. diagnosis",value:t,onChange:function(t){var a=e.state.events;a[n]=t.target.value,e.setState({events:a})}})}),Object(y.jsx)(v.a,{icon:!0,onClick:function(t){if(t.preventDefault(),""!==e.state.events[n]){var a=e.state.events;a.push(""),e.setState({events:a})}},children:Object(y.jsx)(p.a,{name:"plus circle"})}),n===e.state.events.length-1&&Object(y.jsx)(v.a,{icon:!0,onClick:function(t){if(t.preventDefault(),0!==n){var a=e.state.events;a.splice(n,1),e.setState({events:a})}else e.setState({events:[""]})},children:Object(y.jsx)(p.a,{name:"minus circle"})})]},n)}))}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(v.a,{content:"Calculate Centiles and Add To Chart",type:"submit",fluid:!0,disabled:!this.state.form_valid,color:"pink",icon:"line graph",labelPosition:"right"})})]}),this.props.globalState.isDataPresent&&Object(y.jsxs)(g.a,{children:[Object(y.jsx)(v.a,{content:"Reset Chart",icon:"power off",onClick:this.handleResetCurrentGraph}),Object(y.jsx)(v.a,{content:"Remove Last",icon:"undo",onClick:this.handleUndoLast})]})]})})}}]),n}(r.a.Component),R=n(75),L=function(){function e(t,n,a,r,i){Object(c.a)(this,e),this.chart=t,this.gridlines=n,this.axes=a,this.centiles=r,this.measurements=i}return Object(h.a)(e,[{key:"chart",get:function(){return this._chart},set:function(e){this._chart=e}},{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"axes",get:function(){return this._axes},set:function(e){this._axes=e}},{key:"centiles",get:function(){return this._centiles},set:function(e){this._centiles=e}},{key:"measurements",get:function(){return this._measurements},set:function(e){this._measurements=e}}]),e}(),W=function(){function e(t,n,a,r,i,s,l,o,h,u,d,b,m,g,j,f,x){Object(c.a)(this,e),this.backgroundColour=t,this.width=n,this.height=a,this.padding=r,this.titleStyle=i,this.subTitleStyle=s,this.tooltipBackgroundColour=l,this.tooltipStroke=o,this.tooltipTextStyle=h,this.termFill=u,this.termStroke=d,this.infoBoxFill=b,this.infoBoxStroke=m,this.infoBoxTextStyle=g,this.toggleButtonInactiveColour=j,this.toggleButtonActiveColour=f,this.toggleButtonTextColour=x}return Object(h.a)(e,[{key:"backgroundColour",get:function(){return this._backgroundColour},set:function(e){this._backgroundColour=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e}},{key:"titleStyle",get:function(){return this._titleStyle},set:function(e){this._titleStyle=e}},{key:"subTitleStyle",get:function(){return this._subTitleStyle},set:function(e){this._subTitleStyle=e}},{key:"tooltipBackgroundColour",get:function(){return this._tooltipBackgroundColour},set:function(e){this._tooltipBackgroundColour=e}},{key:"tooltipStroke",get:function(){return this._tooltipStroke},set:function(e){this._tooltipStroke=e}},{key:"tooltipTextStyle",get:function(){return this._tooltipTextStyle},set:function(e){this._tooltipTextStyle=e}},{key:"termFill",get:function(){return this._termFill},set:function(e){this._termFill=e}},{key:"termStroke",get:function(){return this._termStroke},set:function(e){this._termStroke=e}},{key:"infoBoxFill",get:function(){return this._infoBoxFill},set:function(e){this._infoBoxFill=e}},{key:"infoBoxStroke",get:function(){return this._infoBoxStroke},set:function(e){this._infoBoxStroke=e}},{key:"infoBoxTextStyle",get:function(){return this._infoBoxTextStyle},set:function(e){this._infoBoxTextStyle=e}},{key:"toggleButtonActiveColour",get:function(){return this._toggleButtonActiveColour},set:function(e){this._toggleButtonActiveColour=e}},{key:"toggleButtonInactiveColour",get:function(){return this._toggleButtonInactiveColour},set:function(e){this._toggleButtonInactiveColour=e}},{key:"toggleButtonTextColour",get:function(){return this._toggleButtonTextColour},set:function(e){this._toggleButtonTextColour=e}}]),e}(),U=function(){function e(t,n,a,r){Object(c.a)(this,e),this.left=t,this.right=n,this.top=a,this.bottom=r}return Object(h.a)(e,[{key:"left",get:function(){return this._left},set:function(e){this._left=e}},{key:"right",get:function(){return this._right},set:function(e){this._right=e}},{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"bottom",get:function(){return this._bottom},set:function(e){this._bottom=e}}]),e}(),z=function(){function e(t,n,a,r){Object(c.a)(this,e),this.name=t,this.colour=n,this.size=a,this.weight=r}return Object(h.a)(e,[{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"colour",get:function(){return this._colour},set:function(e){this._colour=e}},{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"style",get:function(){return this._style}},{key:"weight",set:function(e){this._weight=e}}]),e}(),K=function(){function e(t,n,a,r){Object(c.a)(this,e),this.gridlines=t,this.stroke=n,this.strokeWidth=a,this.dashed=r}return Object(h.a)(e,[{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"stroke",get:function(){return this._stroke},set:function(e){this._stroke=e}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(e){this._strokeWidth=e}},{key:"dashed",get:function(){return this._dashed},set:function(e){this._dashed=e}}]),e}(),q=function(){function e(t,n,a){Object(c.a)(this,e),this.axisStroke=t,this.axisLabelTextStyle=n,this.tickLabelTextStyle=a}return Object(h.a)(e,[{key:"axisStroke",get:function(){return this._axisStroke},set:function(e){this._axisStroke=e}},{key:"axisLabelTextStyle",get:function(){return this._axisLabelTextStyle},set:function(e){this._axisLabelTextStyle=e}},{key:"tickLabelTextStyle",get:function(){return this._tickLabelTexSize},set:function(e){this._tickLabelTexSize=e}}]),e}(),V=function(){function e(t,n,a,r,i,s){Object(c.a)(this,e),this.centileStroke=t,this.centileStrokeWidth=n,this.delayedPubertyAreaFill=a,this.midParentalCentileStroke=r,this.midParentalCentileStrokeWidth=i,this.midParentalAreaFill=s}return Object(h.a)(e,[{key:"centileStroke",get:function(){return this._centileStroke},set:function(e){this._centileStroke=e}},{key:"centileStrokeWidth",get:function(){return this._centileStrokeWidth},set:function(e){this._centileStrokeWidth=e}},{key:"delayedPubertyAreaFill",get:function(){return this._delayedPubertyAreaFill},set:function(e){this._delayedPubertyAreaFill=e}},{key:"midParentalAreaFill",get:function(){return this._midParentalAreaFill},set:function(e){this._midParentalAreaFill=e}},{key:"midParentalCentileStroke",get:function(){return this._midParentalStroke},set:function(e){this._midParentalStroke=e}},{key:"midParentalCentileStrokeWidth",get:function(){return this._midParentalStrokeWidth},set:function(e){this._midParentalCentileStrokeWidth=e}}]),e}(),J=function(){function e(t,n,a){Object(c.a)(this,e),this.measurementFill=t,this.measurementSize=a}return Object(h.a)(e,[{key:"measurementFill",get:function(){return this._measurementFill},set:function(e){this._measurementFill=e}},{key:"measurementStroke",get:function(){return this._measurementStroke},set:function(e){this._measurementStroke=e}},{key:"measurementSize",get:function(){return this._measurementSize},set:function(e){this._measurementSize=e}}]),e}(),Y="#fdc300",X=new z("Arial","#000000",14,"bold"),Z=new z("Arial","#000000",14,"normal"),$=new z("Montserrat","#000000",.25,"normal"),Q=new z("Montserrat","#000000",6,"normal"),ee=new z("Arial","000000",10,"normal"),te=new z("Arial","000000",8,"normal"),ne=new W("#FFFFFF",700,475,new U(50,50,25,40),X,Z,Y,Y,$,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",Q,"#E497C1","#cb3083","#FFFFFF"),ae=new K(!0,"#d9d9d9",.25,!1),re=new V("#7159aa",1.5,"#c6bddd","#8d7abb",.25,"#e2ddee"),ie=new L(ne,ae,new q("#000000",ee,te),re,new J("#000000","#000000",2)),se="#3366cc",le=new z("Arial","#000000",14,"bold"),oe=new z("Arial","#000000",14,"normal"),ce=new z("Montserrat","#FFFFFF",.25,"normal"),he=new z("Montserrat","#000000",6,"normal"),ue=new z("Arial","000000",10,"normal"),de=new z("Arial","000000",8,"normal"),be=new W("#FFFFFF",700,475,new U(50,50,25,40),le,oe,se,se,ce,"#CDCDCD","#CDCDCD",se,se,he,"#E497C1","#cb3083","#FFFFFF"),me=new K(!0,"#d9d9d9",.25,!1),ge=new V("#ff8000",1.5,"#ffc080","#ffc080",.25,"#ffc080"),je=new L(be,me,new q("#000000",ue,de),ge,new J("#000000","#000000",2)),fe="#fdc300",xe="#000000",ve=new z("Arial","#000000",14,"bold"),pe=new z("Arial","#000000",14,"normal"),Oe=new z("Montserrat","#000000",.25,"normal"),ye=new z("Montserrat","#000000",6,"normal"),_e=new z("Arial",xe,10,"normal"),Ce=new z("Arial",xe,8,"normal"),Se=new W("#FFFFFF",700,475,new U(50,50,25,40),ve,pe,fe,fe,Oe,"#CDCDCD","#CDCDCD",fe,fe,ye,"#E497C1","#cb3083","#FFFFFF"),ke=new K(!0,"#d9d9d9",.25,!1),we=new V("#e60700",1.5,"#f59c99","#f59c99",.25,"#f59c99"),Ae=new L(Se,ke,new q("#000000",_e,Ce),we,new J("#000000","#000000",2)),Fe="#b3b3b3",De=new z("Arial","#000000",14,"bold"),Te=new z("Arial","#000000",14,"normal"),Me=new z("Montserrat","#000000",.25,"normal"),Be=new z("Montserrat","#000000",6,"normal"),Pe=new z("Arial","000000",10,"normal"),Ie=new z("Arial","000000",8,"normal"),Ne=new W("#FFFFFF",700,475,new U(50,50,25,40),De,Te,Fe,Fe,Me,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",Be,"#E497C1","#cb3083","#FFFFFF"),Ge=new K(!0,"#d9d9d9",.25,!1),Ee=new V("#000000",1.5,"#b3b3b3","#d3d3d3",1.5,"#b3b3b3"),He=new L(Ne,Ge,new q("#000000",Pe,Ie),Ee,new J("#000000","#000000",2)),Re="#66c8eb",Le=new z("Arial","#000000",14,"bold"),We=new z("Arial","#000000",14,"normal"),Ue=new z("Montserrat","#000000",.25,"normal"),ze=new z("Montserrat","#000000",6,"normal"),Ke=new z("Arial","000000",10,"normal"),qe=new z("Arial","000000",8,"normal"),Ve=new W("#FFFFFF",700,475,new U(50,50,25,40),Le,We,Re,Re,Ue,"#CDCDCD","#CDCDCD",Re,Re,ze,"#E497C1","#cb3083","#FFFFFF"),Je=new K(!0,"#d9d9d9",.25,!1),Ye=new V("#00a3de",1.5,"#66c8eb","#66c8eb",.25,"#66c8eb"),Xe=new L(Ve,Je,new q("#000000",Ke,qe),Ye,new J("#000000","#000000",2)),Ze="#df99c4",$e=new z("Arial","#000000",14,"bold"),Qe=new z("Arial","#000000",14,"normal"),et=new z("Montserrat","#000000",.25,"normal"),tt=new z("Montserrat","#000000",6,"normal"),nt=new z("Arial","000000",10,"normal"),at=new z("Arial","000000",8,"normal"),rt=new W("#FFFFFF",700,475,new U(50,50,25,40),$e,Qe,Ze,Ze,et,"#CDCDCD","#CDCDCD",Ze,Ze,tt,"#E497C1","#cb3083","#FFFFFF"),it=new K(!0,"#d9d9d9",.25,!1),st=new V("#c9559d",1.5,"#df99c4","#df99c4",.25,"#df99c4"),lt=new L(rt,it,new q("#000000",nt,at),st,new J("#000000","#000000",2)),ot=n(476),ct=n(89),ht=n(260),ut=n(478),dt=n(472),bt=n(246);var mt=function(e){var t=e.isLoading,n=function(e){var t="";"uk-who"===e.reference?t="UK-WHO":"turner"===e.reference?t="Turner's Syndrome":"trisomy-21"===e.reference&&(t="Trisomy 21 (Down's Syndrome)");var n="",a="";n="male"===e.sex?"Boys":"Girls";switch(e.measurementMethod){case"height":a="Height / Length";break;case"weight":a="Weight";break;case"bmi":a="Body Mass Index";break;case"ofc":a="Head Circumference";break;default:a=""}return{subtitle:a+" - "+n,title:t}}(e);return Object(y.jsxs)("div",{children:[Object(y.jsx)(ut.a,{active:t,children:Object(y.jsx)(dt.a,{children:"Fetching Data"})}),Object(y.jsx)(bt.a,{reference:e.reference,measurementMethod:e.measurementMethod,sex:e.sex,title:n.title,subtitle:n.subtitle,measurementsArray:e.measurementsArray,midParentalHeightData:e.midParentalHeightData,chartStyle:e.chartStyle,measurementStyle:e.measurementStyle,centileStyle:e.centileStyle,gridlineStyle:e.gridlineStyle,axisStyle:e.axisStyle,enableZoom:!0})]})},gt=function e(t){var n=[];return t.forEach((function(t){Array.isArray(t)?n.push(e(t)):"object"===typeof t&&null!==t?n.push(jt(t)):n.push(t)})),n},jt=function e(t){var n={};for(var a in t){var r=t[a];Array.isArray(r)?n[a]=gt(r):n[a]="object"===typeof r&&null!==r?e(r):r}return n},ft=function(e){return Array.isArray(e)?gt(e):"object"===typeof e&&null!==e?jt(e):e},xt=n(475),vt=function(e){return"height"===e?"cm":"weight"===e?"kg":"bmi"===e?"kg/m\xb2":"ofc"===e?"cm":void 0},pt=function(e){var t=e.measurement;return Object(y.jsxs)(r.a.Fragment,{children:[Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.Cell,{children:"Ages"}),Object(y.jsx)(xt.a.Cell,{children:t.measurement_dates.chronological_calendar_age}),Object(y.jsx)(xt.a.Cell,{children:t.measurement_dates.corrected_calendar_age})]}),Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.Cell,{children:"Measurement"}),Object(y.jsxs)(xt.a.Cell,{children:[t.child_observation_value.observation_value," ",vt(t.child_observation_value.measurement_method)]}),Object(y.jsx)(xt.a.Cell,{})]}),Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.Cell,{children:"SDS"}),Object(y.jsx)(xt.a.Cell,{children:Math.round(1e3*t.measurement_calculated_values.corrected_sds)/1e3}),Object(y.jsx)(xt.a.Cell,{children:Math.round(1e3*t.measurement_calculated_values.chronological_sds)/1e3})]}),Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.Cell,{children:"Centiles"}),Object(y.jsx)(xt.a.Cell,{children:t.measurement_calculated_values.corrected_centile}),Object(y.jsx)(xt.a.Cell,{children:t.measurement_calculated_values.chronological_centile})]})]})},Ot=function(e){var t=e.apiResult,n=e.reference;return Object(y.jsx)(g.a,{children:Object(y.jsxs)(xt.a,{basic:"very",celled:!0,collapsing:!0,compact:!0,children:[Object(y.jsx)(xt.a.Header,{children:Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.HeaderCell,{}),Object(y.jsx)(xt.a.HeaderCell,{children:"Corrected Results"}),Object(y.jsx)(xt.a.HeaderCell,{children:"Chronological Results"})]})}),Object(y.jsxs)(xt.a.Body,{children:[t[n].height.length>0&&Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.HeaderCell,{}),Object(y.jsx)(xt.a.HeaderCell,{children:"Heights"}),Object(y.jsx)(xt.a.HeaderCell,{})]}),t[n].height.length>0&&t[n].height.map((function(e,t){return Object(y.jsx)(pt,{measurement:e},t)})),t[n].weight.length>0&&Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.HeaderCell,{}),Object(y.jsx)(xt.a.HeaderCell,{children:"Weights"}),Object(y.jsx)(xt.a.HeaderCell,{})]}),t[n].weight.length>0&&t[n].weight.map((function(e,t){return Object(y.jsx)(pt,{measurement:e},t)})),t[n].bmi.length>0&&Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.HeaderCell,{}),Object(y.jsx)(xt.a.HeaderCell,{children:"BMIs"}),Object(y.jsx)(xt.a.HeaderCell,{})]}),t[n].bmi.length>0&&t.bmi.map((function(e,t){return Object(y.jsx)(pt,{measurement:e},t)})),t[n].ofc.length>0&&Object(y.jsxs)(xt.a.Row,{children:[Object(y.jsx)(xt.a.HeaderCell,{}),Object(y.jsx)(xt.a.HeaderCell,{children:"Head Circumferences"}),Object(y.jsx)(xt.a.HeaderCell,{})]}),t[n].ofc.length>0&&t[n].ofc.map((function(e,t){return Object(y.jsx)(pt,{measurement:e},t)}))]})]})})},yt=n(473),_t=function(e){var t=e.title,n=e.body,a=e.handleClose,r=e.visible,i=e.handleCancel,s=!!i;return Object(y.jsxs)(yt.a,{title:t,open:r,size:"small",closeOnEscape:!0,children:[Object(y.jsx)(yt.a.Header,{children:t}),Object(y.jsx)(yt.a.Content,{children:n}),Object(y.jsxs)(yt.a.Actions,{children:[Object(y.jsx)(v.a,{negative:!0,onClick:a,children:"OK"}),s&&Object(y.jsx)(v.a,{onClick:i,children:"Cancel"})]})]})},Ct=(n(224),n(469));var St=function(e){return Object(y.jsx)(O.a,{name:"interval",placeholder:"days",value:e.intervalType,onChange:e.handleChangeIntervalType,options:e.intervalTypeOptions})},kt=function(e){return Object(y.jsxs)("div",{style:{textAlign:"left"},children:[Object(y.jsxs)("label",{style:{padding:"10px"},children:[e.min," "]}),Object(y.jsx)("input",{type:"range",min:e.min,max:e.max,value:e.value,step:e.step,className:"slider",onChange:function(t){return e.onChange(t.target.value)}}),Object(y.jsx)("label",{style:{padding:"10px"},children:e.max}),Object(y.jsxs)("h5",{style:{display:"inline"},children:[e.label,": ",e.value," ",e.isPercentage?"%":"SDS"]})]})},wt=[{key:"d",value:"days",text:"Days",disabled:!1},{key:"w",value:"weeks",text:"Weeks",disabled:!1},{key:"m",value:"months",text:"Months",disabled:!1},{key:"y",value:"years",text:"Years",disabled:!1}],At=function(e){var t=Object(a.useState)(40),n=Object(N.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(0),o=Object(N.a)(s,2),c=o[0],h=o[1],u=Object(a.useState)("1"),d=Object(N.a)(u,2),b=d[0],m=d[1],g=Object(a.useState)("20"),p=Object(N.a)(g,2),O=p[0],D=p[1],M=Object(a.useState)("years"),B=Object(N.a)(M,2),P=B[0],I=B[1],G=Object(a.useState)("1"),E=Object(N.a)(G,2),H=E[0],R=E[1],L=Object(a.useState)(!1),W=Object(N.a)(L,2),U=W[0],z=W[1],K=Object(a.useState)(.01),q=Object(N.a)(K,2),V=q[0],J=q[1],Y=Object(a.useState)(!1),X=Object(N.a)(Y,2),Z=X[0],$=X[1],Q=Object(a.useState)(1),ee=Object(N.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(a.useState)("0"),re=Object(N.a)(ae,2),ie=re[0],se=re[1],le=Object(a.useState)(""),oe=Object(N.a)(le,2),ce=oe[0],he=oe[1],ue=function(t){if("submit"===t.type){var n={measurement_method:e.globalState.measurementMethod,sex:e.globalState.sex,start_chronological_age:b,end_age:O,gestation_weeks:r,gestation_days:c,measurement_interval_type:P,measurement_interval_number:H,start_sds:ie,noise:Z,drift_range:V,drift:U,noise_range:te,reference:e.globalState.reference};e.fictionalFormDataSubmit(n)}else e.updateGlobalState("resetCurrent",!0)},de=function(e,t){var n=t.name,a=t.value;"start_age"===n&&m(a),"end_age"===n&&D(a),"interval_value"===n&&R(a),"startSDS"===n&&se(a)},be=function(t){var n=e.globalState.disabled[t.key];return Object(l.a)(Object(l.a)({},t),{},{disabled:n})},me=w.map(be),ge=A.map(be);return Object(a.useEffect)((function(){switch(!0){case Number(b)<0:he("Starting age must be above 0.");break;case Number(O)>20:he("Ending age must be under 20.");break;case Number.isNaN(Number(b)):case Number.isNaN(Number(O)):case Number.isNaN(Number(H)):case Number.isNaN(Number(ie)):he("Please check that all entries have valid numbers.");break;case""===b:case""===O:case""===H:case""===ie:he("Please check that all entries are filled in.");break;default:he("")}}),[b,O,H,ie]),Object(y.jsxs)(j.a,{onSubmit:ue,children:[Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(S,{handleChangeReference:function(t){e.updateGlobalState("reference",t.value)},reference:e.globalState.reference,referenceOptions:F})}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(C,{handleChangeMeasurementMethod:function(t){e.updateGlobalState("measurementMethod",t)},measurementMethod:e.globalState.measurementMethod,measurementOptions:me})}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(k,{handleSexChange:function(t){e.updateGlobalState("sex",t.value)},sex:e.globalState.sex,sexOptions:ge})}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(_,{handleGestationChange:function(e){var t=e.name,n=e.value;"gestation_weeks"===t?(i(n),42===n&&h(0)):"gestation_days"===t&&h(42===r?0:n)},weeks:r,days:c})}),Object(y.jsx)(f.a,{as:"h5",textAlign:"left",children:"Ages"}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(x.a,{type:"decimal",name:"start_age",placeholder:"Starting Decimal Age",value:b,label:{content:"years",basic:!0,color:"blue"},labelPosition:"right",onChange:de})}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(x.a,{type:"decimal",name:"end_age",placeholder:"Ending Decimal Age",value:O,label:{content:"years",basic:!0,color:"blue"},labelPosition:"right",onChange:de})}),Object(y.jsx)(f.a,{as:"h5",textAlign:"left",children:"Intervals"}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(St,{handleChangeIntervalType:function(e,t){var n=t.value;I(n)},intervalType:P,intervalTypeOptions:wt})}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(x.a,{type:"decimal",name:"interval_value",placeholder:"Interval amount",value:H,onChange:de})}),Object(y.jsx)(f.a,{as:"h5",textAlign:"left",children:"SDS (Standard Deviation Score)"}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(j.a.Input,{label:"Starting SDS",type:"decimal",name:"startSDS",placeholder:"SDS",value:ie,labelPosition:"left",onChange:de})}),Object(y.jsx)(T,{errorText:ce}),Object(y.jsx)(j.a.Field,{width:14,style:{textAlign:"left"},children:Object(y.jsx)(Ct.a,{toggle:!0,label:"Add SDS drift?",onChange:function(e,t){var n=t.checked;z(n)}})}),U&&Object(y.jsx)(j.a.Field,{width:14,children:Object(y.jsx)(kt,{isPercentage:!1,min:-3,max:3,value:V,step:.01,onChange:function(e){J(e)},label:"Drift"})}),Object(y.jsx)(j.a.Field,{width:14,style:{textAlign:"left"},children:Object(y.jsx)(Ct.a,{toggle:!0,label:"Simulate Measurement Error?",onChange:function(e,t){var n=t.checked;$(n)}})}),Z&&Object(y.jsx)(j.a.Field,{width:14,children:Object(y.jsx)(kt,{isPercentage:!0,min:0,max:10,value:te,step:.1,onChange:function(e){ne(e)},label:"Percentage Error"})}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(v.a,{content:"Generate Growth Data",type:"submit",fluid:!0,color:"pink",icon:"line graph",labelPosition:"right",disabled:""!==ce})}),e.globalState.isDataPresent&&Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(v.a,{content:"Reset Chart",icon:"power off",onClick:ue,style:{width:"100%"},type:"reset"})})]})},Ft=n(78),Dt=n.n(Ft),Tt=n(121),Mt=n(122),Bt=n.n(Mt),Pt=function(){var e=Object(Tt.a)(Dt.a.mark((function e(t,n,a){var r,i,s;return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat("https://rcpch-dgc-server-live.azurewebsites.net","/").concat(n,"/").concat(a),i={"Content-Type":"application/json","Subscription-Key":"4e00b26f2c61454296ca454fa0f9ebc0"},e.next=4,Bt()({url:r,data:t,method:"POST",headers:i});case 4:return s=e.sent,e.abrupt("return",s.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),It=function(){var e={turner:{height:[],weight:[],bmi:[],ofc:[]},"trisomy-21":{height:[],weight:[],bmi:[],ofc:[]},"uk-who":{height:[],weight:[],bmi:[],ofc:[]}};return{calculation:{input:e,output:e},"mid-parental-height":{input:e,output:e},"fictional-child-data":{input:e,output:e},errors:{errors:!1,message:""},isLoading:!1}},Nt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"calculation",r=Object(a.useState)(It),i=Object(N.a)(r,2),s=i[0],l=i[1],o=Object(a.useCallback)((function(a){l((function(r){var i=ft(r);return i[n].input[t][e].push(a),i.isLoading=!0,i}))}),[e,n,t]),c=Object(a.useCallback)((function(a){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=ft(a[n].input[t][e]);i.pop();var s=null;return r&&(s=a[n].output[t][e]).pop(),{newInput:i,newOutput:s}}),[e,n,t]),h=Object(a.useCallback)((function(a){l((function(r){var i=ft(r),s=c(r,a),l=s.newInput,o=s.newOutput;return i[n].input[t][e]=l,o&&(i[n].output[t][e]=o),i}))}),[l,c,n,t,e]),u=Object(a.useCallback)((function(){l((function(a){var r=ft(a);return r[n].input[t][e]=[],r[n].output[t][e]=[],r}))}),[e,n,t]),d=Object(a.useCallback)((function(){l((function(e){var t=ft(e);return t.errors={errors:!1,message:""},t}))}),[]);return Object(a.useEffect)((function(){var a=!1;if(s.isLoading){var r=s[n].input[t][e],i=ft(r[r.length-1]);Pt(i,t,n).then((function(r){a||l((function(a){var i=ft(a),s="",l=null;"fictional-child-data"===n&&(l=r),"calculation"===n&&(l=i[n].output[t][e].concat([r]));var o,h=Object(R.a)(l);try{for(h.s();!(o=h.n()).done;){var u=o.value;if(l.length<2&&(s=u.measurement_calculated_values.corrected_measurement_error||u.measurement_calculated_values.chronological_measurement_error),s){if("fictional-child-data"===n)i[n].input[t][e]=[];else{var d=c(a).newInput;i[n].input[t][e]=d}return i.errors={errors:!0,message:"The server could not process the measurements. Details: ".concat(s)},i.isLoading=!1,i}}}catch(b){h.e(b)}finally{h.f()}return i[n].output[t][e]=l,i.errors={errors:!1,message:"success"},i.isLoading=!1,i}))})).catch((function(a){l((function(r){var i=ft(r),s=c(r).newInput;i[n].input[t][e]=s;var l="There has been a problem fetching the result from the server. Error details: ".concat(a.message);return i.errors={errors:!0,message:l},i.isLoading=!1,i}))}))}return function(){a=!0}}),[s,e,n,t,c]),{fetchResult:o,removeLastActiveItem:h,clearBothActiveArrays:u,clearApiErrors:d,measurements:s[n].input,results:s[n].output,apiErrors:s.errors,isLoading:s.isLoading}},Gt=function(){var e=Object(Tt.a)(Dt.a.mark((function e(t){var n,a,r;return Dt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://rcpch-dgc-server-live.azurewebsites.net","/utilities/mid-parental-height"),a={"Content-Type":"application/json","Subscription-Key":"4e00b26f2c61454296ca454fa0f9ebc0"},e.next=4,Bt()({url:n,data:t,method:"POST",headers:a});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Et=function(e){return Gt(e).then((function(e){return e}))},Ht=function(){return{mode:"calculation",modeActiveIndex:0,reference:"uk-who",measurementMethod:"height",units:"cm",measurementMethodActiveIndex:0,sex:"male",midparentalHeightData:{mid_parental_height:null,mid_parental_height_sds:null,mid_parental_height_centile:null,mid_parental_height_centile_data:null,mid_parental_height_lower_centile_data:null,mid_parental_height_upper_centile_data:null,mid_parental_height_lower_value:null,mid_parental_height_upper_value:null},disabled:{height:!1,weight:!1,bmi:!1,ofc:!1,male:!1,female:!1},errors:{errors:!1,message:""},clearMeasurement:!1,resetCurrent:!1,undoLast:!1,isDataPresent:!1}},Rt=["height","weight","bmi","ofc"],Lt=function(){var e=Object(a.useState)(Ht),t=Object(N.a)(e,2),n=t[0],r=t[1];return{globalState:n,makeGlobalStateUpdater:Object(a.useCallback)((function(e){return function(t,n){r((function(a){var r=ft(a);switch(t){case"mode":r.mode=n,r.modeActiveIndex="calculation"===n?0:1;break;case"modeActiveIndex":switch(r.modeActiveIndex=n,n){case 0:r.mode="calculation";break;case 1:r.mode="fictional-child-data";break;case 2:r.mode="mid-parental-height";break;default:r.mode="calculation"}break;case"reference":r.reference=n,"turner"===n?(r.disabled={height:!1,weight:!0,bmi:!0,ofc:!0,male:!0,female:!1},r.measurementMethod="height",r.measurementMethodActiveIndex=0,r.sex="female"):(e[n][r.measurementMethod].length>0&&e[n][r.measurementMethod][0].birth_data.sex!==r.sex&&(r.sex=e[n][r.measurementMethod][0].birth_data.sex),r.disabled={height:!1,weight:!1,bmi:!1,ofc:!1,male:!1,female:!1});break;case"measurementMethod":r.measurementMethod=n,r.units=vt(n);for(var i=0;i<Rt.length;i++)if(Rt[i]===n){r.measurementMethodActiveIndex=i;break}break;case"measurementMethodActiveIndex":var s=Rt[n];"turner"===r.reference&&"height"!==s?r.errors={errors:!0,message:"Unable to change measurement type"}:(r.measurementMethodActiveIndex=n,r.measurementMethod=Rt[n]);break;case"sex":var l=Object(I.a)(e[r.reference][r.measurementMethod]);if(l.length>0){var o,c=Object(R.a)(l);try{for(c.s();!(o=c.n()).done;){var h=o.value;if(n!==h.sex){r.errors={errors:!0,message:"Unable to change sex"};break}}}catch(u){c.e(u)}finally{c.f()}}r.errors.message||(r.sex=n);break;case"mid-parental-height":if("reset"===n){r.midparentalHeightData={mid_parental_height:null,mid_parental_height_sds:null,mid_parental_height_centile:null,mid_parental_height_centile_data:null,mid_parental_height_lower_centile_data:null,mid_parental_height_upper_centile_data:null,mid_parental_height_lower_value:null,mid_parental_height_upper_value:null}}else r.midparentalHeightData=n;break;default:r[t]=n}return r}))}}),[])}},Wt=function(e){var t=Object(a.useState)(null),n=Object(N.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(null),l=Object(N.a)(s,2),o=l[0],c=l[1];return Object(y.jsx)(m.a,{children:Object(y.jsxs)(j.a,{onSubmit:function(t){t.utilitiesFormData;var n={sex:e.globalState.sex,height_maternal:r,height_paternal:o};e.utilitiesFormDataSubmit(n)},children:[Object(y.jsxs)(j.a.Group,{children:[Object(y.jsxs)(j.a.Field,{children:[Object(y.jsx)("label",{children:"Maternal height (cm)"}),Object(y.jsx)(x.a,{onChange:function(e,t){t.name;var n=t.value;i(n)},placeholder:"e.g. 167"})]}),Object(y.jsxs)(j.a.Field,{children:[Object(y.jsx)("label",{children:"Paternal height (cm)"}),Object(y.jsx)(x.a,{placeholder:"e.g. 179",onChange:function(e,t){t.name;var n=t.value;c(n)}})]})]}),Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(v.a,{type:"submit",children:"Calculate Mid-parental Height"})}),e.globalState.midparentalHeightData.mid_parental_height&&Object(y.jsx)(j.a.Field,{children:Object(y.jsx)(v.a,{type:"submit",onClick:function(){e.updateGlobalState("mid-parental-height","reset")},children:"Remove Mid-parental Height"})})]})})},Ut=He;var zt=[{menuItem:"Height",measurementName:"height"},{menuItem:"Weight",measurementName:"weight"},{menuItem:"BMI",measurementName:"bmi"},{menuItem:"Head Circumference",measurementName:"ofc"}],Kt=[{key:"monochrome",value:"monochrome",text:"Monochrome"},{key:"trad",value:"trad",text:"Traditional"},{key:"tanner1",value:"tanner1",text:"Tanner 1"},{key:"tanner2",value:"tanner2",text:"Tanner 2"},{key:"tanner3",value:"tanner3",text:"Tanner 3"}];var qt=function(){var e=Object(a.useState)(Ut.chart),t=Object(N.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(Ut.axes),l=Object(N.a)(s,2),o=l[0],c=l[1],h=Object(a.useState)(Ut.centiles),u=Object(N.a)(h,2),d=u[0],b=u[1],m=Object(a.useState)(Ut.measurements),j=Object(N.a)(m,2),f=j[0],x=j[1],p=Object(a.useState)({value:"tanner4",text:"Monochrome"}),O=Object(N.a)(p,2),_=O[0],C=O[1],S=Object(a.useState)(!1),k=Object(N.a)(S,2),w=k[0],A=k[1],F=Object(a.useState)({visible:!1,title:"",body:"",handleClose:null,handleCancel:null}),D=Object(N.a)(F,2),T=D[0],M=D[1],B=Lt(),P=B.globalState,I=B.makeGlobalStateUpdater,G=P.mode,E=P.modeActiveIndex,L=P.reference,W=P.measurementMethod,U=P.measurementMethodActiveIndex,z=P.sex,K=P.disabled,q=P.errors,V=P.resetCurrent,J=P.undoLast,Y=Nt(W,L,G),X=Y.fetchResult,Z=Y.removeLastActiveItem,$=Y.clearBothActiveArrays,Q=Y.clearApiErrors,ee=Y.measurements,te=Y.results,ne=Y.apiErrors,ae=Y.isLoading,re=Object(a.useMemo)((function(){return I(te)}),[te,I]);Object(a.useEffect)((function(){if(ne.errors?M({visible:!0,title:"Unable to plot",body:ne.message,handleClose:function(){Q(),M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}):"success"===ne.message&&(re("clearMeasurement",!0),Q()),q.errors){var e="Only height data is available for Turner Syndrome.";"Unable to change sex"===q.message&&(e="Each chart can only display measurements from one patient at a time. Please reset the chart before entering measurements from a new patient."),M({visible:!0,title:q.message,body:e,handleClose:function(){return M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),re("errors",{errors:!1,message:""})}}),[q,ne,Q,re]),Object(a.useEffect)((function(){if("trad"===_.value){var e="male"===z?Xe:lt;b(e.centiles),i(e.chart),x(e.measurements),c(e.axes)}}),[z,_.value]),Object(a.useEffect)((function(){te[L][W].length>0?re("isDataPresent",!0):re("isDataPresent",!1)}),[te,L,W,re]),V&&(M({visible:!0,title:"Are you sure you want to reset?",body:"This will remove all measurements from the current chart.",handleCancel:function(){return M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){$(),M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null}),re("mid-parental-height","empty")}}),re("resetCurrent",!1)),J&&(M({visible:!0,title:"Are you sure you want to remove the last measurement?",body:"This will remove the last measurement entered on the chart.",handleCancel:function(){return M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){Z(!0),M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),re("undoLast",!1));var se=function(e,t){var n=t.activeIndex;re("measurementMethodActiveIndex",n)},le=function(e){e.noise_range=e.noise_range/100,X(e)},oe=function(e){Et(e).then((function(e){re("mid-parental-height",e)})).catch((function(e){console.log(e)}))},ce=function(e,t){var n,a,r=t.value;"trad"===r&&(n="male"===z?Xe:lt,a="Traditional"),"tanner1"===r&&(n=ie,a="Tanner 1"),"tanner2"===r&&(n=je,a="Tanner 2"),"tanner3"===r&&(n=Ae,a="Tanner 3"),"monochrome"===r&&(n=He,a="Monochrome"),b(n.centiles),i(n.chart),x(n.measurements),c(n.axes),C({value:r,text:a})},he=function(e){if(!ae){var t=ft(ee[L][W]),n="";if(t.length>0){var a,r=7*e.gestation_weeks+e.gestation_days,i=[],s=Object(R.a)(t);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(JSON.stringify(l)===JSON.stringify(e)){n="duplicate";break}var o=7*l.gestation_weeks+l.gestation_days;if(l.sex!==e.sex&&i.push("differing sexes"),l.birth_date!==e.birth_date&&i.push("differing date of births"),o!==r&&i.push("differing gestations"),i.length>0){n=i[0],2===i.length?n=i.join(" and "):3===i.length&&(n="".concat(i[0],", ").concat(i[1]," and ").concat(i[2]));break}}}catch(c){s.e(c)}finally{s.f()}}return n?(M("duplicate"===n?{visible:!0,title:"Duplicate entries",body:"Please check the last measurement entry as it appears to be identical to a measurement already entered.",handleClose:function(){return M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}:{visible:!0,title:"Please check entries",body:"Each chart can only display measurements from one patient at a time: ".concat(n," were detected."),handleClose:function(){return M({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),!1):(X(e),!0)}},ue=zt.map((function(e){return{menuItem:e.menuItem,render:function(){return Object(y.jsx)(ot.a.Pane,{attached:"top",disabled:K[e.measurementName],children:Object(y.jsx)(mt,{reference:L,sex:z,measurementMethod:e.measurementName,measurementsArray:te[L][e.measurementName],midParentalHeightData:P.midparentalHeightData,chartStyle:n,axisStyle:o,gridlineStyle:Ut.gridlines,centileStyle:d,measurementStyle:f,isLoading:ae},e.measurementName)})}}})),de=function(){return Object(y.jsx)(ot.a,{menu:{attached:"top"},panes:ue,activeIndex:U,onTabChange:se})},be=[{menuItem:"Measurements",render:function(){return Object(y.jsx)(ot.a.Pane,{attached:!1,children:Object(y.jsx)(H,{handleMeasurementResult:he,globalState:P,updateGlobalState:re,className:"measurement-form"})})}},{menuItem:"Examples",render:function(){return Object(y.jsx)(ot.a.Pane,{children:Object(y.jsx)(At,{fictionalFormDataSubmit:le,globalState:P,updateGlobalState:re})})}},{menuItem:"Utilities",render:function(){return"uk-who"===P.reference?Object(y.jsx)(ot.a.Pane,{children:Object(y.jsx)(Wt,{utilitiesFormDataSubmit:oe,globalState:P,updateGlobalState:re})}):Object(y.jsx)(ot.a.Pane,{children:Object(y.jsx)("h5",{children:"Mid-parental height only valid for UK-WHO reference."})})}}],me=function(){return Object(y.jsxs)("span",{children:["Theme"," ",Object(y.jsx)(ct.a,{options:Kt,floating:!0,inline:!0,onChange:ce,text:_.text})]})};return Object(y.jsxs)(r.a.Fragment,{children:[Object(y.jsx)(ht.a,{padded:!0,children:Object(y.jsxs)(ht.a.Row,{children:[Object(y.jsx)(ht.a.Column,{width:6,children:Object(y.jsx)(g.a,{textAlign:"center",children:Object(y.jsx)(ot.a,{panes:be,menu:{attached:!1},onTabChange:function(e,t){var n=t.activeIndex;re("modeActiveIndex",n)},activeIndex:E})})}),Object(y.jsx)(ht.a.Column,{width:10,children:Object(y.jsxs)(g.a,{children:[w?Object(y.jsx)(Ot,{apiResult:te,reference:L}):Object(y.jsx)(de,{}),Object(y.jsx)(ht.a,{verticalAlign:"middle",children:Object(y.jsxs)(ht.a.Row,{columns:2,children:[Object(y.jsx)(ht.a.Column,{textAlign:"left",children:Object(y.jsx)(me,{})}),Object(y.jsx)(ht.a.Column,{textAlign:"right",children:Object(y.jsx)(v.a,{className:"selectUpperMargin",onClick:function(){A(!w)},children:"Results"})})]})})]})})]})}),Object(y.jsx)(_t,{title:T.title,body:T.body,visible:T.visible,handleClose:T.handleClose,handleCancel:T.handleCancel})]})};var Vt=function(){return Object(y.jsx)("div",{children:Object(y.jsx)(qt,{})})};var Jt=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(Vt,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(458);s.a.render(Object(y.jsx)(Jt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[459,1,2]]]);
//# sourceMappingURL=main.2538e3df.chunk.js.map