(this["webpackJsonprcpchgrowth-react"]=this["webpackJsonprcpchgrowth-react"]||[]).push([[0],{231:function(e,t,n){},275:function(e,t,n){},458:function(e,t,n){"use strict";n.r(t);for(var a=n(0),r=n.n(a),i=n(58),s=n.n(i),o=(n(275),n(29)),l=n(19),c=n(26),u=n(27),h=n(24),d=n(65),m=n(232),b=n(233),f=n(119),g=n(467),j=n(158),v=n(472),x=n(479),O=n(469),_=n(468),y=n(476),C=n(459),w=n(6),p=[{key:"male",value:"male",text:"Boy",disabled:!1},{key:"female",value:"female",text:"Girl",disabled:!1}],k=[],S=23;S<=42;)k.push({key:S.toString(10),value:S,text:S.toString(10)}),S++;var F=[{key:"0",value:0,text:"0"},{key:"1",value:1,text:"1"},{key:"2",value:2,text:"2"},{key:"3",value:3,text:"3"},{key:"4",value:4,text:"4"},{key:"5",value:5,text:"5"},{key:"6",value:6,text:"6"}],D=[{key:"uk-who",value:"uk-who",text:"UK-WHO"},{key:"trisomy-21",value:"trisomy-21",text:"Down's Syndrome"},{key:"turner",value:"turner",text:"Turner's syndrome"}],M=[{key:"height",value:"height",text:"Height (cm)",disabled:!1},{key:"weight",value:"weight",text:"Weight (kg)",disabled:!1},{key:"bmi",value:"bmi",text:"BMI (kg/m\xb2)",disabled:!1},{key:"ofc",value:"ofc",text:"Head Circumference (cm)",disabled:!1}],T=function(e){var t,n,a,r;try{return e.getTime(),n=""+((t=new Date(e)).getMonth()+1),a=""+t.getDate(),r=t.getFullYear(),n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}catch(i){throw new Error("Input date for formatDate not recognised")}},A=function(e){try{var t=e.split("-").map((function(e,t){if(""!==e){var n=Number(e);if(Number.isNaN(n))throw new Error;return 1===t?n-1:n}throw new Error}));if(3!==t.length||t[1]<0||t[1]>11||t[2]<1||t[2]>31)throw new Error;var n=Object(b.a)(Date,Object(f.a)(t));return"number"===typeof n.getTime()?n:null}catch(a){return null}},B=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeReference=function(e,t){var n=a.props.handleChangeReference(t.value);if("turner"===t.value){a.disableMeasurement("weight",!0),a.disableMeasurement("ofc",!0),a.disableMeasurement("bmi",!0);var r=[Object(l.a)({},a.state.sexOptions[0]),Object(l.a)({},a.state.sexOptions[1])];r[0].disabled=!0,a.setState({sex:"female",observation_value_error:a.validateObservationValue("height",a.state.measurement.observation_value),reference:t.value,sexOptions:r}),a.props.handleChangeSex("female",!0),a.props.setMeasurementMethod("height")}else{a.disableMeasurement("weight",!1),a.disableMeasurement("ofc",!1),a.disableMeasurement("bmi",!1);var i=[Object(l.a)({},a.state.sexOptions[0]),Object(l.a)({},a.state.sexOptions[1])];i[0].disabled=!1,a.setState({observation_value_error:a.validateObservationValue(a.props.measurementMethod,a.state.measurement.observation_value),sex:n.newSex,reference:t.value,sexOptions:i})}},a.disableMeasurement=function(e,t){if("height"===e){var n=a.state.measurementOptions;n[0].disabled=t,a.setState({measurementOptions:n})}if("weight"===e){var r=a.state.measurementOptions;r[1].disabled=t,a.setState({measurementOptions:r})}if("ofc"===e){var i=a.state.measurementOptions;i[2].disabled=t,a.setState({measurementOptions:i})}if("bmi"===e){var s=a.state.measurementOptions;s[3].disabled=t,a.setState({measurementOptions:s})}},a.handleObservationChange=function(e,t){var n=t.value,r=a.state,i=r.measurement,s=r.observation_value_error;i.observation_value=n,s=a.validateObservationValue(a.props.measurementMethod,n),a.setState({measurement:i,observation_value_error:s})},a.state={birth_date:T(new Date),observation_date:T(new Date),measurement:{observation_value:"",units:"cm"},sex:"male",gestation_weeks:40,gestation_days:0,birth_date_error:"",observation_date_error:"",observation_value_error:"empty",form_valid:!1,measurementResult:[],reference:"uk-who",measurementOptions:M,sexOptions:p},a.handleChangeDate=a.handleChangeDate.bind(Object(h.a)(a)),a.handleChangeMeasurementMethod=a.handleChangeMeasurementMethod.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChangeGestation=a.handleChangeGestation.bind(Object(h.a)(a)),a.handleChangeSex=a.handleChangeSex.bind(Object(h.a)(a)),a.handleObservationChange=a.handleObservationChange.bind(Object(h.a)(a)),a.handleChangeReference=a.handleChangeReference.bind(Object(h.a)(a)),a.handleResetCurrentGraph=a.handleResetCurrentGraph.bind(Object(h.a)(a)),a.handleUndoLast=a.handleUndoLast.bind(Object(h.a)(a)),a}return Object(u.a)(n,[{key:"handleChangeDate",value:function(e){this.setState(Object(o.a)({},e.target.name,e.target.value));var t=A(e.target.value);if(t){var n="birth_date"===e.target.name?A(this.state.observation_date):t,a="birth_date"===e.target.name?t:A(this.state.birth_date),r=n.getTime()-a.getTime();r<0?"birth_date"===e.target.name?this.setState({birth_date_error:"Date of birth cannot come after the date of measurement"}):"observation_date"===e.target.name&&this.setState({observation_date_error:"Date of measurement cannot come before the date of birth."}):r>63113904e4?this.setState(Object(o.a)({},"".concat(e.target.name,"_error"),"No centile data exists over 20 years of age.")):this.setState({birth_date_error:"",observation_date_error:""})}else this.setState(Object(o.a)({},"".concat(e.target.name,"_error"),"Please enter a valid date."))}},{key:"validateObservationValue",value:function(e,t){return""===t?"empty":Number.isNaN(Number(t))?"Please enter a valid number.":"height"===e?t<20?"The "+e+" you entered is too low.":t>272?"The "+e+" you entered is too tall.":"":"weight"===e?t<.01?"The "+e+" you entered is too low.":t>635?"The "+e+" you entered is too heavy.":"":"bmi"===e?t<5?"The "+e+" you entered is too low.":t>204?"The "+e+" you entered is too high.":"":"ofc"===e?t<25?"The "+e+" you entered is too low.":t>70?"The "+e+" you entered is too high.":"":void 0}},{key:"formIsValid",value:function(){return("turner"!==this.state.reference||"height"===this.props.measurementMethod)&&(""===this.state.birth_date_error&&""===this.state.observation_date_error&&""===this.state.observation_value_error||void 0)}},{key:"handleSubmit",value:function(e){var t=[],n={birth_date:this.state.birth_date,observation_date:this.state.observation_date,measurement_method:this.props.measurementMethod,observation_value:this.state.measurement.observation_value,gestation_weeks:this.state.gestation_weeks,gestation_days:this.state.gestation_days,sex:this.state.sex};t.push(n),this.props.measurementResult(t)}},{key:"handleChangeMeasurementMethod",value:function(e,t){var n=Object(l.a)({},this.state.measurement);t.value!==this.props.measurementMethod&&(n.units=this.changeUnits(t.value),this.props.setMeasurementMethod(t.value),this.setState({measurement:n,observation_value_error:this.validateObservationValue(t.value,n.observation_value)}),"turner"===this.state.reference&&"height"!==this.props.measurementMethod?(this.disableMeasurement("weight",!0),this.disableMeasurement("bmi",!0),this.disableMeasurement("ofc",!0)):(this.disableMeasurement("weight",!1),this.disableMeasurement("bmi",!1),this.disableMeasurement("ofc",!1)))}},{key:"handleChangeGestation",value:function(e,t){var n=t.name,a=t.value;"gestation_weeks"===n?(this.setState({gestation_weeks:a}),42===a&&this.setState({gestation_days:0})):"gestation_days"===n&&(42===this.state.gestation_weeks?this.setState({gestation_days:0}):this.setState({gestation_days:a}))}},{key:"handleChangeSex",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.props.handleChangeSex(t.value,n);a&&this.setState({sex:t.value})}},{key:"changeUnits",value:function(e){return"height"===e?"cm":"weight"===e?"kg":"bmi"===e?"kg/m\xb2":"ofc"===e?"cm":void 0}},{key:"handleResetCurrentGraph",value:function(){this.props.setCommands((function(e){return Object(l.a)(Object(l.a)({},e),{},{resetCurrent:!0})}))}},{key:"handleUndoLast",value:function(){this.props.setCommands((function(e){return Object(l.a)(Object(l.a)({},e),{},{undoLast:!0})}))}},{key:"componentDidUpdate",value:function(){if(this.state.form_valid!==this.formIsValid()&&this.setState({form_valid:this.formIsValid()}),this.props.commands.clearMeasurement){var e=Object(l.a)({},this.state.measurement);e.observation_value="",this.setState({measurement:e,observation_value_error:"empty",form_valid:!1}),this.props.setCommands((function(e){return Object(l.a)(Object(l.a)({},e),{},{clearMeasurement:!1})}))}this.props.commands.changeSex&&(this.setState({sex:"male"===this.state.sex?"female":"male"}),this.props.setCommands((function(e){return Object(l.a)(Object(l.a)({},e),{},{changeSex:!1})})))}},{key:"render",value:function(){return Object(w.jsx)(g.a,{children:Object(w.jsxs)(j.a,{textAlign:"center",children:[Object(w.jsxs)(v.a,{onSubmit:this.handleSubmit,children:[Object(w.jsxs)(v.a.Field,{children:[Object(w.jsx)(x.a,{as:"h5",textAlign:"left",children:"Reference"}),Object(w.jsx)(O.a,{name:"reference",value:this.state.reference,options:D,onChange:this.handleChangeReference,placeholder:"Select reference"})]}),Object(w.jsxs)(v.a.Field,{required:!0,children:[Object(w.jsx)(x.a,{as:"h5",textAlign:"left",children:"Dates"}),Object(w.jsx)(_.a,{label:"Birth Date",type:"date",name:"birth_date",value:this.state.birth_date,placeholder:"Date of Birth",onChange:this.handleChangeDate})]}),Object(w.jsx)(v.a.Field,{required:!0,children:Object(w.jsx)(_.a,{label:"Measurement Date",type:"date",name:"observation_date",value:this.state.observation_date,placeholder:"Date of Measurement",onChange:this.handleChangeDate})}),Object(w.jsx)(x.a,{as:"h5",textAlign:"left",children:"Measurements"}),Object(w.jsxs)(v.a.Group,{children:[Object(w.jsx)(v.a.Field,{required:!0,children:Object(w.jsx)(O.a,{value:this.props.measurementMethod,name:"measurement_method",placeholder:"Measurement Type",options:M,onChange:this.handleChangeMeasurementMethod})}),Object(w.jsx)(v.a.Field,{required:!0,width:8,children:Object(w.jsx)(_.a,{type:"decimal",name:"observation_value",placeholder:"Measurement",value:this.state.measurement.observation_value,label:{content:this.state.measurement.units.toString(),basic:!0,color:"blue"},labelPosition:"right",onChange:this.handleObservationChange})})]}),this.state.observation_value_error&&"empty"!==this.state.observation_value_error&&Object(w.jsx)(y.a,{color:"red",children:this.state.observation_value_error}),this.state.observation_date_error?Object(w.jsx)(y.a,{color:"red",children:this.state.observation_date_error}):null,this.state.birth_date_error?Object(w.jsx)(y.a,{color:"red",children:this.state.birth_date_error}):null,Object(w.jsx)(x.a,{as:"h5",textAlign:"left",children:"Sex"}),Object(w.jsx)(v.a.Field,{required:!0,children:Object(w.jsx)(O.a,{name:"sex",placeholder:"Sex",value:this.state.sex,onChange:this.handleChangeSex,options:this.state.sexOptions})}),Object(w.jsx)(v.a.Group,{children:Object(w.jsxs)(v.a.Field,{children:[Object(w.jsx)(x.a,{as:"h5",textAlign:"left",children:"Gestation"}),Object(w.jsxs)("span",{children:[Object(w.jsx)(O.a,{compact:!0,name:"gestation_weeks",value:this.state.gestation_weeks,options:k,onChange:this.handleChangeGestation}),"\xa0+",Object(w.jsx)(O.a,{compact:!0,name:"gestation_days",value:this.state.gestation_days,options:F,onChange:this.handleChangeGestation}),"\xa0 weeks"]})]})}),Object(w.jsx)(v.a.Field,{children:Object(w.jsx)(C.a,{content:"Calculate Centiles and Add To Chart",type:"submit",fluid:!0,disabled:!this.state.form_valid,color:"pink",icon:"line graph",labelPosition:"right"})})]}),Object(w.jsxs)(j.a,{children:[Object(w.jsx)(C.a,{content:"Reset Chart",icon:"power off",onClick:this.handleResetCurrentGraph}),Object(w.jsx)(C.a,{content:"Remove Last",icon:"undo",onClick:this.handleUndoLast})]})]})})}}]),n}(r.a.Component),R=n(155),H=n.n(R),E=n(245),N=n(156),I=n(22),L=function(){function e(t,n,a,r,i){Object(c.a)(this,e),this.chart=t,this.gridlines=n,this.axes=a,this.centiles=r,this.measurements=i}return Object(u.a)(e,[{key:"chart",get:function(){return this._chart},set:function(e){this._chart=e}},{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"axes",get:function(){return this._axes},set:function(e){this._axes=e}},{key:"centiles",get:function(){return this._centiles},set:function(e){this._centiles=e}},{key:"measurements",get:function(){return this._measurements},set:function(e){this._measurements=e}}]),e}(),W=function(){function e(t,n,a,r,i,s,o,l,u,h,d,m,b,f,g,j,v){Object(c.a)(this,e),this.backgroundColour=t,this.width=n,this.height=a,this.padding=r,this.titleStyle=i,this.subTitleStyle=s,this.tooltipBackgroundColour=o,this.tooltipStroke=l,this.tooltipTextStyle=u,this.termFill=h,this.termStroke=d,this.infoBoxFill=m,this.infoBoxStroke=b,this.infoBoxTextStyle=f,this.toggleButtonInactiveColour=g,this.toggleButtonActiveColour=j,this.toggleButtonTextColour=v}return Object(u.a)(e,[{key:"backgroundColour",get:function(){return this._backgroundColour},set:function(e){this._backgroundColour=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e}},{key:"titleStyle",get:function(){return this._titleStyle},set:function(e){this._titleStyle=e}},{key:"subTitleStyle",get:function(){return this._subTitleStyle},set:function(e){this._subTitleStyle=e}},{key:"tooltipBackgroundColour",get:function(){return this._tooltipBackgroundColour},set:function(e){this._tooltipBackgroundColour=e}},{key:"tooltipStroke",get:function(){return this._tooltipStroke},set:function(e){this._tooltipStroke=e}},{key:"tooltipTextStyle",get:function(){return this._tooltipTextStyle},set:function(e){this._tooltipTextStyle=e}},{key:"termFill",get:function(){return this._termFill},set:function(e){this._termFill=e}},{key:"termStroke",get:function(){return this._termStroke},set:function(e){this._termStroke=e}},{key:"infoBoxFill",get:function(){return this._infoBoxFill},set:function(e){this._infoBoxFill=e}},{key:"infoBoxStroke",get:function(){return this._infoBoxStroke},set:function(e){this._infoBoxStroke=e}},{key:"infoBoxTextStyle",get:function(){return this._infoBoxTextStyle},set:function(e){this._infoBoxTextStyle=e}},{key:"toggleButtonActiveColour",get:function(){return this._toggleButtonActiveColour},set:function(e){this._toggleButtonActiveColour=e}},{key:"toggleButtonInactiveColour",get:function(){return this._toggleButtonInactiveColour},set:function(e){this._toggleButtonInactiveColour=e}},{key:"toggleButtonTextColour",get:function(){return this._toggleButtonTextColour},set:function(e){this._toggleButtonTextColour=e}}]),e}(),P=function(){function e(t,n,a,r){Object(c.a)(this,e),this.left=t,this.right=n,this.top=a,this.bottom=r}return Object(u.a)(e,[{key:"left",get:function(){return this._left},set:function(e){this._left=e}},{key:"right",get:function(){return this._right},set:function(e){this._right=e}},{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"bottom",get:function(){return this._bottom},set:function(e){this._bottom=e}}]),e}(),G=function(){function e(t,n,a,r){Object(c.a)(this,e),this.name=t,this.colour=n,this.size=a,this.weight=r}return Object(u.a)(e,[{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"colour",get:function(){return this._colour},set:function(e){this._colour=e}},{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"style",get:function(){return this._style}},{key:"weight",set:function(e){this._weight=e}}]),e}(),U=function(){function e(t,n,a,r){Object(c.a)(this,e),this.gridlines=t,this.stroke=n,this.strokeWidth=a,this.dashed=r}return Object(u.a)(e,[{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"stroke",get:function(){return this._stroke},set:function(e){this._stroke=e}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(e){this._strokeWidth=e}},{key:"dashed",get:function(){return this._dashed},set:function(e){this._dashed=e}}]),e}(),z=function(){function e(t,n,a){Object(c.a)(this,e),this.axisStroke=t,this.axisLabelTextStyle=n,this.tickLabelTextStyle=a}return Object(u.a)(e,[{key:"axisStroke",get:function(){return this._axisStroke},set:function(e){this._axisStroke=e}},{key:"axisLabelTextStyle",get:function(){return this._axisLabelTextStyle},set:function(e){this._axisLabelTextStyle=e}},{key:"tickLabelTextStyle",get:function(){return this._tickLabelTexSize},set:function(e){this._tickLabelTexSize=e}}]),e}(),V=function(){function e(t,n,a){Object(c.a)(this,e),this.centileStroke=t,this.centileStrokeWidth=n,this.delayedPubertyAreaFill=a}return Object(u.a)(e,[{key:"centileStroke",get:function(){return this._centileStroke},set:function(e){this._centileStroke=e}},{key:"centileStrokeWidth",get:function(){return this._centileStrokeWidth},set:function(e){this._centileStrokeWidth=e}},{key:"delayedPubertyAreaFill",get:function(){return this._delayedPubertyAreaFill},set:function(e){this._delayedPubertyAreaFill=e}}]),e}(),K=function(){function e(t,n,a){Object(c.a)(this,e),this.measurementFill=t,this.measurementSize=a}return Object(u.a)(e,[{key:"measurementFill",get:function(){return this._measurementFill},set:function(e){this._measurementFill=e}},{key:"measurementStroke",get:function(){return this._measurementStroke},set:function(e){this._measurementStroke=e}},{key:"measurementSize",get:function(){return this._measurementSize},set:function(e){this._measurementSize=e}}]),e}(),q="#fdc300",J=new G("Arial","#000000",14,"bold"),Y=new G("Arial","#000000",14,"normal"),Z=new G("Montserrat","#000000",.25,"normal"),$=new G("Montserrat","#000000",6,"normal"),Q=new G("Arial","000000",10,"normal"),X=new G("Arial","000000",8,"normal"),ee=new W("#FFFFFF",700,475,new P(50,50,25,40),J,Y,q,q,Z,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",$,"#E497C1","#cb3083","#FFFFFF"),te=new U(!0,"#d9d9d9",.25,!1),ne=new V("#7159aa",1.5,"#c6bddd"),ae=new L(ee,te,new z("#000000",Q,X),ne,new K("#000000","#000000",2)),re="#3366cc",ie=new G("Arial","#000000",14,"bold"),se=new G("Arial","#000000",14,"normal"),oe=new G("Montserrat","#FFFFFF",.25,"normal"),le=new G("Montserrat","#000000",6,"normal"),ce=new G("Arial","000000",10,"normal"),ue=new G("Arial","000000",8,"normal"),he=new W("#FFFFFF",700,475,new P(50,50,25,40),ie,se,re,re,oe,"#CDCDCD","#CDCDCD",re,re,le,"#E497C1","#cb3083","#FFFFFF"),de=new U(!0,"#d9d9d9",.25,!1),me=new V("#ff8000",1.5,"#ffc080"),be=new L(he,de,new z("#000000",ce,ue),me,new K("#000000","#000000",2)),fe="#fdc300",ge="#000000",je=new G("Arial","#000000",14,"bold"),ve=new G("Arial","#000000",14,"normal"),xe=new G("Montserrat","#000000",.25,"normal"),Oe=new G("Montserrat","#000000",6,"normal"),_e=new G("Arial",ge,10,"normal"),ye=new G("Arial",ge,8,"normal"),Ce=new W("#FFFFFF",700,475,new P(50,50,25,40),je,ve,fe,fe,xe,"#CDCDCD","#CDCDCD",fe,fe,Oe,"#E497C1","#cb3083","#FFFFFF"),we=new U(!0,"#d9d9d9",.25,!1),pe=new V("#e60700",1.5,"#f59c99"),ke=new L(Ce,we,new z("#000000",_e,ye),pe,new K("#000000","#000000",2)),Se="#b3b3b3",Fe=new G("Arial","#000000",14,"bold"),De=new G("Arial","#000000",14,"normal"),Me=new G("Montserrat","#000000",.25,"normal"),Te=new G("Montserrat","#000000",6,"normal"),Ae=new G("Arial","000000",10,"normal"),Be=new G("Arial","000000",8,"normal"),Re=new W("#FFFFFF",700,475,new P(50,50,25,40),Fe,De,Se,Se,Me,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",Te,"#E497C1","#cb3083","#FFFFFF"),He=new U(!0,"#d9d9d9",.25,!1),Ee=new V("#000000",1.5,"#b3b3b3"),Ne=new L(Re,He,new z("#000000",Ae,Be),Ee,new K("#000000","#000000",2)),Ie="#66c8eb",Le=new G("Arial","#000000",14,"bold"),We=new G("Arial","#000000",14,"normal"),Pe=new G("Montserrat","#000000",.25,"normal"),Ge=new G("Montserrat","#000000",6,"normal"),Ue=new G("Arial","000000",10,"normal"),ze=new G("Arial","000000",8,"normal"),Ve=new W("#FFFFFF",700,475,new P(50,50,25,40),Le,We,Ie,Ie,Pe,"#CDCDCD","#CDCDCD",Ie,Ie,Ge,"#E497C1","#cb3083","#FFFFFF"),Ke=new U(!0,"#d9d9d9",.25,!1),qe=new V("#00a3de",1.5,"#66c8eb"),Je=new L(Ve,Ke,new z("#000000",Ue,ze),qe,new K("#000000","#000000",2)),Ye="#df99c4",Ze=new G("Arial","#000000",14,"bold"),$e=new G("Arial","#000000",14,"normal"),Qe=new G("Montserrat","#000000",.25,"normal"),Xe=new G("Montserrat","#000000",6,"normal"),et=new G("Arial","000000",10,"normal"),tt=new G("Arial","000000",8,"normal"),nt=new W("#FFFFFF",700,475,new P(50,50,25,40),Ze,$e,Ye,Ye,Qe,"#CDCDCD","#CDCDCD",Ye,Ye,Xe,"#E497C1","#cb3083","#FFFFFF"),at=new U(!0,"#d9d9d9",.25,!1),rt=new V("#c9559d",1.5,"#df99c4"),it=new L(nt,at,new z("#000000",et,tt),rt,new K("#000000","#000000",2)),st=n(475),ot=n(87),lt=n(261),ct=n(246),ut=n.n(ct),ht=n(477),dt=n(470),mt=n(247);var bt=function(e){var t=e.isLoading,n=function(e){var t="";"uk-who"===e.reference?t="UK-WHO":"turner"===e.reference?t="Turner's Syndrome":"trisomy-21"===e.reference&&(t="Trisomy 21 (Down's Syndrome)");var n="",a="";n="male"===e.sex?"Boys":"Girls";switch(e.measurementMethod){case"height":a="Height / Length";break;case"weight":a="Weight";break;case"bmi":a="Body Mass Index";break;case"ofc":a="Head Circumference";break;default:a=""}return{subtitle:a+" - "+n,title:t}}(e);return Object(w.jsxs)("div",{children:[Object(w.jsx)(ht.a,{active:t,children:Object(w.jsx)(dt.a,{children:"Fetching Data"})}),Object(w.jsx)(mt.a,{reference:e.reference,measurementMethod:e.measurementMethod,sex:e.sex,title:n.title,subtitle:n.subtitle,measurementsArray:e.measurementsArray,chartStyle:e.chartStyle,measurementStyle:e.measurementStyle,centileStyle:e.centileStyle,gridlineStyle:e.gridlineStyle,axisStyle:e.axisStyle,enableZoom:!0})]})},ft=function e(t){var n=[];return t.forEach((function(t){Array.isArray(t)?n.push(e(t)):"object"===typeof t&&null!==t?n.push(gt(t)):n.push(t)})),n},gt=function e(t){for(var n={},a=0,r=Object.entries(t);a<r.length;a++){var i=Object(I.a)(r[a],2),s=i[0],o=i[1];Array.isArray(o)?n[s]=ft(o):n[s]="object"===typeof o&&null!==o?e(o):o}return n},jt=function(e){return Array.isArray(e)?ft(e):"object"===typeof e&&null!==e?gt(e):e},vt=(n(473),n(474)),xt=n(471),Ot=function(e){var t,n=e.measurement;return Object(w.jsxs)(r.a.Fragment,{children:[Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.Cell,{children:"Ages"}),Object(w.jsx)(vt.a.Cell,{children:n.measurement_dates.chronological_calendar_age}),Object(w.jsx)(vt.a.Cell,{children:n.measurement_dates.corrected_calendar_age})]}),Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.Cell,{children:"Measurement"}),Object(w.jsxs)(vt.a.Cell,{children:[n.child_observation_value.observation_value," ",(t=n.child_observation_value.measurement_method,"height"===t?"cm":"weight"===t?"kg":"bmi"===t?"kg/m\xb2":"ofc"===t?"cm":void 0)]}),Object(w.jsx)(vt.a.Cell,{})]}),Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.Cell,{children:"SDS"}),Object(w.jsx)(vt.a.Cell,{children:Math.round(1e3*n.measurement_calculated_values.corrected_sds)/1e3}),Object(w.jsx)(vt.a.Cell,{children:Math.round(1e3*n.measurement_calculated_values.chronological_sds)/1e3})]}),Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.Cell,{children:"Centiles"}),Object(w.jsx)(vt.a.Cell,{children:n.measurement_calculated_values.corrected_centile}),Object(w.jsx)(vt.a.Cell,{children:n.measurement_calculated_values.chronological_centile})]})]})},_t=function(e){var t=e.apiResult,n=e.reference;return Object(w.jsx)(j.a,{children:Object(w.jsxs)(vt.a,{basic:"very",celled:!0,collapsing:!0,compact:!0,children:[Object(w.jsx)(vt.a.Header,{children:Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.HeaderCell,{}),Object(w.jsx)(vt.a.HeaderCell,{children:"Corrected Results"}),Object(w.jsx)(vt.a.HeaderCell,{children:"Chronological Results"})]})}),Object(w.jsxs)(vt.a.Body,{children:[t[n].height.length>0&&Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.HeaderCell,{}),Object(w.jsx)(vt.a.HeaderCell,{children:"Heights"}),Object(w.jsx)(vt.a.HeaderCell,{})]}),t[n].height.length>0&&t[n].height.map((function(e,t){return Object(w.jsx)(Ot,{measurement:e},t)})),t[n].weight.length>0&&Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.HeaderCell,{}),Object(w.jsx)(vt.a.HeaderCell,{children:"Weights"}),Object(w.jsx)(vt.a.HeaderCell,{})]}),t[n].weight.length>0&&t[n].weight.map((function(e,t){return Object(w.jsx)(Ot,{measurement:e},t)})),t[n].bmi.length>0&&Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.HeaderCell,{}),Object(w.jsx)(vt.a.HeaderCell,{children:"BMIs"}),Object(w.jsx)(vt.a.HeaderCell,{})]}),t[n].bmi.length>0&&t.bmi.map((function(e,t){return Object(w.jsx)(Ot,{measurement:e},t)})),t[n].ofc.length>0&&Object(w.jsxs)(vt.a.Row,{children:[Object(w.jsx)(vt.a.HeaderCell,{}),Object(w.jsx)(vt.a.HeaderCell,{children:"Head Circumferences"}),Object(w.jsx)(vt.a.HeaderCell,{})]}),t[n].ofc.length>0&&t[n].ofc.map((function(e,t){return Object(w.jsx)(Ot,{measurement:e},t)}))]})]})})},yt=function(e){var t=e.title,n=e.body,a=e.handleClose,r=e.visible,i=e.handleCancel,s=!!i;return Object(w.jsxs)(xt.a,{title:t,open:r,size:"small",closeOnEscape:!0,children:[Object(w.jsx)(xt.a.Header,{children:t}),Object(w.jsx)(xt.a.Content,{children:n}),Object(w.jsxs)(xt.a.Actions,{children:[Object(w.jsx)(C.a,{negative:!0,onClick:a,children:"OK"}),s&&Object(w.jsx)(C.a,{onClick:i,children:"Cancel"})]})]})};n(231);var Ct=[{menuItem:"Height",measurementName:"height"},{menuItem:"Weight",measurementName:"weight"},{menuItem:"BMI",measurementName:"bmi"},{menuItem:"Head Circumference",measurementName:"ofc"}],wt=[{key:"monochrome",value:"monochrome",text:"Monochrome"},{key:"trad",value:"trad",text:"Traditional"},{key:"tanner1",value:"tanner1",text:"Tanner 1"},{key:"tanner2",value:"tanner2",text:"Tanner 2"},{key:"tanner3",value:"tanner3",text:"Tanner 3"}];var pt=function(){var e,t=Ne,n=Object(a.useState)(t.chart),i=Object(I.a)(n,2),s=i[0],o=i[1],c=Object(a.useState)(t.axes),u=Object(I.a)(c,2),h=u[0],d=u[1],m=Object(a.useState)(t.centiles),b=Object(I.a)(m,2),v=b[0],x=b[1],O=Object(a.useState)(t.measurements),_=Object(I.a)(O,2),y=_[0],p=_[1],k=Object(a.useState)({value:"tanner4",text:"Monochrome"}),S=Object(I.a)(k,2),F=S[0],D=S[1],M=Object(a.useState)(!1),T=Object(I.a)(M,2),A=T[0],R=T[1],L=Object(a.useState)({height:!1,weight:!1,bmi:!1,ofc:!1}),W=Object(I.a)(L,2),P=W[0],G=W[1],U=Object(a.useState)("height"),z=Object(I.a)(U,2),V=z[0],K=z[1],q=Object(a.useState)("uk-who"),J=Object(I.a)(q,2),Y=J[0],Z=J[1],$=Object(a.useState)("male"),Q=Object(I.a)($,2),X=Q[0],ee=Q[1],te=Object(a.useState)({turner:{height:[],weight:[],bmi:[],ofc:[]},"trisomy-21":{height:[],weight:[],bmi:[],ofc:[]},"uk-who":{height:[],weight:[],bmi:[],ofc:[]}}),ne=Object(I.a)(te,2),re=ne[0],ie=ne[1],se=Object(a.useState)({turner:{height:[],weight:[],bmi:[],ofc:[]},"trisomy-21":{height:[],weight:[],bmi:[],ofc:[]},"uk-who":{height:[],weight:[],bmi:[],ofc:[]}}),oe=Object(I.a)(se,2),le=oe[0],ce=oe[1],ue=Object(a.useState)({visible:!1,title:"",body:"",handleClose:null,handleCancel:null}),he=Object(I.a)(ue,2),de=he[0],me=he[1],fe=Object(a.useState)(!1),ge=Object(I.a)(fe,2),je=ge[0],ve=ge[1],xe=Object(a.useState)({clearMeasurement:!1,resetCurrent:!1,undoLast:!1,changeSex:!1}),Oe=Object(I.a)(xe,2),_e=Oe[0],ye=Oe[1];switch(V){case"weight":e=1;break;case"bmi":e=2;break;case"ofc":e=3;break;default:e=0}var Ce=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=jt(re[Y][V]);if(t.pop(),ie((function(e){var n=jt(e);return n[Y][V]=t,n})),e){var n=jt(le[Y][V]);n.pop(),ce((function(e){var t=jt(e);return t[Y][V]=n,t}))}}),[re,Y,V,le]);if(_e.resetCurrent){var we=function(e){var t=jt(e);return t[Y][V]=[],t};me({visible:!0,title:"Are you sure you want to reset?",body:"This will remove all measurements from the current chart.",handleCancel:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){ie(we),ce(we),me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),ye((function(e){return Object(l.a)(Object(l.a)({},e),{},{resetCurrent:!1})}))}_e.undoLast&&(me({visible:!0,title:"Are you sure you want to remove the last measurement?",body:"This will remove the last measurement entered on the chart.",handleCancel:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){Ce(!0),me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),ye((function(e){return Object(l.a)(Object(l.a)({},e),{},{undoLast:!1})})));var pe=function(e){if(re[Y][e].length>0){var t=re[Y][e][0].sex;t!==X&&(Fe(t,!0),ye((function(e){return Object(l.a)(Object(l.a)({},e),{},{changeSex:!0})})))}K(e)},Se=function(e,t){var n=t.activeIndex;if("turner"===Y&&0!==n)return me({visible:!0,title:"Measurement unavailable",body:"Only height data is available for Turner's Syndrome.",handleClose:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),null;var a="";switch(n){case 0:a="height";break;case 1:a="weight";break;case 2:a="bmi";break;case 3:a="ofc";break;default:console.warn("Handle tab change did not pick up valid active index")}pe(a)},Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(f.a)(re[Y][V]);if(n.length>0&&!t){var a,r=Object(N.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(e!==i.sex)return me({visible:!0,title:"Unable to change sex",body:"Each chart can only display measurements from one patient at a time. Please reset the chart before entering measurements from a new patient.",handleClose:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),!1}}catch(l){r.e(l)}finally{r.f()}}if("trad"===F.value){var s="male"===e?Je:it;x(s.centiles),o(s.chart),p(s.measurements),d(s.axes)}return ee(e),!0},De=function(e,t){var n,a,r=t.value;"trad"===r&&(n="male"===X?Je:it,a="Traditional"),"tanner1"===r&&(n=ae,a="Tanner 1"),"tanner2"===r&&(n=be,a="Tanner 2"),"tanner3"===r&&(n=ke,a="Tanner 3"),"monochrome"===r&&(n=Ne,a="Monochrome"),x(n.centiles),o(n.chart),p(n.measurements),d(n.axes),D({value:r,text:a})},Me=Ct.map((function(e){return{menuItem:e.menuItem,render:function(){return Object(w.jsx)(st.a.Pane,{attached:"top",disabled:P[e.measurementName],children:Object(w.jsx)(bt,{reference:Y,sex:X,measurementMethod:e.measurementName,measurementsArray:le[Y][e.measurementName],chartStyle:s,axisStyle:h,gridlineStyle:t.gridlines,centileStyle:v,measurementStyle:y,isLoading:je},e.measurementName)})}}})),Te=function(){return Object(w.jsx)(st.a,{menu:{attached:"top"},panes:Me,activeIndex:e,onTabChange:Se})},Ae=function(){return Object(w.jsxs)("span",{children:["Theme"," ",Object(w.jsx)(ot.a,{options:wt,floating:!0,inline:!0,onChange:De,text:F.text})]})};return Object(a.useEffect)((function(){var e=function(){var e=Object(E.a)(H.a.mark((function e(t){var n,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/digital-growth-charts-react-client",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GROWTH_API_BASEURL,"/").concat(Y,"/calculation"),e.next=3,ut()({url:n,data:t,method:"POST",headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=!1;if(je){var n=re[Y][V];e(jt(n[n.length-1])).then((function(e){if(!t)if(e.measurement_calculated_values.corrected_measurement_error||e.measurement_calculated_values.chronological_measurement_error){var n=e.measurement_calculated_values.corrected_measurement_error||e.measurement_calculated_values.chronological_measurement_error;ve(!1),Ce(),me({visible:!0,title:"Unable to plot",body:"Measurement entered cannot be processed by the server. Reason given: ".concat(n),handleClose:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}})}else ve(!1),ce((function(t){var n=jt(t),a=jt(n[Y][V]);return a.push(e),n[Y][V]=a,n})),ye((function(e){return Object(l.a)(Object(l.a)({},e),{},{clearMeasurement:!0})}))})).catch((function(e){ve(!1);var t="There has been a problem fetching the result from the server. Error details: ".concat(e.message," ");Ce(),me({visible:!0,title:"Server error",body:t,handleClose:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}})}))}return function(){t=!0}}),[je,V,Y,le,re,Ce]),Object(w.jsxs)(r.a.Fragment,{children:[Object(w.jsx)(g.a,{children:Object(w.jsx)(lt.a,{padded:!0,children:Object(w.jsxs)(lt.a.Row,{children:[Object(w.jsx)(lt.a.Column,{width:6,children:Object(w.jsx)(B,{measurementResult:function(e){var t=jt(re[Y][V]),n="";if(t.length>0){var a,r=e[0],i=7*r.gestation_weeks+r.gestation_days,s=[],o=Object(N.a)(t);try{for(o.s();!(a=o.n()).done;){var l=a.value;if(JSON.stringify(l)===JSON.stringify(r)){n="duplicate";break}var c=7*l.gestation_weeks+l.gestation_days;if(l.sex!==r.sex&&s.push("differing sexes"),l.birth_date!==r.birth_date&&s.push("differing date of births"),c!==i&&s.push("differing gestations"),s.length>0){n=s[0],2===s.length?n=s.join(" and "):3===s.length&&(n="".concat(s[0],", ").concat(s[1]," and ").concat(s[2]));break}}}catch(u){o.e(u)}finally{o.f()}}return n?(me("duplicate"===n?{visible:!0,title:"Duplicate entries",body:"Please check the last measurement entry as it appears to be identical to a measurement already entered.",handleClose:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}:{visible:!0,title:"Please check entries",body:"Each chart can only display measurements from one patient at a time: ".concat(n," were detected."),handleClose:function(){return me({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),!1):(ie((function(t){var n=jt(t),a=n[Y][V].concat(e);return n[Y][V]=a,n})),ve(!0),!0)},handleChangeReference:function(e){return Z(e),"turner"===e?(K("height"),ee("female"),G({height:!1,weight:!0,bmi:!0,ofc:!0}),{newSex:"female"}):(G({height:!1,weight:!1,bmi:!1,ofc:!1}),le[e][V].length>0&&(null===(t=le[e][V][0])||void 0===t?void 0:t.birth_data.sex)!==X?(ee(le[e][V][0].birth_data.sex),{newSex:le[e][V][0].birth_data.sex}):{newSex:X});var t},handleChangeSex:Fe,measurementMethod:V,setMeasurementMethod:pe,commands:_e,setCommands:ye,className:"measurement-form"})}),Object(w.jsx)(lt.a.Column,{width:10,children:Object(w.jsxs)(j.a,{children:[A?Object(w.jsx)(_t,{apiResult:le,reference:Y}):Object(w.jsx)(Te,{}),Object(w.jsx)(lt.a,{verticalAlign:"middle",children:Object(w.jsxs)(lt.a.Row,{columns:2,children:[Object(w.jsx)(lt.a.Column,{textAlign:"left",children:Object(w.jsx)(Ae,{})}),Object(w.jsx)(lt.a.Column,{textAlign:"right",children:Object(w.jsx)(C.a,{className:"selectUpperMargin",onClick:function(){R(!A)},children:"Results"})})]})})]})})]})})}),Object(w.jsx)(yt,{title:de.title,body:de.body,visible:de.visible,handleClose:de.handleClose,handleCancel:de.handleCancel})]})};var kt=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(pt,{})})};var St=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(kt,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(457);s.a.render(Object(w.jsx)(St,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[458,1,2]]]);
//# sourceMappingURL=main.2c504b5d.chunk.js.map