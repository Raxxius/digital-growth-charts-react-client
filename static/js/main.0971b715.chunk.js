(this["webpackJsonprcpchgrowth-react"]=this["webpackJsonprcpchgrowth-react"]||[]).push([[0],{141:function(e,t,a){},177:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(56),l=a.n(r),s=(a(177),a(61)),o=a(9),c=a(221),u=a(224),h=a(230),d=a(220),b=a(208),g=a(62),m=a(131),j=a(219),f=a(1);var x=function(e){for(var t=[],a=23;a<=42;)t.push({key:a.toString(10),value:a,text:a.toString(10)}),a++;return Object(f.jsxs)("span",{children:[Object(f.jsx)(j.a,{compact:!0,name:"gestation_weeks",value:e.weeks,options:t,onChange:function(t,a){return e.handleGestationChange(a)}}),"\xa0+",Object(f.jsx)(j.a,{compact:!0,name:"gestation_days",value:e.days,options:[{key:"0",value:0,text:"0"},{key:"1",value:1,text:"1"},{key:"2",value:2,text:"2"},{key:"3",value:3,text:"3"},{key:"4",value:4,text:"4"},{key:"5",value:5,text:"5"},{key:"6",value:6,text:"6"}],onChange:function(t,a){return e.handleGestationChange(a)}}),"\xa0 weeks"]})};var p=function(e){return Object(f.jsx)(j.a,{name:"measurement_method",placeholder:"Measurement",value:e.measurementMethod,onChange:function(t,a){return e.handleChangeMeasurementMethod(a.value)},options:e.measurementOptions})};var O=function(e){return Object(f.jsx)(j.a,{name:"reference",placeholder:"UK-WHO",value:e.reference,onChange:function(t,a){return e.handleChangeReference(a)},options:e.referenceOptions})};var v=function(e){return Object(f.jsx)(j.a,{name:"sex",placeholder:"Sex",value:e.sex,onChange:function(t,a){return e.handleSexChange(a)},options:e.sexOptions})},y=[{key:"height",value:"height",text:"Height (cm)",disabled:!1},{key:"weight",value:"weight",text:"Weight (kg)",disabled:!1},{key:"bmi",value:"bmi",text:"BMI (kg/m\xb2)",disabled:!1},{key:"ofc",value:"ofc",text:"Head Circumference (cm)",disabled:!1}],_=[{key:"male",value:"male",text:"Boy",disabled:!1},{key:"female",value:"female",text:"Girl",disabled:!1}],S=[{key:"uk-who",value:"uk-who",text:"UK-WHO"},{key:"trisomy-21",value:"trisomy-21",text:"Down's Syndrome"},{key:"turner",value:"turner",text:"Turner's syndrome"}],k=a(227);function C(e){var t=e.errorText,a=e.showError;if(!t)return null;var n=!!t;return!1===a&&(n=!1),Object(f.jsx)(f.Fragment,{children:n&&Object(f.jsx)(k.a,{color:"red",children:t})})}var w=[{key:"gp",value:"greulich-pyle",text:"Greulich & Pyle"},{key:"twii",value:"tanner-whitehouse-ii",text:"Tanner Whitehouse II"},{key:"twiii",value:"tanner-whitehouse-iii",text:"Tanner Whitehouse III"},{key:"fels",value:"fels",text:"Fels"},{key:"bxpt",value:"bonexpert",text:"BoneXpert"}];var F=function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(u.a.Group,{children:Object(f.jsx)(u.a.Field,{style:{textAlign:"left"},width:"16",children:Object(f.jsx)(d.a,{type:"decimal",name:"boneAge",placeholder:"e.g. 3.5",labelPosition:"right",label:{content:"years",basic:!0,color:"black"},value:e.boneAge,onChange:e.handleBoneAgeChange})})}),Object(f.jsxs)(u.a.Group,{children:[Object(f.jsx)(u.a.Field,{style:{textAlign:"left"},width:"8",children:Object(f.jsx)(d.a,{type:"decimal",name:"boneAgeSDS",placeholder:"e.g. -3.5",labelPosition:"right",label:{content:"SDS",basic:!0,color:"black"},value:e.boneAgeSDS,onChange:e.handleBoneAgeSDSChange})}),Object(f.jsx)(u.a.Field,{style:{textAlign:"left"},width:"8",children:Object(f.jsx)(d.a,{type:"decimal",name:"boneAgeCentile",placeholder:"e.g. 50",labelPosition:"right",label:{content:"centile",basic:!0,color:"black"},value:e.boneAgeCentile,onChange:e.handleBoneAgeCentileChange})})]}),Object(f.jsx)(u.a.Group,{children:Object(f.jsxs)(u.a.Field,{style:{textAlign:"left"},width:"16",children:[Object(f.jsx)("label",{children:"Comment"}),Object(f.jsx)(d.a,{type:"text",name:"boneAgeText",placeholder:"e.g. This bone age is advanced",value:e.boneAgeText,onChange:e.handleBoneAgeTextChange})]})}),Object(f.jsx)(u.a.Group,{children:Object(f.jsxs)(u.a.Field,{style:{textAlign:"left"},width:"16",children:[Object(f.jsx)("label",{children:"Bone Age Reference"}),Object(f.jsx)(j.a,{name:"boneagetype",placeholder:"e.g. G&P",value:e.boneAgeType,onChange:function(t,a){return e.handleChangeBoneAgeType(a)},options:w})]})})]})},A=a(160),D=a(114),M=function(e){var t,a,n,i;try{return e.getTime(),a=""+((t=new Date(e)).getMonth()+1),n=""+t.getDate(),i=t.getFullYear(),a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[i,a,n].join("-")}catch(r){throw new Error("Input date for formatDate not recognised")}},H=function(e){try{var t=e.split("-").map((function(e,t){if(""!==e){var a=Number(e);if(Number.isNaN(a))throw new Error;return 1===t?a-1:a}throw new Error}));if(3!==t.length||t[1]<0||t[1]>11||t[2]<1||t[2]>31)throw new Error;if(function(e){var t=Object(o.a)(e,3),a=t[0],n=t[1],i=t[2];if(1===n&&29===i)return a%4===0;var r=[31,28,31,30,31,30,31,31,30,31,30,31][n];return void 0!==r&&i<=r}(t))return Object(A.a)(Date,Object(D.a)(t));throw new Error}catch(a){return null}},T=function(e){return Object(f.jsxs)(c.a,{children:[Object(f.jsx)(h.a,{as:"h5",textAlign:"left",style:{paddingTop:20},children:"Midparental Height"}),Object(f.jsxs)(u.a,{onSubmit:e.utilitiesFormDataSubmit,children:[Object(f.jsxs)(u.a.Group,{children:[Object(f.jsxs)(u.a.Field,{width:8,required:!0,children:[Object(f.jsx)("label",{style:{textAlign:"left"},children:"Maternal height"}),Object(f.jsx)(d.a,{name:"height_maternal",onChange:e.changeMaternalHeight,placeholder:"e.g. 167",value:e.maternalHeight?e.maternalHeight:"",label:{content:"cm",basic:!0,color:"black"},labelPosition:"right"})]}),Object(f.jsxs)(u.a.Field,{width:8,required:!0,children:[Object(f.jsx)("label",{style:{textAlign:"left"},children:"Paternal height"}),Object(f.jsx)(d.a,{name:"height_maternal",placeholder:"e.g. 179",onChange:e.changePaternalHeight,value:e.paternalHeight?e.paternalHeight:"",label:{content:"cm",basic:!0,color:"black"},labelPosition:"right"})]})]}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(b.a,{disabled:!e.maternalHeight||!e.paternalHeight,color:"black",fluid:!0,type:"submit",children:"Calculate Mid-parental Height"})}),e.midParentalHeightDataPresent&&Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(b.a,{type:"submit",onClick:e.removeMidParentalHeight,children:"Remove Mid-parental Height"})})]})]})},P=function(e){var t=Object(n.useState)(M(new Date)),a=Object(o.a)(t,2),i=a[0],r=a[1],l=Object(n.useState)(M(new Date)),j=Object(o.a)(l,2),k=j[0],w=j[1],A=Object(n.useState)({observation_value:""}),D=Object(o.a)(A,2),P=D[0],I=D[1],B=Object(n.useState)(40),N=Object(o.a)(B,2),G=N[0],R=N[1],L=Object(n.useState)(0),E=Object(o.a)(L,2),W=E[0],U=E[1],q=Object(n.useState)(""),z=Object(o.a)(q,2),K=z[0],J=z[1],Y=Object(n.useState)(""),V=Object(o.a)(Y,2),X=V[0],Z=V[1],$=Object(n.useState)("empty"),Q=Object(o.a)($,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!1),ne=Object(o.a)(ae,2),ie=ne[0],re=ne[1],le=Object(n.useState)(""),se=Object(o.a)(le,2),oe=se[0],ce=se[1],ue=Object(n.useState)("greulich-pyle"),he=Object(o.a)(ue,2),de=he[0],be=he[1],ge=Object(n.useState)(""),me=Object(o.a)(ge,2),je=me[0],fe=me[1],xe=Object(n.useState)(""),pe=Object(o.a)(xe,2),Oe=pe[0],ve=pe[1],ye=Object(n.useState)(""),_e=Object(o.a)(ye,2),Se=_e[0],ke=_e[1],Ce=Object(n.useState)([""]),we=Object(o.a)(Ce,2),Fe=we[0],Ae=we[1],De=Object(n.useState)(!1),Me=Object(o.a)(De,2),He=Me[0],Te=Me[1],Pe=Object(n.useState)(!1),Ie=Object(o.a)(Pe,2),Be=Ie[0],Ne=Ie[1],Ge=function(e){"birth_date"===e.target.name?r(e.target.value):w(e.target.value);var t=H(e.target.value);if(t){var a="birth_date"===e.target.name?H(k):t,n="birth_date"===e.target.name?t:H(i),l=a.getTime()-n.getTime();l<0?"birth_date"===e.target.name?J("Date of birth cannot come after the date of measurement"):"observation_date"===e.target.name&&Z("Date of measurement cannot come before the date of birth."):l>63113904e4?"birth_date"===e.target.name?J("No centile data exists over 20 years of age."):Z("No centile data exists over 20 years of age."):(J(""),Z(""))}else"birth_date"===e.target.name?J("Please enter a valid date."):Z("Please enter a valid date.")},Re=function(e,t){return""===t?"empty":Number.isNaN(Number(t))?"Please enter a valid number.":"height"===e?t<20?"The "+e+" you entered is too low.":t>272?"The "+e+" you entered is too tall.":"":"weight"===e?t<.01?"The "+e+" you entered is too low.":t>635?"The "+e+" you entered is too heavy.":"":"bmi"===e?t<5?"The "+e+" you entered is too low.":t>204?"The "+e+" you entered is too high.":"":"ofc"===e?t<25?"The "+e+" you entered is too low.":t>70?"The "+e+" you entered is too high.":"":void 0};Object(n.useEffect)((function(){var t=function(){return""===K&&""===X&&""===ee};if(t()&&re(t()),e.globalState.clearMeasurement){var a=Object(s.a)({},P);a.observation_value="",I(a),te("empty"),re(!1),Te(!1),Ne(!1),Ae([""]),ve(""),fe(""),be("greulich-pyle"),ke(""),e.updateGlobalState("clearMeasurement",!1)}}),[ie,He,Be,Fe,Oe,je,de,Se,e,P,K,X,ee]);var Le=function(t){var a=e.globalState.disabled[t.key];return Object(s.a)(Object(s.a)({},t),{},{disabled:a})},Ee=y.map(Le),We=_.map(Le);return Object(f.jsxs)(c.a,{children:[Object(f.jsxs)(u.a,{onSubmit:function(){var t={},a={events:[]};Fe.length>0&&Fe[0].length>0&&(a={events_text:Fe}),He&&(isNaN(parseFloat(oe))||(t={bone_age:parseFloat(oe),bone_age_type:de,bone_age_centile:isNaN(parseFloat(Oe))?null:parseFloat(Oe),bone_age_sds:isNaN(parseFloat(je))?null:parseFloat(je),bone_age_text:Se}));var n={birth_date:i,observation_date:k,measurement_method:e.globalState.measurementMethod,observation_value:P.observation_value,gestation_weeks:G,gestation_days:W,sex:e.globalState.sex},r=Object.assign(n,t,a);e.handleMeasurementResult(r)},children:[Object(f.jsxs)(u.a.Field,{required:!0,children:[Object(f.jsx)(h.a,{as:"h5",textAlign:"left",children:"Reference"}),Object(f.jsx)(O,{reference:e.globalState.reference,handleChangeReference:function(t){var a=t.value;"uk-who"!==a&&e.updateGlobalState("mid-parental-height","reset"),e.updateGlobalState("reference",a)},referenceOptions:S})]}),Object(f.jsxs)(u.a.Field,{required:!0,children:[Object(f.jsx)(h.a,{as:"h5",textAlign:"left",children:"Dates"}),Object(f.jsx)(d.a,{label:"Birth Date",type:"date",name:"birth_date",value:i,placeholder:"Date of Birth",onChange:Ge})]}),Object(f.jsx)(u.a.Field,{required:!0,children:Object(f.jsx)(d.a,{label:"Measurement Date",type:"date",name:"observation_date",value:k,placeholder:"Date of Measurement",onChange:Ge})}),Object(f.jsx)(C,{errorText:X}),Object(f.jsx)(C,{errorText:K}),Object(f.jsxs)(u.a.Group,{style:{textAlign:"left"},children:[Object(f.jsxs)(u.a.Field,{style:{marginRight:20},required:!0,children:[Object(f.jsx)("label",{children:"Sex"}),Object(f.jsx)(v,{sex:e.globalState.sex,handleSexChange:function(t){e.updateGlobalState("sex",t.value)},sexOptions:We})]}),Object(f.jsxs)(u.a.Field,{children:[Object(f.jsx)("label",{children:"Gestation"}),Object(f.jsx)(x,{name:"gestation_select",weeks:G,days:W,handleGestationChange:function(e){var t=e.name,a=e.value;"gestation_weeks"===t?(R(a),42===a&&U(0)):"gestation_days"===t&&U(42===G?0:a)}})]})]}),Object(f.jsxs)(u.a.Group,{children:[Object(f.jsxs)(u.a.Field,{required:!0,children:[Object(f.jsx)("label",{style:{textAlign:"left"},children:"Measurements"}),Object(f.jsx)(p,{measurementMethod:e.globalState.measurementMethod,handleChangeMeasurementMethod:function(t){e.updateGlobalState("measurementMethod",t)},measurementOptions:Ee})]}),Object(f.jsxs)(u.a.Field,{width:8,required:!0,children:[Object(f.jsx)("label",{style:{textAlign:"left"},children:"Value"}),Object(f.jsx)(d.a,{type:"decimal",name:"observation_value",placeholder:"Measurement",value:P.observation_value,label:{content:e.globalState.units.toString(),basic:!0,color:"black"},labelPosition:"right",onChange:function(t,a){var n=a.value;I({observation_value:n}),te(Re(e.globalState.measurementMethod,n))}})]})]}),Object(f.jsx)(C,{showError:"empty"!==ee,errorText:ee}),Object(f.jsxs)(u.a.Group,{children:["height"===e.globalState.measurementMethod&&Object(f.jsx)(u.a.Field,{width:10,children:Object(f.jsxs)(b.a,{icon:!0,fluid:!0,labelPosition:"left",onClick:function(e){e.preventDefault(),Te(!He),ce(""),ve(""),fe(""),be("greulich-pyle"),ke("")},color:"black",children:[Object(f.jsx)(g.a,{name:"hand paper outline"}),"Add Bone Age"]})}),Object(f.jsx)(u.a.Field,{width:10,children:Object(f.jsxs)(b.a,{icon:!0,labelPosition:"left",onClick:function(e){e.preventDefault(),Ne(!Be),Ae([""])},fluid:!0,color:"black",children:[Object(f.jsx)(g.a,{name:"bookmark outline"}),"Add Event"]})})]}),He&&Object(f.jsx)(m.a,{children:Object(f.jsx)(F,{boneAge:oe,handleBoneAgeChange:function(e,t){var a=t.value;ce(a)},boneAgeType:de,handleChangeBoneAgeType:function(e){var t=e.value;be(t)},boneAgeCentile:Oe,handleBoneAgeCentileChange:function(e,t){var a=t.value;ve(a)},boneAgeSDS:je,handleBoneAgeSDSChange:function(e,t){var a=t.value;fe(a)},boneAgeText:Se,handleBoneAgeTextChange:function(e,t){var a=t.value;ke(a)}})}),Be&&Object(f.jsx)(m.a,{children:Fe.map((function(e,t){return Object(f.jsxs)(u.a.Group,{children:[Object(f.jsx)(u.a.Field,{style:{textAlign:"left"},width:"14",children:Object(f.jsx)(d.a,{name:"event",placeholder:"e.g. diagnosis",onChange:function(e){var a=Fe;a[t]=e.target.value,Ae(a)}})}),Object(f.jsx)(b.a,{icon:!0,circular:!0,onClick:function(e){if(e.preventDefault(),""!==Fe[t]){var a=Fe;a.push(""),Ae(a)}},children:Object(f.jsx)(g.a,{name:"plus circle"})}),t===Fe.length-1&&Object(f.jsx)(b.a,{icon:!0,circular:!0,onClick:function(e){if(e.preventDefault(),0!==t){var a=Fe.splice(t,1);Ae(a)}else Ae([""])},children:Object(f.jsx)(g.a,{name:"minus circle"})})]},t)}))}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(b.a,{content:"Calculate Centiles and Add To Chart",type:"submit",fluid:!0,disabled:!ie,color:"black",icon:"line graph",labelPosition:"right"})})]}),e.globalState.isDataPresent&&Object(f.jsxs)(m.a,{children:[Object(f.jsx)(b.a,{content:"Reset Chart",icon:"power off",onClick:function(){e.updateGlobalState("resetCurrent",!0)}}),Object(f.jsx)(b.a,{content:"Remove Last",icon:"undo",onClick:function(){e.updateGlobalState("undoLast",!0)}})]}),"uk-who"===e.globalState.reference&&Object(f.jsx)(T,{utilitiesFormDataSubmit:function(t){if(!(t.target[0].value<100&&t.target[1].value<100)){var a={height_maternal:t.target[0].value,height_paternal:t.target[1].value,sex:e.globalState.sex};e.updateGlobalState("isMidParentalHeightRequest",!0),e.updateGlobalState("parentalHeights",{maternalHeight:t.target[0].value,paternalHeight:t.target[1].value}),e.handleUtilitiesFormDataSubmit(a)}},changeMaternalHeight:function(t,a){var n=e.globalState.parentalHeights.height_paternal,i={height_maternal:a.value,height_paternal:n};e.updateGlobalState("parentalHeights",i)},changePaternalHeight:function(t,a){var n={height_maternal:e.globalState.parentalHeights.height_maternal,height_paternal:a.value};e.updateGlobalState("parentalHeights",n)},maternalHeight:e.globalState.parentalHeights.height_maternal,paternalHeight:e.globalState.parentalHeights.height_paternal,removeMidParentalHeight:function(){e.updateGlobalState("mid-parental-height","reset")},midParentalHeightDataPresent:!!e.globalState["mid-parental-height"].mid_parental_height})]})},I=a(74),B=a(37),N=a(38),G=function(){function e(t,a,n,i,r,l){Object(B.a)(this,e),this.chart=t,this.gridlines=a,this.axes=n,this.centiles=i,this.sds=r,this.measurements=l}return Object(N.a)(e,[{key:"chart",get:function(){return this._chart},set:function(e){this._chart=e}},{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"axes",get:function(){return this._axes},set:function(e){this._axes=e}},{key:"centiles",get:function(){return this._centiles},set:function(e){this._centiles=e}},{key:"sds",get:function(){return this._sds},set:function(e){this._sds=e}},{key:"measurements",get:function(){return this._measurements},set:function(e){this._measurements=e}}]),e}(),R=function(){function e(t,a,n,i,r,l,s,o,c,u,h,d,b,g,m,j,f){Object(B.a)(this,e),this.backgroundColour=t,this.width=a,this.height=n,this.padding=i,this.titleStyle=r,this.subTitleStyle=l,this.tooltipBackgroundColour=s,this.tooltipStroke=o,this.tooltipTextStyle=c,this.termFill=u,this.termStroke=h,this.infoBoxFill=d,this.infoBoxStroke=b,this.infoBoxTextStyle=g,this.toggleButtonInactiveColour=m,this.toggleButtonActiveColour=j,this.toggleButtonTextColour=f}return Object(N.a)(e,[{key:"backgroundColour",get:function(){return this._backgroundColour},set:function(e){this._backgroundColour=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e}},{key:"titleStyle",get:function(){return this._titleStyle},set:function(e){this._titleStyle=e}},{key:"subTitleStyle",get:function(){return this._subTitleStyle},set:function(e){this._subTitleStyle=e}},{key:"tooltipBackgroundColour",get:function(){return this._tooltipBackgroundColour},set:function(e){this._tooltipBackgroundColour=e}},{key:"tooltipStroke",get:function(){return this._tooltipStroke},set:function(e){this._tooltipStroke=e}},{key:"tooltipTextStyle",get:function(){return this._tooltipTextStyle},set:function(e){this._tooltipTextStyle=e}},{key:"termFill",get:function(){return this._termFill},set:function(e){this._termFill=e}},{key:"termStroke",get:function(){return this._termStroke},set:function(e){this._termStroke=e}},{key:"infoBoxFill",get:function(){return this._infoBoxFill},set:function(e){this._infoBoxFill=e}},{key:"infoBoxStroke",get:function(){return this._infoBoxStroke},set:function(e){this._infoBoxStroke=e}},{key:"infoBoxTextStyle",get:function(){return this._infoBoxTextStyle},set:function(e){this._infoBoxTextStyle=e}},{key:"toggleButtonActiveColour",get:function(){return this._toggleButtonActiveColour},set:function(e){this._toggleButtonActiveColour=e}},{key:"toggleButtonInactiveColour",get:function(){return this._toggleButtonInactiveColour},set:function(e){this._toggleButtonInactiveColour=e}},{key:"toggleButtonTextColour",get:function(){return this._toggleButtonTextColour},set:function(e){this._toggleButtonTextColour=e}}]),e}(),L=function(){function e(t,a,n,i){Object(B.a)(this,e),this.left=t,this.right=a,this.top=n,this.bottom=i}return Object(N.a)(e,[{key:"left",get:function(){return this._left},set:function(e){this._left=e}},{key:"right",get:function(){return this._right},set:function(e){this._right=e}},{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"bottom",get:function(){return this._bottom},set:function(e){this._bottom=e}}]),e}(),E=function(){function e(t,a,n,i){Object(B.a)(this,e),this.name=t,this.colour=a,this.size=n,this.weight=i}return Object(N.a)(e,[{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"colour",get:function(){return this._colour},set:function(e){this._colour=e}},{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"style",get:function(){return this._style}},{key:"weight",set:function(e){this._weight=e}}]),e}(),W=function(){function e(t,a,n,i){Object(B.a)(this,e),this.gridlines=t,this.stroke=a,this.strokeWidth=n,this.dashed=i}return Object(N.a)(e,[{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"stroke",get:function(){return this._stroke},set:function(e){this._stroke=e}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(e){this._strokeWidth=e}},{key:"dashed",get:function(){return this._dashed},set:function(e){this._dashed=e}}]),e}(),U=function(){function e(t,a,n){Object(B.a)(this,e),this.axisStroke=t,this.axisLabelTextStyle=a,this.tickLabelTextStyle=n}return Object(N.a)(e,[{key:"axisStroke",get:function(){return this._axisStroke},set:function(e){this._axisStroke=e}},{key:"axisLabelTextStyle",get:function(){return this._axisLabelTextStyle},set:function(e){this._axisLabelTextStyle=e}},{key:"tickLabelTextStyle",get:function(){return this._tickLabelTexSize},set:function(e){this._tickLabelTexSize=e}}]),e}(),q=function(){function e(t,a,n,i,r,l){Object(B.a)(this,e),this.centileStroke=t,this.centileStrokeWidth=a,this.delayedPubertyAreaFill=n,this.midParentalCentileStroke=i,this.midParentalCentileStrokeWidth=r,this.midParentalAreaFill=l}return Object(N.a)(e,[{key:"centileStroke",get:function(){return this._centileStroke},set:function(e){this._centileStroke=e}},{key:"centileStrokeWidth",get:function(){return this._centileStrokeWidth},set:function(e){this._centileStrokeWidth=e}},{key:"delayedPubertyAreaFill",get:function(){return this._delayedPubertyAreaFill},set:function(e){this._delayedPubertyAreaFill=e}},{key:"midParentalAreaFill",get:function(){return this._midParentalAreaFill},set:function(e){this._midParentalAreaFill=e}},{key:"midParentalCentileStroke",get:function(){return this._midParentalStroke},set:function(e){this._midParentalStroke=e}},{key:"midParentalCentileStrokeWidth",get:function(){return this._midParentalStrokeWidth},set:function(e){this._midParentalCentileStrokeWidth=e}}]),e}(),z=function(){function e(t,a,n,i,r){Object(B.a)(this,e),this.lineStrokeWidth=t,this.heightStroke=a,this.weightStroke=n,this.ofcStroke=i,this.bmiStroke=r}return Object(N.a)(e,[{key:"lineStrokeWidth",get:function(){return this._lineStrokeWidth},set:function(e){this._lineStrokeWidth=e}},{key:"heightStroke",get:function(){return this._heightStroke},set:function(e){this._heightStroke=e}},{key:"weightStroke",get:function(){return this._weightStroke},set:function(e){this._weightStroke=e}},{key:"ofcStroke",get:function(){return this._ofcStroke},set:function(e){this._ofcStroke=e}},{key:"bmiStroke",get:function(){return this._bmiStroke},set:function(e){this._bmiStroke=e}}]),e}(),K=function(){function e(t,a){Object(B.a)(this,e),this.measurementFill=t,this.highlightedMeasurementFill=a}return Object(N.a)(e,[{key:"measurementFill",get:function(){return this._measurementFill},set:function(e){this._measurementFill=e}},{key:"highlightedMeasurementFill",get:function(){return this._hightlightedMeasurementFill},set:function(e){this._hightlightedMeasurementFill=e}}]),e}(),J="#fdc300",Y=new E("Arial","#000000",14,"bold"),V=new E("Arial","#000000",14,"normal"),X=new E("Montserrat","#000000",.25,"normal"),Z=new E("Montserrat","#000000",6,"normal"),$=new E("Arial","000000",10,"normal"),Q=new E("Arial","000000",8,"normal"),ee=new R("#FFFFFF",700,475,new L(50,50,25,40),Y,V,J,J,X,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",Z,"#c6bddd","#7159aa","#FFFFFF"),te=new W(!0,"#d9d9d9",.25,!1),ae=new q("#7159aa",1.5,"#c6bddd","#7159aa",3,"#c6bddd"),ne=new z(1.5,"#7159aa","#ff8000","#e60700","#c2a712"),ie=new G(ee,te,new U("#000000",$,Q),ae,ne,new K("#000000","#7159aa")),re="#3366cc",le=new E("Arial","#000000",14,"bold"),se=new E("Arial","#000000",14,"normal"),oe=new E("Montserrat","#FFFFFF",.25,"normal"),ce=new E("Montserrat","#000000",6,"normal"),ue=new E("Arial","000000",10,"normal"),he=new E("Arial","000000",8,"normal"),de=new R("#FFFFFF",700,475,new L(50,50,25,40),le,se,re,re,oe,"#CDCDCD","#CDCDCD",re,re,ce,"#ffc080","#ff8000","#FFFFFF"),be=new W(!0,"#d9d9d9",.25,!1),ge=new q("#ff8000",1.5,"#ffc080","#ff8000",.25,"#ffc080"),me=new z(1.5,"#7159aa","#ff8000","#e60700","#c2a712"),je=new G(de,be,new U("#000000",ue,he),ge,me,new K("#000000","#ff8000")),fe="#fdc300",xe="#000000",pe=new E("Arial","#000000",14,"bold"),Oe=new E("Arial","#000000",14,"normal"),ve=new E("Montserrat","#000000",.25,"normal"),ye=new E("Montserrat","#000000",6,"normal"),_e=new E("Arial",xe,10,"normal"),Se=new E("Arial",xe,8,"normal"),ke=new R("#FFFFFF",700,475,new L(50,50,25,40),pe,Oe,fe,fe,ve,"#CDCDCD","#CDCDCD",fe,fe,ye,"#f59c99","#e60700","#FFFFFF"),Ce=new W(!0,"#d9d9d9",.25,!1),we=new q("#e60700",1.5,"#f59c99","#e60700",.25,"#f59c99"),Fe=new z(1.5,"#7159aa","#ff8000","#e60700","#c2a712"),Ae=new G(ke,Ce,new U("#000000",_e,Se),we,Fe,new K("#000000","#e60700")),De="#b3b3b3",Me=new E("Arial","#000000",14,"bold"),He=new E("Arial","#000000",14,"normal"),Te=new E("Montserrat","#000000",.25,"normal"),Pe=new E("Montserrat","#000000",6,"normal"),Ie=new E("Arial","000000",10,"normal"),Be=new E("Arial","000000",8,"normal"),Ne=new R("#FFFFFF",700,475,new L(50,50,25,40),Me,He,De,De,Te,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",Pe,"#b3b3b3","#000000","#FFFFFF"),Ge=new W(!0,"#d9d9d9",.25,!1),Re=new q("#000000",1.5,"#b3b3b3","#000000",1.5,"#b3b3b3"),Le=new G(Ne,Ge,new U("#000000",Ie,Be),Re,new K("#000000","#000000")),Ee="#66c8eb",We=new E("Arial","#000000",14,"bold"),Ue=new E("Arial","#000000",14,"normal"),qe=new E("Montserrat","#000000",.25,"normal"),ze=new E("Montserrat","#000000",6,"normal"),Ke=new E("Arial","000000",10,"normal"),Je=new E("Arial","000000",8,"normal"),Ye=new R("#FFFFFF",700,475,new L(50,50,25,40),We,Ue,Ee,Ee,qe,"#CDCDCD","#CDCDCD",Ee,Ee,ze,"#66c8eb","#00a3de","#FFFFFF"),Ve=new W(!0,"#d9d9d9",.25,!1),Xe=new q("#00a3de",1.5,"#66c8eb","#00a3de",.25,"#66c8eb"),Ze=new G(Ye,Ve,new U("#000000",Ke,Je),Xe,new K("#000000","#00a3de")),$e="#df99c4",Qe=new E("Arial","#000000",14,"bold"),et=new E("Arial","#000000",14,"normal"),tt=new E("Montserrat","#000000",.25,"normal"),at=new E("Montserrat","#000000",6,"normal"),nt=new E("Arial","000000",10,"normal"),it=new E("Arial","000000",8,"normal"),rt=new R("#FFFFFF",700,475,new L(50,50,25,40),Qe,et,$e,$e,tt,"#CDCDCD","#CDCDCD",$e,$e,at,"#df99c4","#c9559d","#FFFFFF"),lt=new W(!0,"#d9d9d9",.25,!1),st=new q("#c9559d",1.5,"#df99c4","#c9559d",.25,"#df99c4"),ot=new G(rt,lt,new U("#000000",nt,it),st,new K("#000000","#c9559d")),ct=a(223),ut=a(92),ht=a(162),dt=a(232),bt=a(228),gt=a(222),mt=a(155);function jt(e){(function(e){return new Promise((function(t,a){var n=e.outerHTML;n.match(/xmlns="/im)||(n=n.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" '));var i=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),r=window.URL||window.webkitURL||window,l=r.createObjectURL(i),s=n.match(/height="(\d+)/m),o=s&&s[1]?parseInt(s[1],10):200,c=(s=n.match(/width="(\d+)/m))&&s[1]?parseInt(s[1],10):200,u=document.createElement("canvas");u.width=c+5,u.height=o+5;var h=u.getContext("2d"),d=new Image;d.onload=function(){h.drawImage(this,5,5),r.revokeObjectURL(l),t(u)},d.src=l}))})(e).then((function(e){e.toBlob((function(e){var t=new window.ClipboardItem({"image/png":e});navigator.clipboard.write([t])}))}))}var ft=function(e){var t=e.isLoading,a=function(e){var t="";"uk-who"===e.reference?t="UK-WHO":"turner"===e.reference?t="Turner's Syndrome":"trisomy-21"===e.reference&&(t="Trisomy 21 (Down's Syndrome)");var a="",n="";a="male"===e.sex?"Boys":"Girls";switch(e.measurementMethod){case"height":n="Height / Length";break;case"weight":n="Weight";break;case"bmi":n="Body Mass Index";break;case"ofc":n="Head Circumference";break;default:n=""}return{subtitle:n+" - "+a,title:t}}(e);return Object(f.jsxs)("div",{children:[Object(f.jsx)(bt.a,{active:t,children:Object(f.jsx)(gt.a,{children:"Fetching Data"})}),Object(f.jsx)(mt.a,{reference:e.reference,measurementMethod:e.measurementMethod,sex:e.sex,title:a.title,subtitle:a.subtitle,measurementsArray:e.measurementsArray,midParentalHeightData:null===e||void 0===e?void 0:e.midParentalHeightData,chartStyle:e.chartStyle,measurementStyle:e.measurementStyle,centileStyle:e.centileStyle,sdsStyle:null===e||void 0===e?void 0:e.sdsStyle,gridlineStyle:e.gridlineStyle,axisStyle:e.axisStyle,enableZoom:!0,chartType:e.chartType,enableExport:!0,exportChartCallback:jt,clinicianFocus:e.clinicianFocus})]})},xt=function e(t){var a=[];return t.forEach((function(t){Array.isArray(t)?a.push(e(t)):"object"===typeof t&&null!==t?a.push(pt(t)):a.push(t)})),a},pt=function e(t){var a={};for(var n in t){var i=t[n];Array.isArray(i)?a[n]=xt(i):a[n]="object"===typeof i&&null!==i?e(i):i}return a},Ot=function(e){return Array.isArray(e)?xt(e):"object"===typeof e&&null!==e?pt(e):e},vt=a(225),yt=function(e){return"height"===e?"cm":"weight"===e?"kg":"bmi"===e?"kg/m\xb2":"ofc"===e?"cm":void 0},_t=function(e){var t,a=e.measurement;return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.Cell,{children:"Ages"}),Object(f.jsx)(vt.a.Cell,{children:a.measurement_dates.chronological_calendar_age}),Object(f.jsx)(vt.a.Cell,{children:null!==(t=a.measurement_dates.corrected_calendar_age)&&void 0!==t?t:a.plottable_data.centile_data.corrected_decimal_age_data.corrected_gestational_age})]}),Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.Cell,{children:"Measurement"}),Object(f.jsxs)(vt.a.Cell,{children:[a.child_observation_value.observation_value," ",yt(a.child_observation_value.measurement_method)]}),Object(f.jsx)(vt.a.Cell,{})]}),Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.Cell,{children:"SDS"}),Object(f.jsx)(vt.a.Cell,{children:Math.round(1e3*a.measurement_calculated_values.corrected_sds)/1e3}),Object(f.jsx)(vt.a.Cell,{children:Math.round(1e3*a.measurement_calculated_values.chronological_sds)/1e3})]}),Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.Cell,{children:"Centiles"}),Object(f.jsx)(vt.a.Cell,{children:a.measurement_calculated_values.corrected_centile}),Object(f.jsx)(vt.a.Cell,{children:a.measurement_calculated_values.chronological_centile})]})]})},St=function(e){var t=e.apiResult,a=e.reference;return Object(f.jsx)(m.a,{children:Object(f.jsxs)(vt.a,{basic:"very",celled:!0,collapsing:!0,compact:!0,children:[Object(f.jsx)(vt.a.Header,{children:Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.HeaderCell,{}),Object(f.jsx)(vt.a.HeaderCell,{children:"Corrected Results"}),Object(f.jsx)(vt.a.HeaderCell,{children:"Chronological Results"})]})}),Object(f.jsxs)(vt.a.Body,{children:[t[a].height.length>0&&Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.HeaderCell,{}),Object(f.jsx)(vt.a.HeaderCell,{children:"Heights"}),Object(f.jsx)(vt.a.HeaderCell,{})]}),t[a].height.length>0&&t[a].height.map((function(e,t){return Object(f.jsx)(_t,{measurement:e},t)})),t[a].weight.length>0&&Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.HeaderCell,{}),Object(f.jsx)(vt.a.HeaderCell,{children:"Weights"}),Object(f.jsx)(vt.a.HeaderCell,{})]}),t[a].weight.length>0&&t[a].weight.map((function(e,t){return Object(f.jsx)(_t,{measurement:e},t)})),t[a].bmi.length>0&&Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.HeaderCell,{}),Object(f.jsx)(vt.a.HeaderCell,{children:"BMIs"}),Object(f.jsx)(vt.a.HeaderCell,{})]}),t[a].bmi.length>0&&t[a].bmi.map((function(e,t){return Object(f.jsx)(_t,{measurement:e},t)})),t[a].ofc.length>0&&Object(f.jsxs)(vt.a.Row,{children:[Object(f.jsx)(vt.a.HeaderCell,{}),Object(f.jsx)(vt.a.HeaderCell,{children:"Head Circumferences"}),Object(f.jsx)(vt.a.HeaderCell,{})]}),t[a].ofc.length>0&&t[a].ofc.map((function(e,t){return Object(f.jsx)(_t,{measurement:e},t)}))]})]})})},kt=a(226),Ct=function(e){var t=e.title,a=e.body,n=e.handleClose,i=e.visible,r=e.handleCancel,l=!!r;return Object(f.jsxs)(kt.a,{title:t,open:i,size:"small",closeOnEscape:!0,children:[Object(f.jsx)(kt.a.Header,{children:t}),Object(f.jsx)(kt.a.Content,{children:a}),Object(f.jsxs)(kt.a.Actions,{children:[Object(f.jsx)(b.a,{negative:!0,onClick:n,children:"OK"}),l&&Object(f.jsx)(b.a,{onClick:r,children:"Cancel"})]})]})};a(141);var wt=function(e){return Object(f.jsx)(j.a,{name:"interval",placeholder:"days",value:e.intervalType,onChange:e.handleChangeIntervalType,options:e.intervalTypeOptions})},Ft=function(e){return Object(f.jsxs)("div",{style:{textAlign:"left"},children:[Object(f.jsxs)("label",{style:{padding:"10px"},children:[e.min," "]}),Object(f.jsx)("input",{type:"range",min:e.min,max:e.max,value:e.value,step:e.step,className:"slider",onChange:function(t){return e.onChange(t.target.value)}}),Object(f.jsx)("label",{style:{padding:"10px"},children:e.max}),Object(f.jsxs)("h5",{style:{display:"inline"},children:[e.label,": ",e.value," ",e.isPercentage?"%":"SDS"]})]})},At=[{key:"d",value:"days",text:"Days",disabled:!1},{key:"w",value:"weeks",text:"Weeks",disabled:!1},{key:"m",value:"months",text:"Months",disabled:!1},{key:"y",value:"years",text:"Years",disabled:!1}],Dt=function(e){var t=Object(n.useState)(40),a=Object(o.a)(t,2),i=a[0],r=a[1],l=Object(n.useState)(0),c=Object(o.a)(l,2),g=c[0],m=c[1],j=Object(n.useState)("1"),k=Object(o.a)(j,2),w=k[0],F=k[1],A=Object(n.useState)("20"),D=Object(o.a)(A,2),M=D[0],H=D[1],P=Object(n.useState)("years"),I=Object(o.a)(P,2),B=I[0],N=I[1],G=Object(n.useState)("1"),R=Object(o.a)(G,2),L=R[0],E=R[1],W=Object(n.useState)(!1),U=Object(o.a)(W,2),q=U[0],z=U[1],K=Object(n.useState)(.01),J=Object(o.a)(K,2),Y=J[0],V=J[1],X=Object(n.useState)(!1),Z=Object(o.a)(X,2),$=Z[0],Q=Z[1],ee=Object(n.useState)(1),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],ie=Object(n.useState)("0"),re=Object(o.a)(ie,2),le=re[0],se=re[1],oe=Object(n.useState)(""),ce=Object(o.a)(oe,2),ue=ce[0],he=ce[1],de=function(t){if("submit"===t.type){var a={measurement_method:e.globalState.measurementMethod,sex:e.globalState.sex,start_chronological_age:w,end_age:M,gestation_weeks:i,gestation_days:g,measurement_interval_type:B,measurement_interval_number:L,start_sds:le,noise:$,drift_range:Y,drift:q,noise_range:ae,reference:e.globalState.reference};e.fictionalFormDataSubmit(a)}else e.updateGlobalState("resetCurrent",!0)},be=function(e,t){var a=t.name,n=t.value;"start_age"===a&&F(n),"end_age"===a&&H(n),"interval_value"===a&&E(n),"startSDS"===a&&se(n)},ge=function(t){var a=e.globalState.disabled[t.key];return Object(s.a)(Object(s.a)({},t),{},{disabled:a})},me=y.map(ge),je=_.map(ge);return Object(n.useEffect)((function(){switch(!0){case Number(w)<0:he("Starting age must be above 0.");break;case Number(M)>20:he("Ending age must be under 20.");break;case Number.isNaN(Number(w)):case Number.isNaN(Number(M)):case Number.isNaN(Number(L)):case Number.isNaN(Number(le)):he("Please check that all entries have valid numbers.");break;case""===w:case""===M:case""===L:case""===le:he("Please check that all entries are filled in.");break;default:he("")}}),[w,M,L,le]),Object(f.jsxs)("div",{children:[Object(f.jsxs)(u.a,{onSubmit:de,children:[Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(O,{handleChangeReference:function(t){e.updateGlobalState("reference",t.value)},reference:e.globalState.reference,referenceOptions:S})}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(p,{handleChangeMeasurementMethod:function(t){e.updateGlobalState("measurementMethod",t)},measurementMethod:e.globalState.measurementMethod,measurementOptions:me})}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(v,{handleSexChange:function(t){e.updateGlobalState("sex",t.value)},sex:e.globalState.sex,sexOptions:je})}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(x,{handleGestationChange:function(e){var t=e.name,a=e.value;"gestation_weeks"===t?(r(a),42===a&&m(0)):"gestation_days"===t&&m(42===i?0:a)},weeks:i,days:g})}),Object(f.jsx)(h.a,{as:"h5",textAlign:"left",children:"Ages"}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(d.a,{type:"decimal",name:"start_age",placeholder:"Starting Decimal Age",value:w,label:{content:"years",basic:!0,color:"black"},labelPosition:"right",onChange:be})}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(d.a,{type:"decimal",name:"end_age",placeholder:"Ending Decimal Age",value:M,label:{content:"years",basic:!0,color:"black"},labelPosition:"right",onChange:be})}),Object(f.jsx)(h.a,{as:"h5",textAlign:"left",children:"Intervals"}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(wt,{handleChangeIntervalType:function(e,t){var a=t.value;N(a)},intervalType:B,intervalTypeOptions:At})}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(d.a,{type:"decimal",name:"interval_value",placeholder:"Interval amount",value:L,onChange:be})}),Object(f.jsx)(h.a,{as:"h5",textAlign:"left",children:"SDS (Standard Deviation Score)"}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(u.a.Input,{label:"Starting SDS",type:"decimal",name:"startSDS",placeholder:"SDS",value:le,labelPosition:"left",onChange:be})}),Object(f.jsx)(C,{errorText:ue}),Object(f.jsx)(u.a.Field,{width:14,style:{textAlign:"left"},children:Object(f.jsx)(dt.a,{toggle:!0,label:"Add SDS drift?",onChange:function(e,t){var a=t.checked;z(a)}})}),q&&Object(f.jsx)(u.a.Field,{width:14,children:Object(f.jsx)(Ft,{isPercentage:!1,min:-3,max:3,value:Y,step:.01,onChange:function(e){V(e)},label:"Drift"})}),Object(f.jsx)(u.a.Field,{width:14,style:{textAlign:"left"},children:Object(f.jsx)(dt.a,{toggle:!0,label:"Simulate Measurement Error?",onChange:function(e,t){var a=t.checked;Q(a)}})}),$&&Object(f.jsx)(u.a.Field,{width:14,children:Object(f.jsx)(Ft,{isPercentage:!0,min:0,max:10,value:ae,step:.1,onChange:function(e){ne(e)},label:"Percentage Error"})}),Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(b.a,{content:"Generate Growth Data",type:"submit",fluid:!0,color:"black",icon:"line graph",labelPosition:"right",disabled:""!==ue})}),e.globalState.isDataPresent&&Object(f.jsx)(u.a.Field,{children:Object(f.jsx)(b.a,{content:"Reset Chart",icon:"power off",onClick:de,style:{width:"100%"},type:"reset"})})]}),"uk-who"===e.globalState.reference&&Object(f.jsx)(T,{utilitiesFormDataSubmit:function(t){if(!(t.target[0].value<100&&t.target[1].value<100)){var a={height_maternal:t.target[0].value,height_paternal:t.target[1].value,sex:e.globalState.sex};e.updateGlobalState("isMidParentalHeightRequest",!0),e.updateGlobalState("parentalHeights",{maternalHeight:t.target[0].value,paternalHeight:t.target[1].value}),console.log(e),e.handleUtilitiesFormDataSubmit(a)}},changeMaternalHeight:function(t,a){var n=e.globalState.parentalHeights.height_paternal,i={height_maternal:a.value,height_paternal:n};e.updateGlobalState("parentalHeights",i)},changePaternalHeight:function(t,a){var n={height_maternal:e.globalState.parentalHeights.height_maternal,height_paternal:a.value};e.updateGlobalState("parentalHeights",n)},maternalHeight:e.globalState.parentalHeights.height_maternal,paternalHeight:e.globalState.parentalHeights.height_paternal,removeMidParentalHeight:function(){e.updateGlobalState("mid-parental-height","reset")},midParentalHeightDataPresent:!!e.globalState["mid-parental-height"].mid_parental_height})]})},Mt=a(158),Ht=a(130),Tt=a.n(Ht),Pt=a(159),It=a.n(Pt),Bt=function(){var e=Object(Mt.a)(Tt.a.mark((function e(t,a,n){var i,r,l;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat("https://rcpch-dgc-server-live.azurewebsites.net","/").concat(a,"/").concat(n),"mid-parental-height"===n&&(i="".concat("https://rcpch-dgc-server-live.azurewebsites.net","/utilities/").concat(n)),r={"Content-Type":"application/json","Subscription-Key":"4e00b26f2c61454296ca454fa0f9ebc0"},e.next=5,It()({url:i,data:t,method:"POST",headers:r});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Nt=function(){var e={turner:{height:[],weight:[],bmi:[],ofc:[]},"trisomy-21":{height:[],weight:[],bmi:[],ofc:[]},"uk-who":{height:[],weight:[],bmi:[],ofc:[],parentalHeights:{height_maternal:null,height_paternal:null,sex:null},midParentalHeights:{mid_parental_height:null,mid_parental_height_sds:null,mid_parental_height_centile:null,mid_parental_height_centile_data:null,mid_parental_height_lower_centile_data:null,mid_parental_height_upper_centile_data:null,mid_parental_height_lower_value:null,mid_parental_height_upper_value:null}}};return{calculation:{input:e,output:e},"fictional-child-data":{input:e,output:e},errors:{errors:!1,message:""},isLoading:!1,isMidparentalCalculation:!1}},Gt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"calculation",i=Object(n.useState)(Nt),r=Object(o.a)(i,2),l=r[0],s=r[1],c=Object(n.useCallback)((function(n){s((function(i){var r=Ot(i);return n.height_maternal&&n.height_paternal?(r[a].input[t].parentalHeights=n,r.isMidparentalCalculation=!0):r[a].input[t][e].push(n),r.isLoading=!0,r}))}),[e,a,t]),u=Object(n.useCallback)((function(n){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Ot(n[a].input[t][e]);r.pop();var l=null;return i&&(l=n[a].output[t][e]).pop(),{newInput:r,newOutput:l}}),[e,a,t]),h=Object(n.useCallback)((function(n){s((function(i){var r=Ot(i),l=u(i,n),s=l.newInput,o=l.newOutput;return r[a].input[t][e]=s,o&&(r[a].output[t][e]=o),r}))}),[s,u,a,t,e]),d=Object(n.useCallback)((function(){s((function(n){var i=Ot(n);return i[a].input[t][e]=[],i[a].output[t][e]=[],i}))}),[e,a,t]),b=Object(n.useCallback)((function(){s((function(e){var t=Ot(e);return t.errors={errors:!1,message:""},t}))}),[]);return Object(n.useEffect)((function(){var n,i,r=!1;l.isLoading&&(l.isMidparentalCalculation?i=l[a].input[t].parentalHeights:(n=l[a].input[t][e],i=Ot(n[n.length-1])),Bt(i,t,l.isMidparentalCalculation?"mid-parental-height":a).then((function(n){r||s((function(r){var l=Ot(r),s="",o=null;if(l.isMidparentalCalculation)return l.errors={errors:!1,message:"success"},l[a].input[t].parentalheights=i,l[a].output[t].midParentalHeights=n,l.isLoading=!1,l.isMidparentalCalculation=!1,l;"fictional-child-data"===a&&(o=n),"calculation"===a&&(o=l[a].output[t][e].concat([n]));var c,h=Object(I.a)(o);try{for(h.s();!(c=h.n()).done;){var d=c.value;if(o.length<2&&(s=d.measurement_calculated_values.corrected_measurement_error||d.measurement_calculated_values.chronological_measurement_error),s){if("fictional-child-data"===a)l[a].input[t][e]=[];else{var b=u(r).newInput;l[a].input[t][e]=b}return l.errors={errors:!0,message:"The server could not process the measurements. Details: ".concat(s)},l.isLoading=!1,l}}}catch(g){h.e(g)}finally{h.f()}return l[a].output[t][e]=o,l.errors={errors:!1,message:"success"},l.isLoading=!1,l}))})).catch((function(n){s((function(i){var r=Ot(i),l=u(i).newInput;r[a].input[t][e]=l;var s="There has been a problem fetching the result from the server. Error details: ".concat(n.message);return r.errors={errors:!0,message:s},r.isLoading=!1,r}))})));return function(){r=!0}}),[l,e,a,t,u]),{fetchResult:c,removeLastActiveItem:h,clearBothActiveArrays:d,clearApiErrors:b,measurements:l[a].input,results:l[a].output,apiErrors:l.errors,isLoading:l.isLoading}},Rt=function(){return{mode:"calculation",modeActiveIndex:0,reference:"uk-who",measurementMethod:"height",units:"cm",measurementMethodActiveIndex:0,sex:"male",parentalHeights:{height_maternal:null,height_paternal:null},"mid-parental-height":{mid_parental_height:null,mid_parental_height_sds:null,mid_parental_height_centile:null,mid_parental_height_centile_data:null,mid_parental_height_lower_centile_data:null,mid_parental_height_upper_centile_data:null,mid_parental_height_lower_value:null,mid_parental_height_upper_value:null},disabled:{height:!1,weight:!1,bmi:!1,ofc:!1,male:!1,female:!1},errors:{errors:!1,message:""},clearMeasurement:!1,resetCurrent:!1,undoLast:!1,isDataPresent:!1}},Lt=["height","weight","bmi","ofc","sds"],Et=function(){var e=Object(n.useState)(Rt),t=Object(o.a)(e,2),a=t[0],i=t[1];return{globalState:a,makeGlobalStateUpdater:Object(n.useCallback)((function(e){return function(t,a){i((function(n){var i=Ot(n);switch(t){case"mode":i.mode=a,i.modeActiveIndex="calculation"===a?0:1;break;case"modeActiveIndex":switch(i.modeActiveIndex=a,a){case 0:default:i.mode="calculation";break;case 1:i.mode="fictional-child-data"}break;case"reference":i.reference=a,"turner"===a?(i.disabled={height:!1,weight:!0,bmi:!0,ofc:!0,male:!0,female:!1},i.measurementMethod="height",i.measurementMethodActiveIndex=0,i.sex="female"):(e[a][i.measurementMethod].length>0&&e[a][i.measurementMethod][0].birth_data.sex!==i.sex&&(i.sex=e[a][i.measurementMethod][0].birth_data.sex),i.disabled={height:!1,weight:!1,bmi:!1,ofc:!1,male:!1,female:!1});break;case"measurementMethod":i.measurementMethod=a,i.units=yt(a);for(var r=0;r<Lt.length;r++)if(Lt[r]===a){i.measurementMethodActiveIndex=r;break}break;case"measurementMethodActiveIndex":var l=Lt[a];"turner"===i.reference&&"height"!==l?i.errors={errors:!0,message:"Unable to change measurement type"}:(i.measurementMethodActiveIndex=a,i.measurementMethod=Lt[a]);break;case"sex":var s=Object(D.a)(e[i.reference][i.measurementMethod]);if(s.length>0){var o,c=Object(I.a)(s);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(a!==u.sex){i.errors={errors:!0,message:"Unable to change sex"};break}}}catch(h){c.e(h)}finally{c.f()}}i.errors.message||(i.sex=a);break;default:i[t]=a}return i}))}}),[])}},Wt=Le;var Ut=[{menuItem:"Height",measurementName:"height",key:"Height"},{menuItem:"Weight",measurementName:"weight",key:"Weight"},{menuItem:"BMI",measurementName:"bmi",key:"BMI"},{menuItem:"Head Circumference",measurementName:"ofc",key:"Head Circumference"}],qt=[{key:"monochrome",value:"monochrome",text:"Monochrome"},{key:"trad",value:"trad",text:"Traditional"},{key:"tanner1",value:"tanner1",text:"Tanner 1"},{key:"tanner2",value:"tanner2",text:"Tanner 2"},{key:"tanner3",value:"tanner3",text:"Tanner 3"}];var zt=function(){var e=Object(n.useState)(Wt.chart),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(Wt.axes),s=Object(o.a)(l,2),u=s[0],h=s[1],d=Object(n.useState)(Wt.centiles),g=Object(o.a)(d,2),j=g[0],x=g[1],p=Object(n.useState)(Wt.sds),O=Object(o.a)(p,2),v=O[0],y=O[1],_=Object(n.useState)(!0),S=Object(o.a)(_,2),C=S[0],w=S[1],F=Object(n.useState)(Wt.measurements),A=Object(o.a)(F,2),D=A[0],M=A[1],H=Object(n.useState)({value:"tanner4",text:"Monochrome"}),T=Object(o.a)(H,2),B=T[0],N=T[1],G=Object(n.useState)(!1),R=Object(o.a)(G,2),L=R[0],E=R[1],W=Object(n.useState)({visible:!1,title:"",body:"",handleClose:null,handleCancel:null}),U=Object(o.a)(W,2),q=U[0],z=U[1],K=Et(),J=K.globalState,Y=K.makeGlobalStateUpdater,V=Object(n.useState)(!0),X=Object(o.a)(V,2),Z=X[0],$=X[1],Q=J.mode,ee=J.modeActiveIndex,te=J.reference,ae=J.measurementMethod,ne=J.measurementMethodActiveIndex,re=J.sex,le=J.disabled,se=J.errors,oe=J.resetCurrent,ce=J.undoLast,ue=Gt(ae,te,Q),he=ue.fetchResult,de=ue.removeLastActiveItem,be=ue.clearBothActiveArrays,ge=ue.clearApiErrors,me=ue.measurements,fe=ue.results,xe=ue.apiErrors,pe=ue.isLoading,Oe=Object(n.useMemo)((function(){return Y(fe)}),[fe,Y]);Object(n.useEffect)((function(){if(xe.errors?z({visible:!0,title:"Unable to plot",body:xe.message,handleClose:function(){ge(),z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}):"success"===xe.message&&(Oe("clearMeasurement",!0),ge()),se.errors){var e="Only height data is available for Turner Syndrome.";"Unable to change sex"===se.message&&(e="Each chart can only display measurements from one patient at a time. Please reset the chart before entering measurements from a new patient."),z({visible:!0,title:se.message,body:e,handleClose:function(){return z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),Oe("errors",{errors:!1,message:""})}}),[se,xe,ge,Oe]),Object(n.useEffect)((function(){if("trad"===B.value){var e="male"===re?Ze:ot;x(e.centiles),r(e.chart),M(e.measurements),h(e.axes)}}),[re,B.value]),Object(n.useEffect)((function(){fe[te][ae].length>0?Oe("isDataPresent",!0):Oe("isDataPresent",!1)}),[fe,te,ae,Oe]),oe&&(z({visible:!0,title:"Are you sure you want to reset?",body:"This will remove all measurements from the current chart.",handleCancel:function(){return z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){be(),z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null}),Oe("mid-parental-height","empty")}}),Oe("resetCurrent",!1)),ce&&(z({visible:!0,title:"Are you sure you want to remove the last measurement?",body:"This will remove the last measurement entered on the chart.",handleCancel:function(){return z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){de(!0),z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),Oe("undoLast",!1));var ve=function(e,t){var a=t.activeIndex;Oe("measurementMethodActiveIndex",a)},ye=function(e){e.noise_range=e.noise_range/100,he(e)},_e=function(e){return he(e),!!pe},Se=function(e,t){var a,n,i,l=t.value;"trad"===l&&(n="male"===re?Ze:ot,i="Traditional"),"tanner1"===l&&(n=ie,i="Tanner 1"),"tanner2"===l&&(n=je,i="Tanner 2"),"tanner3"===l&&(n=Ae,i="Tanner 3"),"monochrome"===l&&(n=Le,i="Monochrome"),x(n.centiles),y(null===(a=n)||void 0===a?void 0:a.sds),r(n.chart),M(n.measurements),h(n.axes),N({value:l,text:i})},ke=function(e){if(!pe){var t=Ot(me[te][ae]),a="";if(t.length>0){var n,i=7*e.gestation_weeks+e.gestation_days,r=[],l=Object(I.a)(t);try{for(l.s();!(n=l.n()).done;){var s=n.value;if(JSON.stringify(s)===JSON.stringify(e)){a="duplicate";break}var o=7*s.gestation_weeks+s.gestation_days;if(s.sex!==e.sex&&r.push("differing sexes"),s.birth_date!==e.birth_date&&r.push("differing date of births"),o!==i&&r.push("differing gestations"),r.length>0){a=r[0],2===r.length?a=r.join(" and "):3===r.length&&(a="".concat(r[0],", ").concat(r[1]," and ").concat(r[2]));break}}}catch(c){l.e(c)}finally{l.f()}}return a?(z("duplicate"===a?{visible:!0,title:"Duplicate entries",body:"Please check the last measurement entry as it appears to be identical to a measurement already entered.",handleClose:function(){return z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}:{visible:!0,title:"Please check entries",body:"Each chart can only display measurements from one patient at a time: ".concat(a," were detected."),handleClose:function(){return z({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),!1):(he(e),!0)}},Ce=Ut.map((function(e,t){return{menuItem:e.menuItem,render:function(){return C?Object(f.jsx)(ct.a.Pane,{attached:"top",disabled:le[e.measurementName],children:Object(f.jsx)(ft,{reference:te,sex:re,measurementMethod:e.measurementName,measurementsArray:fe[te][e.measurementName],midParentalHeightData:fe[te].midParentalHeights,chartStyle:a,axisStyle:u,gridlineStyle:Wt.gridlines,centileStyle:j,measurementStyle:D,isLoading:pe,chartType:"centile",clinicianFocus:Z},"centile-".concat(t))},"charts"):Object(f.jsx)(ct.a.Pane,{attached:"top",children:Object(f.jsx)(ft,{reference:te,sex:re,measurementMethod:e.measurementName,measurementsArray:fe[te],midParentalHeightData:fe[te].midParentalHeights,chartStyle:a,axisStyle:u,gridlineStyle:Wt.gridlines,centileStyle:j,sdsStyle:v,measurementStyle:D,isLoading:pe,chartType:"sds"},"sds-".concat(t))},"sds")}}})),we=function(){return Object(f.jsx)(ct.a,{menu:{attached:"top",secondary:!0,pointing:!0},panes:Ce,activeIndex:ne,onTabChange:ve},"tabPanes")},Fe=[{key:"measurements",menuItem:"Measurements",render:function(){return Object(f.jsx)(ct.a.Pane,{attached:!1,children:Object(f.jsx)(P,{handleMeasurementResult:ke,globalState:J,updateGlobalState:Oe,className:"measurement-form",handleUtilitiesFormDataSubmit:_e,themeColour:j.centileStroke})},"measurements")}},{key:"examples",menuItem:"Examples",render:function(){return Object(f.jsx)(ct.a.Pane,{children:Object(f.jsx)(Dt,{fictionalFormDataSubmit:ye,globalState:J,updateGlobalState:Oe,handleUtilitiesFormDataSubmit:_e})},"examples")}}],De=function(){return Object(f.jsxs)("span",{children:["Theme"," ",Object(f.jsx)(ut.a,{options:qt,floating:!0,inline:!0,onChange:Se,text:B.text})]})};return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsxs)(ht.a,{padded:!0,children:[Object(f.jsxs)(ht.a.Row,{children:[Object(f.jsx)(ht.a.Column,{width:6,children:Object(f.jsx)(m.a,{textAlign:"center",color:"fictional-child-data"===Q?"black":null,children:Object(f.jsx)(ct.a,{panes:Fe,menu:{attached:!1,secondary:!0,pointing:!0},onTabChange:function(e,t){var a=t.activeIndex;Oe("modeActiveIndex",a)},activeIndex:ee},"measurementTabs")})}),Object(f.jsx)(ht.a.Column,{width:10,children:Object(f.jsxs)(m.a,{color:"fictional-child-data"===Q?"black":null,children:[L?Object(f.jsx)(St,{apiResult:fe,reference:te}):Object(f.jsx)("div",{children:Object(f.jsx)(we,{})}),Object(f.jsx)(ht.a,{verticalAlign:"middle",children:Object(f.jsxs)(ht.a.Row,{columns:3,children:[Object(f.jsxs)(ht.a.Column,{textAlign:"left",width:4,children:[Object(f.jsx)(dt.a,{radio:!0,label:"Clinician Advice",name:"checkboxRadioGroup",value:0,checked:Z,onChange:function(e,t){return $(!Z)}}),Object(f.jsx)(dt.a,{radio:!0,label:"Child/Family Advice",name:"checkboxRadioGroup",value:1,checked:!Z,onChange:function(e,t){return $(!Z)}})]}),Object(f.jsx)(ht.a.Column,{textAlign:"center",width:4,children:Object(f.jsx)(De,{})}),Object(f.jsxs)(ht.a.Column,{textAlign:"right",width:8,children:[Object(f.jsx)(b.a,{onClick:function(){w(!C)},color:"black",children:C?"Show SDS Chart":"Show Centile Charts"}),Object(f.jsx)(b.a,{disabled:!J.isDataPresent,className:"selectUpperMargin",onClick:function(){E(!L)},children:L?"Chart":"Results"})]})]})})]})})]}),Object(f.jsx)(ht.a.Row,{children:Object(f.jsx)(c.a,{children:Object(f.jsx)(k.a,{icon:"warning sign",header:"DISCLAIMER",content:"This is for demonstration purposes only and is not for clinical use.",color:"red"})})})]}),Object(f.jsx)(Ct,{title:q.title,body:q.body,visible:q.visible,handleClose:q.handleClose,handleCancel:q.handleCancel})]})};var Kt=function(){return Object(f.jsx)("div",{children:Object(f.jsx)(zt,{})})};var Jt=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(Kt,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(206);l.a.render(Object(f.jsx)(Jt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.0971b715.chunk.js.map