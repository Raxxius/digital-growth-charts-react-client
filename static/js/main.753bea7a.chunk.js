(this["webpackJsonprcpchgrowth-react"]=this["webpackJsonprcpchgrowth-react"]||[]).push([[0],{141:function(e,t,a){},178:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n=a(57),i=(a(178),a(39)),r=a(7),l=a(0),o=a(222),s=a(224),c=a(230),u=a(221),h=a(209),d=a(62),b=a(131),m=a(220),g=a(1);var j=function(e){for(var t=[],a=23;a<=42;)t.push({key:a.toString(10),value:a,text:a.toString(10)}),a++;return Object(g.jsxs)("span",{children:[Object(g.jsx)(m.a,{compact:!0,name:"gestation_weeks",value:e.weeks,options:t,onChange:function(t,a){return e.handleGestationChange(a)}}),"\xa0+",Object(g.jsx)(m.a,{compact:!0,name:"gestation_days",value:e.days,options:[{key:"0",value:0,text:"0"},{key:"1",value:1,text:"1"},{key:"2",value:2,text:"2"},{key:"3",value:3,text:"3"},{key:"4",value:4,text:"4"},{key:"5",value:5,text:"5"},{key:"6",value:6,text:"6"}],onChange:function(t,a){return e.handleGestationChange(a)}}),"\xa0 weeks"]})};var f=function(e){return Object(g.jsx)(m.a,{name:"measurement_method",placeholder:"Measurement",value:e.measurementMethod,onChange:function(t,a){return e.handleChangeMeasurementMethod(a.value)},options:e.measurementOptions})};var x=function(e){return Object(g.jsx)(m.a,{name:"reference",placeholder:"UK-WHO",value:e.reference,onChange:function(t,a){return e.handleChangeReference(a)},options:e.referenceOptions})};var p=function(e){return Object(g.jsx)(m.a,{name:"sex",placeholder:"Sex",value:e.sex,onChange:function(t,a){return e.handleSexChange(a)},options:e.sexOptions})},v=[{key:"height",value:"height",text:"Height (cm)",disabled:!1},{key:"weight",value:"weight",text:"Weight (kg)",disabled:!1},{key:"bmi",value:"bmi",text:"BMI (kg/m\xb2)",disabled:!1},{key:"ofc",value:"ofc",text:"Head Circumference (cm)",disabled:!1}],O=[{key:"male",value:"male",text:"Boy",disabled:!1},{key:"female",value:"female",text:"Girl",disabled:!1}],y=[{key:"uk-who",value:"uk-who",text:"UK-WHO"},{key:"trisomy-21",value:"trisomy-21",text:"Down's Syndrome"},{key:"turner",value:"turner",text:"Turner's syndrome"}],_=a(227);function S(e){var t=e.errorText,a=e.showError;if(!t)return null;var n=!!t;return!1===a&&(n=!1),Object(g.jsx)(g.Fragment,{children:n&&Object(g.jsx)(_.a,{color:"red",children:t})})}var k=[{key:"gp",value:"greulich-pyle",text:"Greulich & Pyle"},{key:"twii",value:"tanner-whitehouse-ii",text:"Tanner Whitehouse II"},{key:"twiii",value:"tanner-whitehouse-iii",text:"Tanner Whitehouse III"},{key:"fels",value:"fels",text:"Fels"},{key:"bxpt",value:"bonexpert",text:"BoneXpert"}];var C=function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(s.a.Group,{children:Object(g.jsx)(s.a.Field,{style:{textAlign:"left"},width:"16",children:Object(g.jsx)(u.a,{type:"decimal",name:"boneAge",placeholder:"e.g. 3.5",labelPosition:"right",label:{content:"years",basic:!0,color:"black"},value:e.boneAge,onChange:e.handleBoneAgeChange})})}),Object(g.jsxs)(s.a.Group,{children:[Object(g.jsx)(s.a.Field,{style:{textAlign:"left"},width:"8",children:Object(g.jsx)(u.a,{type:"decimal",name:"boneAgeSDS",placeholder:"e.g. -3.5",labelPosition:"right",label:{content:"SDS",basic:!0,color:"black"},value:e.boneAgeSDS,onChange:e.handleBoneAgeSDSChange})}),Object(g.jsx)(s.a.Field,{style:{textAlign:"left"},width:"8",children:Object(g.jsx)(u.a,{type:"decimal",name:"boneAgeCentile",placeholder:"e.g. 50",labelPosition:"right",label:{content:"centile",basic:!0,color:"black"},value:e.boneAgeCentile,onChange:e.handleBoneAgeCentileChange})})]}),Object(g.jsx)(s.a.Group,{children:Object(g.jsxs)(s.a.Field,{style:{textAlign:"left"},width:"16",children:[Object(g.jsx)("label",{children:"Comment"}),Object(g.jsx)(u.a,{type:"text",name:"boneAgeText",placeholder:"e.g. This bone age is advanced",value:e.boneAgeText,onChange:e.handleBoneAgeTextChange})]})}),Object(g.jsx)(s.a.Group,{children:Object(g.jsxs)(s.a.Field,{style:{textAlign:"left"},width:"16",children:[Object(g.jsx)("label",{children:"Bone Age Reference"}),Object(g.jsx)(m.a,{name:"boneagetype",placeholder:"e.g. G&P",value:e.boneAgeType,onChange:function(t,a){return e.handleChangeBoneAgeType(a)},options:k})]})})]})},w=a(161),F=a(114),A=function(e){var t,a,n,i;try{return e.getTime(),a=""+((t=new Date(e)).getMonth()+1),n=""+t.getDate(),i=t.getFullYear(),a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[i,a,n].join("-")}catch(r){throw new Error("Input date for formatDate not recognised")}},D=function(e){try{var t=e.split("-").map((function(e,t){if(""!==e){var a=Number(e);if(Number.isNaN(a))throw new Error;return 1===t?a-1:a}throw new Error}));if(3!==t.length||t[1]<0||t[1]>11||t[2]<1||t[2]>31)throw new Error;if(function(e){var t=Object(r.a)(e,3),a=t[0],n=t[1],i=t[2];if(1===n&&29===i)return a%4===0;var l=[31,28,31,30,31,30,31,31,30,31,30,31][n];return void 0!==l&&i<=l}(t))return Object(w.a)(Date,Object(F.a)(t));throw new Error}catch(a){return null}},M=function(e){return Object(g.jsxs)(o.a,{children:[Object(g.jsx)(c.a,{as:"h5",textAlign:"left",style:{paddingTop:20},children:"Midparental Height"}),Object(g.jsxs)(s.a,{onSubmit:e.utilitiesFormDataSubmit,children:[Object(g.jsxs)(s.a.Group,{children:[Object(g.jsxs)(s.a.Field,{width:8,required:!0,children:[Object(g.jsx)("label",{style:{textAlign:"left"},children:"Maternal height"}),Object(g.jsx)(u.a,{name:"height_maternal",onChange:e.changeMaternalHeight,placeholder:"e.g. 167",value:e.maternalHeight?e.maternalHeight:"",label:{content:"cm",basic:!0,color:"black"},labelPosition:"right"})]}),Object(g.jsxs)(s.a.Field,{width:8,required:!0,children:[Object(g.jsx)("label",{style:{textAlign:"left"},children:"Paternal height"}),Object(g.jsx)(u.a,{name:"height_maternal",placeholder:"e.g. 179",onChange:e.changePaternalHeight,value:e.paternalHeight?e.paternalHeight:"",label:{content:"cm",basic:!0,color:"black"},labelPosition:"right"})]})]}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(h.a,{disabled:!e.maternalHeight||!e.paternalHeight,color:"black",fluid:!0,type:"submit",children:"Calculate Mid-parental Height"})}),e.midParentalHeightDataPresent&&Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(h.a,{type:"submit",onClick:e.removeMidParentalHeight,children:"Remove Mid-parental Height"})})]})]})},T=function(e){var t=Object(l.useState)(A(new Date)),a=Object(r.a)(t,2),n=a[0],m=a[1],_=Object(l.useState)(A(new Date)),k=Object(r.a)(_,2),w=k[0],F=k[1],T=Object(l.useState)({observation_value:""}),P=Object(r.a)(T,2),H=P[0],I=P[1],B=Object(l.useState)(40),N=Object(r.a)(B,2),G=N[0],L=N[1],W=Object(l.useState)(0),E=Object(r.a)(W,2),R=E[0],U=E[1],q=Object(l.useState)(""),z=Object(r.a)(q,2),K=z[0],J=z[1],Y=Object(l.useState)(""),V=Object(r.a)(Y,2),X=V[0],Z=V[1],$=Object(l.useState)("empty"),Q=Object(r.a)($,2),ee=Q[0],te=Q[1],ae=Object(l.useState)(!1),ne=Object(r.a)(ae,2),ie=ne[0],re=ne[1],le=Object(l.useState)(""),oe=Object(r.a)(le,2),se=oe[0],ce=oe[1],ue=Object(l.useState)("greulich-pyle"),he=Object(r.a)(ue,2),de=he[0],be=he[1],me=Object(l.useState)(""),ge=Object(r.a)(me,2),je=ge[0],fe=ge[1],xe=Object(l.useState)(""),pe=Object(r.a)(xe,2),ve=pe[0],Oe=pe[1],ye=Object(l.useState)(""),_e=Object(r.a)(ye,2),Se=_e[0],ke=_e[1],Ce=Object(l.useState)([""]),we=Object(r.a)(Ce,2),Fe=we[0],Ae=we[1],De=Object(l.useState)(!1),Me=Object(r.a)(De,2),Te=Me[0],Pe=Me[1],He=Object(l.useState)(!1),Ie=Object(r.a)(He,2),Be=Ie[0],Ne=Ie[1],Ge=function(e){"birth_date"===e.target.name?m(e.target.value):F(e.target.value);var t=D(e.target.value);if(t){var a="birth_date"===e.target.name?D(w):t,i="birth_date"===e.target.name?t:D(n),r=a.getTime()-i.getTime();r<0?"birth_date"===e.target.name?J("Date of birth cannot come after the date of measurement"):"observation_date"===e.target.name&&Z("Date of measurement cannot come before the date of birth."):r>63113904e4?"birth_date"===e.target.name?J("No centile data exists over 20 years of age."):Z("No centile data exists over 20 years of age."):(J(""),Z(""))}else"birth_date"===e.target.name?J("Please enter a valid date."):Z("Please enter a valid date.")},Le=function(e,t){return""===t?"empty":Number.isNaN(Number(t))?"Please enter a valid number.":"height"===e?t<20?"The "+e+" you entered is too low.":t>272?"The "+e+" you entered is too tall.":"":"weight"===e?t<.01?"The "+e+" you entered is too low.":t>635?"The "+e+" you entered is too heavy.":"":"bmi"===e?t<5?"The "+e+" you entered is too low.":t>204?"The "+e+" you entered is too high.":"":"ofc"===e?t<25?"The "+e+" you entered is too low.":t>70?"The "+e+" you entered is too high.":"":void 0};Object(l.useEffect)((function(){var t=function(){return""===K&&""===X&&""===ee};if(t()&&re(t()),e.globalState.clearMeasurement){var a=Object(i.a)({},H);a.observation_value="",I(a),te("empty"),re(!1),Pe(!1),Ne(!1),Ae([""]),Oe(""),fe(""),be("greulich-pyle"),ke(""),e.updateGlobalState("clearMeasurement",!1)}}),[ie,Te,Be,Fe,ve,je,de,Se,e,H,K,X,ee]);var We=function(t){var a=e.globalState.disabled[t.key];return Object(i.a)(Object(i.a)({},t),{},{disabled:a})},Ee=v.map(We),Re=O.map(We);return Object(g.jsxs)(o.a,{children:[Object(g.jsxs)(s.a,{onSubmit:function(){var t={},a={events:[]};Fe.length>0&&Fe[0].length>0&&(a={events_text:Fe}),Te&&(isNaN(parseFloat(se))||(t={bone_age:parseFloat(se),bone_age_type:de,bone_age_centile:isNaN(parseFloat(ve))?null:parseFloat(ve),bone_age_sds:isNaN(parseFloat(je))?null:parseFloat(je),bone_age_text:Se}));var i={birth_date:n,observation_date:w,measurement_method:e.globalState.measurementMethod,observation_value:H.observation_value,gestation_weeks:G,gestation_days:R,sex:e.globalState.sex},r=Object.assign(i,t,a);e.handleMeasurementResult(r)},children:[Object(g.jsxs)(s.a.Field,{required:!0,children:[Object(g.jsx)(c.a,{as:"h5",textAlign:"left",children:"Reference"}),Object(g.jsx)(x,{reference:e.globalState.reference,handleChangeReference:function(t){var a=t.value;"uk-who"!==a&&e.updateGlobalState("mid-parental-height","reset"),e.updateGlobalState("reference",a)},referenceOptions:y})]}),Object(g.jsxs)(s.a.Field,{required:!0,children:[Object(g.jsx)(c.a,{as:"h5",textAlign:"left",children:"Dates"}),Object(g.jsx)(u.a,{label:"Birth Date",type:"date",name:"birth_date",value:n,placeholder:"Date of Birth",onChange:Ge})]}),Object(g.jsx)(s.a.Field,{required:!0,children:Object(g.jsx)(u.a,{label:"Measurement Date",type:"date",name:"observation_date",value:w,placeholder:"Date of Measurement",onChange:Ge})}),Object(g.jsx)(S,{errorText:X}),Object(g.jsx)(S,{errorText:K}),Object(g.jsxs)(s.a.Group,{style:{textAlign:"left"},children:[Object(g.jsxs)(s.a.Field,{style:{marginRight:20},required:!0,children:[Object(g.jsx)("label",{children:"Sex"}),Object(g.jsx)(p,{sex:e.globalState.sex,handleSexChange:function(t){e.updateGlobalState("sex",t.value)},sexOptions:Re})]}),Object(g.jsxs)(s.a.Field,{children:[Object(g.jsx)("label",{children:"Gestation"}),Object(g.jsx)(j,{name:"gestation_select",weeks:G,days:R,handleGestationChange:function(e){var t=e.name,a=e.value;"gestation_weeks"===t?(L(a),42===a&&U(0)):"gestation_days"===t&&U(42===G?0:a)}})]})]}),Object(g.jsxs)(s.a.Group,{children:[Object(g.jsxs)(s.a.Field,{required:!0,children:[Object(g.jsx)("label",{style:{textAlign:"left"},children:"Measurements"}),Object(g.jsx)(f,{measurementMethod:e.globalState.measurementMethod,handleChangeMeasurementMethod:function(t){e.updateGlobalState("measurementMethod",t)},measurementOptions:Ee})]}),Object(g.jsxs)(s.a.Field,{width:8,required:!0,children:[Object(g.jsx)("label",{style:{textAlign:"left"},children:"Value"}),Object(g.jsx)(u.a,{type:"decimal",name:"observation_value",placeholder:"Measurement",value:H.observation_value,label:{content:e.globalState.units.toString(),basic:!0,color:"black"},labelPosition:"right",onChange:function(t,a){var n=a.value;I({observation_value:n}),te(Le(e.globalState.measurementMethod,n))}})]})]}),Object(g.jsx)(S,{showError:"empty"!==ee,errorText:ee}),Object(g.jsxs)(s.a.Group,{children:["height"===e.globalState.measurementMethod&&Object(g.jsx)(s.a.Field,{width:10,children:Object(g.jsxs)(h.a,{icon:!0,fluid:!0,labelPosition:"left",onClick:function(e){e.preventDefault(),Pe(!Te),ce(""),Oe(""),fe(""),be("greulich-pyle"),ke("")},color:"black",children:[Object(g.jsx)(d.a,{name:"hand paper outline"}),"Add Bone Age"]})}),Object(g.jsx)(s.a.Field,{width:10,children:Object(g.jsxs)(h.a,{icon:!0,labelPosition:"left",onClick:function(e){e.preventDefault(),Ne(!Be),Ae([""])},fluid:!0,color:"black",children:[Object(g.jsx)(d.a,{name:"bookmark outline"}),"Add Event"]})})]}),Te&&Object(g.jsx)(b.a,{children:Object(g.jsx)(C,{boneAge:se,handleBoneAgeChange:function(e,t){var a=t.value;ce(a)},boneAgeType:de,handleChangeBoneAgeType:function(e){var t=e.value;be(t)},boneAgeCentile:ve,handleBoneAgeCentileChange:function(e,t){var a=t.value;Oe(a)},boneAgeSDS:je,handleBoneAgeSDSChange:function(e,t){var a=t.value;fe(a)},boneAgeText:Se,handleBoneAgeTextChange:function(e,t){var a=t.value;ke(a)}})}),Be&&Object(g.jsx)(b.a,{children:Fe.map((function(e,t){return Object(g.jsxs)(s.a.Group,{children:[Object(g.jsx)(s.a.Field,{style:{textAlign:"left"},width:"14",children:Object(g.jsx)(u.a,{name:"event",placeholder:"e.g. diagnosis",onChange:function(e){var a=Fe;a[t]=e.target.value,Ae(a)}})}),Object(g.jsx)(h.a,{icon:!0,circular:!0,onClick:function(e){if(e.preventDefault(),""!==Fe[t]){var a=Fe;a.push(""),Ae(a)}},children:Object(g.jsx)(d.a,{name:"plus circle"})}),t===Fe.length-1&&Object(g.jsx)(h.a,{icon:!0,circular:!0,onClick:function(e){if(e.preventDefault(),0!==t){var a=Fe.splice(t,1);Ae(a)}else Ae([""])},children:Object(g.jsx)(d.a,{name:"minus circle"})})]},t)}))}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(h.a,{content:"Calculate Centiles and Add To Chart",type:"submit",fluid:!0,disabled:!ie,color:"black",icon:"line graph",labelPosition:"right"})})]}),e.globalState.isDataPresent&&Object(g.jsxs)(b.a,{children:[Object(g.jsx)(h.a,{content:"Reset Chart",icon:"power off",onClick:function(){e.updateGlobalState("resetCurrent",!0)}}),Object(g.jsx)(h.a,{content:"Remove Last",icon:"undo",onClick:function(){e.updateGlobalState("undoLast",!0)}})]}),"uk-who"===e.globalState.reference&&Object(g.jsx)(M,{utilitiesFormDataSubmit:function(t){if(!(t.target[0].value<100&&t.target[1].value<100)){var a={height_maternal:t.target[0].value,height_paternal:t.target[1].value,sex:e.globalState.sex};e.updateGlobalState("isMidParentalHeightRequest",!0),e.updateGlobalState("parentalHeights",{maternalHeight:t.target[0].value,paternalHeight:t.target[1].value}),e.handleUtilitiesFormDataSubmit(a)}},changeMaternalHeight:function(t,a){var n=e.globalState.parentalHeights.height_paternal,i={height_maternal:a.value,height_paternal:n};e.updateGlobalState("parentalHeights",i)},changePaternalHeight:function(t,a){var n={height_maternal:e.globalState.parentalHeights.height_maternal,height_paternal:a.value};e.updateGlobalState("parentalHeights",n)},maternalHeight:e.globalState.parentalHeights.height_maternal,paternalHeight:e.globalState.parentalHeights.height_paternal,removeMidParentalHeight:function(){e.updateGlobalState("mid-parental-height","reset")},midParentalHeightDataPresent:!!e.globalState["mid-parental-height"].mid_parental_height})]})},P=a(74),H=a(37),I=a(38),B=function(){function e(t,a,n,i,r,l){Object(H.a)(this,e),this.chart=t,this.gridlines=a,this.axes=n,this.centiles=i,this.sds=r,this.measurements=l}return Object(I.a)(e,[{key:"chart",get:function(){return this._chart},set:function(e){this._chart=e}},{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"axes",get:function(){return this._axes},set:function(e){this._axes=e}},{key:"centiles",get:function(){return this._centiles},set:function(e){this._centiles=e}},{key:"sds",get:function(){return this._sds},set:function(e){this._sds=e}},{key:"measurements",get:function(){return this._measurements},set:function(e){this._measurements=e}}]),e}(),N=function(){function e(t,a,n,i,r,l,o,s,c,u,h,d,b,m,g,j,f){Object(H.a)(this,e),this.backgroundColour=t,this.width=a,this.height=n,this.padding=i,this.titleStyle=r,this.subTitleStyle=l,this.tooltipBackgroundColour=o,this.tooltipStroke=s,this.tooltipTextStyle=c,this.termFill=u,this.termStroke=h,this.infoBoxFill=d,this.infoBoxStroke=b,this.infoBoxTextStyle=m,this.toggleButtonInactiveColour=g,this.toggleButtonActiveColour=j,this.toggleButtonTextColour=f}return Object(I.a)(e,[{key:"backgroundColour",get:function(){return this._backgroundColour},set:function(e){this._backgroundColour=e}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e}},{key:"titleStyle",get:function(){return this._titleStyle},set:function(e){this._titleStyle=e}},{key:"subTitleStyle",get:function(){return this._subTitleStyle},set:function(e){this._subTitleStyle=e}},{key:"tooltipBackgroundColour",get:function(){return this._tooltipBackgroundColour},set:function(e){this._tooltipBackgroundColour=e}},{key:"tooltipStroke",get:function(){return this._tooltipStroke},set:function(e){this._tooltipStroke=e}},{key:"tooltipTextStyle",get:function(){return this._tooltipTextStyle},set:function(e){this._tooltipTextStyle=e}},{key:"termFill",get:function(){return this._termFill},set:function(e){this._termFill=e}},{key:"termStroke",get:function(){return this._termStroke},set:function(e){this._termStroke=e}},{key:"infoBoxFill",get:function(){return this._infoBoxFill},set:function(e){this._infoBoxFill=e}},{key:"infoBoxStroke",get:function(){return this._infoBoxStroke},set:function(e){this._infoBoxStroke=e}},{key:"infoBoxTextStyle",get:function(){return this._infoBoxTextStyle},set:function(e){this._infoBoxTextStyle=e}},{key:"toggleButtonActiveColour",get:function(){return this._toggleButtonActiveColour},set:function(e){this._toggleButtonActiveColour=e}},{key:"toggleButtonInactiveColour",get:function(){return this._toggleButtonInactiveColour},set:function(e){this._toggleButtonInactiveColour=e}},{key:"toggleButtonTextColour",get:function(){return this._toggleButtonTextColour},set:function(e){this._toggleButtonTextColour=e}}]),e}(),G=function(){function e(t,a,n,i){Object(H.a)(this,e),this.left=t,this.right=a,this.top=n,this.bottom=i}return Object(I.a)(e,[{key:"left",get:function(){return this._left},set:function(e){this._left=e}},{key:"right",get:function(){return this._right},set:function(e){this._right=e}},{key:"top",get:function(){return this._top},set:function(e){this._top=e}},{key:"bottom",get:function(){return this._bottom},set:function(e){this._bottom=e}}]),e}(),L=function(){function e(t,a,n,i){Object(H.a)(this,e),this.name=t,this.colour=a,this.size=n,this.weight=i}return Object(I.a)(e,[{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"colour",get:function(){return this._colour},set:function(e){this._colour=e}},{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"style",get:function(){return this._style}},{key:"weight",set:function(e){this._weight=e}}]),e}(),W=function(){function e(t,a,n,i){Object(H.a)(this,e),this.gridlines=t,this.stroke=a,this.strokeWidth=n,this.dashed=i}return Object(I.a)(e,[{key:"gridlines",get:function(){return this._gridlines},set:function(e){this._gridlines=e}},{key:"stroke",get:function(){return this._stroke},set:function(e){this._stroke=e}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(e){this._strokeWidth=e}},{key:"dashed",get:function(){return this._dashed},set:function(e){this._dashed=e}}]),e}(),E=function(){function e(t,a,n){Object(H.a)(this,e),this.axisStroke=t,this.axisLabelTextStyle=a,this.tickLabelTextStyle=n}return Object(I.a)(e,[{key:"axisStroke",get:function(){return this._axisStroke},set:function(e){this._axisStroke=e}},{key:"axisLabelTextStyle",get:function(){return this._axisLabelTextStyle},set:function(e){this._axisLabelTextStyle=e}},{key:"tickLabelTextStyle",get:function(){return this._tickLabelTexSize},set:function(e){this._tickLabelTexSize=e}}]),e}(),R=function(){function e(t,a,n,i,r,l){Object(H.a)(this,e),this.centileStroke=t,this.centileStrokeWidth=a,this.delayedPubertyAreaFill=n,this.midParentalCentileStroke=i,this.midParentalCentileStrokeWidth=r,this.midParentalAreaFill=l}return Object(I.a)(e,[{key:"centileStroke",get:function(){return this._centileStroke},set:function(e){this._centileStroke=e}},{key:"centileStrokeWidth",get:function(){return this._centileStrokeWidth},set:function(e){this._centileStrokeWidth=e}},{key:"delayedPubertyAreaFill",get:function(){return this._delayedPubertyAreaFill},set:function(e){this._delayedPubertyAreaFill=e}},{key:"midParentalAreaFill",get:function(){return this._midParentalAreaFill},set:function(e){this._midParentalAreaFill=e}},{key:"midParentalCentileStroke",get:function(){return this._midParentalStroke},set:function(e){this._midParentalStroke=e}},{key:"midParentalCentileStrokeWidth",get:function(){return this._midParentalStrokeWidth},set:function(e){this._midParentalCentileStrokeWidth=e}}]),e}(),U=function(){function e(t,a,n,i,r){Object(H.a)(this,e),this.lineStrokeWidth=t,this.heightStroke=a,this.weightStroke=n,this.ofcStroke=i,this.bmiStroke=r}return Object(I.a)(e,[{key:"lineStrokeWidth",get:function(){return this._lineStrokeWidth},set:function(e){this._lineStrokeWidth=e}},{key:"heightStroke",get:function(){return this._heightStroke},set:function(e){this._heightStroke=e}},{key:"weightStroke",get:function(){return this._weightStroke},set:function(e){this._weightStroke=e}},{key:"ofcStroke",get:function(){return this._ofcStroke},set:function(e){this._ofcStroke=e}},{key:"bmiStroke",get:function(){return this._bmiStroke},set:function(e){this._bmiStroke=e}}]),e}(),q=function(){function e(t,a){Object(H.a)(this,e),this.measurementFill=t,this.highlightedMeasurementFill=a}return Object(I.a)(e,[{key:"measurementFill",get:function(){return this._measurementFill},set:function(e){this._measurementFill=e}},{key:"highlightedMeasurementFill",get:function(){return this._highlightedMeasurementFill},set:function(e){this._highlightedMeasurementFill=e}}]),e}(),z="#fdc300",K=new L("Arial","#000000",14,"bold"),J=new L("Arial","#000000",14,"normal"),Y=new L("Montserrat","#000000",.25,"normal"),V=new L("Montserrat","#000000",6,"normal"),X=new L("Arial","000000",10,"normal"),Z=new L("Arial","000000",8,"normal"),$=new N("#FFFFFF",700,475,new G(50,50,25,40),K,J,z,z,Y,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",V,"#c6bddd","#7159aa","#FFFFFF"),Q=new W(!0,"#d9d9d9",.25,!1),ee=new R("#7159aa",1.5,"#c6bddd","#7159aa",3,"#c6bddd"),te=new U(1.5,"#7159aa","#ff8000","#e60700","#c2a712"),ae=new B($,Q,new E("#000000",X,Z),ee,te,new q("#000000","#7159aa")),ne="#3366cc",ie=new L("Arial","#000000",14,"bold"),re=new L("Arial","#000000",14,"normal"),le=new L("Montserrat","#FFFFFF",.25,"normal"),oe=new L("Montserrat","#000000",6,"normal"),se=new L("Arial","000000",10,"normal"),ce=new L("Arial","000000",8,"normal"),ue=new N("#FFFFFF",700,475,new G(50,50,25,40),ie,re,ne,ne,le,"#CDCDCD","#CDCDCD",ne,ne,oe,"#ffc080","#ff8000","#FFFFFF"),he=new W(!0,"#d9d9d9",.25,!1),de=new R("#ff8000",1.5,"#ffc080","#ff8000",.25,"#ffc080"),be=new U(1.5,"#7159aa","#ff8000","#e60700","#c2a712"),me=new B(ue,he,new E("#000000",se,ce),de,be,new q("#000000","#ff8000")),ge="#fdc300",je="#000000",fe=new L("Arial","#000000",14,"bold"),xe=new L("Arial","#000000",14,"normal"),pe=new L("Montserrat","#000000",.25,"normal"),ve=new L("Montserrat","#000000",6,"normal"),Oe=new L("Arial",je,10,"normal"),ye=new L("Arial",je,8,"normal"),_e=new N("#FFFFFF",700,475,new G(50,50,25,40),fe,xe,ge,ge,pe,"#CDCDCD","#CDCDCD",ge,ge,ve,"#f59c99","#e60700","#FFFFFF"),Se=new W(!0,"#d9d9d9",.25,!1),ke=new R("#e60700",1.5,"#f59c99","#e60700",.25,"#f59c99"),Ce=new U(1.5,"#7159aa","#ff8000","#e60700","#c2a712"),we=new B(_e,Se,new E("#000000",Oe,ye),ke,Ce,new q("#000000","#e60700")),Fe="#b3b3b3",Ae=new L("Arial","#000000",14,"bold"),De=new L("Arial","#000000",14,"normal"),Me=new L("Montserrat","#000000",.25,"normal"),Te=new L("Montserrat","#000000",6,"normal"),Pe=new L("Arial","000000",10,"normal"),He=new L("Arial","000000",8,"normal"),Ie=new N("#FFFFFF",700,475,new G(50,50,25,40),Ae,De,Fe,Fe,Me,"#CDCDCD","#CDCDCD","#CDCDCD","#CDCDCD",Te,"#b3b3b3","#000000","#FFFFFF"),Be=new W(!0,"#d9d9d9",.25,!1),Ne=new R("#000000",1.5,"#b3b3b3","#000000",1.5,"#b3b3b3"),Ge=new U(1.5,"#000000","#000000","#000000","#000000"),Le=new B(Ie,Be,new E("#000000",Pe,He),Ne,Ge,new q("#000000","#000000")),We="#66c8eb",Ee=new L("Arial","#000000",14,"bold"),Re=new L("Arial","#000000",14,"normal"),Ue=new L("Montserrat","#000000",.25,"normal"),qe=new L("Montserrat","#000000",6,"normal"),ze=new L("Arial","000000",10,"normal"),Ke=new L("Arial","000000",8,"normal"),Je=new N("#FFFFFF",700,475,new G(50,50,25,40),Ee,Re,We,We,Ue,"#CDCDCD","#CDCDCD",We,We,qe,"#66c8eb","#00a3de","#FFFFFF"),Ye=new W(!0,"#d9d9d9",.25,!1),Ve=new R("#00a3de",1.5,"#66c8eb","#00a3de",.25,"#66c8eb"),Xe=new E("#000000",ze,Ke),Ze=new q("#000000","#00a3de"),$e=new B(Je,Ye,Xe,Ve,new U(1.5,"#00a3de","#32b5e4","#7fd1ee","#b2e3f5"),Ze),Qe="#df99c4",et=new L("Arial","#000000",14,"bold"),tt=new L("Arial","#000000",14,"normal"),at=new L("Montserrat","#000000",.25,"normal"),nt=new L("Montserrat","#000000",6,"normal"),it=new L("Arial","000000",10,"normal"),rt=new L("Arial","000000",8,"normal"),lt=new N("#FFFFFF",700,475,new G(50,50,25,40),et,tt,Qe,Qe,at,"#CDCDCD","#CDCDCD",Qe,Qe,nt,"#df99c4","#c9559d","#FFFFFF"),ot=new W(!0,"#d9d9d9",.25,!1),st=new R("#c9559d",1.5,"#df99c4","#c9559d",.25,"#df99c4"),ct=new B(lt,ot,new E("#000000",it,rt),st,new U(1.5,"#c9559d","#d376b0","#e4aace","#eecce1"),new q("#000000","#c9559d")),ut=a(233),ht=a(92),dt=a(163),bt=a(232),mt=a(228),gt=a(223),jt=a(155);function ft(e){(function(e){return new Promise((function(t,a){var n=e.outerHTML;n.match(/xmlns="/im)||(n=n.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" '));var i=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),r=window.URL||window.webkitURL||window,l=r.createObjectURL(i),o=n.match(/height="(\d+)/m),s=o&&o[1]?parseInt(o[1],10):200,c=(o=n.match(/width="(\d+)/m))&&o[1]?parseInt(o[1],10):200,u=document.createElement("canvas");u.width=c+5,u.height=s+5;var h=u.getContext("2d"),d=new Image;d.onload=function(){h.drawImage(this,5,5),r.revokeObjectURL(l),t(u)},d.src=l}))})(e).then((function(e){e.toBlob((function(e){var t=new window.ClipboardItem({"image/png":e});navigator.clipboard.write([t])}))}))}var xt=function(e){var t=e.isLoading,a=function(e){var t="";"uk-who"===e.reference?t="UK-WHO":"turner"===e.reference?t="Turner's Syndrome":"trisomy-21"===e.reference&&(t="Trisomy 21 (Down's Syndrome)");var a="",n="";a="male"===e.sex?"Boys":"Girls";switch(e.measurementMethod){case"height":n="Height / Length";break;case"weight":n="Weight";break;case"bmi":n="Body Mass Index";break;case"ofc":n="Head Circumference";break;default:n=""}return{subtitle:n+" - "+a,title:t}}(e);return Object(g.jsxs)("div",{children:[Object(g.jsx)(mt.a,{active:t,children:Object(g.jsx)(gt.a,{children:"Fetching Data"})}),Object(g.jsx)(jt.a,{reference:e.reference,measurementMethod:e.measurementMethod,sex:e.sex,title:a.title,subtitle:a.subtitle,measurementsArray:e.measurementsArray,midParentalHeightData:e.midParentalHeightData,chartStyle:e.chartStyle,measurementStyle:e.measurementStyle,centileStyle:e.centileStyle,sdsStyle:null===e||void 0===e?void 0:e.sdsStyle,gridlineStyle:e.gridlineStyle,axisStyle:e.axisStyle,enableZoom:!0,chartType:e.chartType,enableExport:!0,exportChartCallback:ft,clinicianFocus:e.clinicianFocus})]})},pt=function e(t){var a=[];return t.forEach((function(t){Array.isArray(t)?a.push(e(t)):"object"===typeof t&&null!==t?a.push(vt(t)):a.push(t)})),a},vt=function e(t){var a={};for(var n in t){var i=t[n];Array.isArray(i)?a[n]=pt(i):a[n]="object"===typeof i&&null!==i?e(i):i}return a},Ot=function(e){return Array.isArray(e)?pt(e):"object"===typeof e&&null!==e?vt(e):e},yt=a(160),_t=a(225),St=function(e){return"height"===e?"cm":"weight"===e?"kg":"bmi"===e?"kg/m\xb2":"ofc"===e?"cm":void 0};function kt(e){var t=e.measurement,a=t.child_observation_value.observation_value,n=t.child_observation_value.measurement_method;return Object(g.jsxs)(_t.a.Cell,{children:[a," ",St(n)]})}function Ct(e){var t=e.measurementDates,a=e.decimalAge,n=e.ageChoice,i=e.chronologicalStyles,r=a?t.corrected_decimal_age.toFixed(3):t.corrected_calendar_age,l=a?t.chronological_decimal_age.toFixed(3):t.chronological_calendar_age;return Object(g.jsxs)(_t.a.Cell,{children:[("corrected"===n||"both"===n)&&Object(g.jsx)("p",{children:r}),("chronological"===n||"both"===n)&&Object(g.jsx)("p",{style:i,children:l})]})}function wt(e){var t=e.measurement.measurement_dates.observation_date;return Object(g.jsx)(_t.a.Cell,{children:t})}function Ft(e){var t=e.measurementCentiles,a=e.ageChoice,n=e.chronologicalStyles,i=t.corrected_centile,r=t.chronological_centile;return Object(g.jsxs)(_t.a.Cell,{children:[("corrected"===a||"both"===a)&&Object(g.jsx)("p",{children:i}),("chronological"===a||"both"===a)&&Object(g.jsx)("p",{style:n,children:r})]})}function At(e){var t=e.measurementSDS,a=e.ageChoice,n=e.chronologicalStyles,i=Math.round(1e3*t.corrected_sds)/1e3,r=Math.round(1e3*t.chronological_sds)/1e3;return Object(g.jsxs)(_t.a.Cell,{children:[("corrected"===a||"both"===a)&&Object(g.jsx)("p",{children:i}),("chronological"===a||"both"===a)&&Object(g.jsx)("p",{style:n,children:r})]})}var Dt=function(e){var t=e.measurement,a=e.ageChoice,n=e.decimalAge,i=e.chronologicalStyles;return Object(g.jsxs)(_t.a.Row,{children:[Object(g.jsx)(wt,{measurement:t}),Object(g.jsx)(kt,{measurement:t}),Object(g.jsx)(Ct,{measurementDates:t.measurement_dates,decimalAge:n,ageChoice:a,chronologicalStyles:i}),Object(g.jsx)(Ft,{measurementCentiles:t.measurement_calculated_values,ageChoice:a,chronologicalStyles:i}),Object(g.jsx)(At,{measurementSDS:t.measurement_calculated_values,ageChoice:a,chronologicalStyles:i})]})},Mt=function(e){var t=e.data,a=e.chronologicalStyles,n=Object(l.useState)("corrected"),o=Object(r.a)(n,2),c=o[0],u=o[1],d=Object(l.useState)(!1),b=Object(r.a)(d,2),m=b[0],j=b[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)(s.a,{children:Object(g.jsxs)(s.a.Group,{children:[t.length>0&&t[0].measurement_dates.corrected_decimal_age!==t[0].measurement_dates.chronological_decimal_age&&Object(g.jsxs)(h.a.Group,{children:[Object(g.jsx)(h.a,{value:"corrected",active:"corrected"===c,onClick:function(e,t){var a=t.value;return u(a)},style:{fontWeight:"corrected"===c?"bold":"normal"},children:"Corrected"}),Object(g.jsx)(h.a,{value:"chronological",active:"chronological"===c,onClick:function(e,t){var a=t.value;return u(a)},style:Object(i.a)({fontWeight:"chronological"===c?"bold":"normal"},a),children:"Chronological"}),Object(g.jsx)(h.a,{value:"both",active:"both"===c,onClick:function(e,t){var a=t.value;return u(a)},style:{fontWeight:"both"===c?"bold":"normal"},children:"Both"})]}),Object(g.jsx)(bt.a,{toggle:!0,onChange:function(){return j(!m)},fitted:!1,label:"Decimal age?",style:{marginLeft:"1em"}})]})}),Object(g.jsxs)(_t.a,{basic:"very",celled:!0,children:[Object(g.jsx)(_t.a.Header,{children:Object(g.jsxs)(_t.a.Row,{children:[Object(g.jsx)(_t.a.HeaderCell,{children:"Date of Measurement"}),Object(g.jsx)(_t.a.HeaderCell,{children:"Measurement"}),Object(g.jsx)(_t.a.HeaderCell,{children:"Age"}),Object(g.jsx)(_t.a.HeaderCell,{children:"Centile"}),Object(g.jsx)(_t.a.HeaderCell,{children:"SDS"})]})}),Object(g.jsx)(_t.a.Body,{children:t.map((function(e,t){return Object(g.jsx)(Dt,{measurement:e,ageChoice:c,decimalAge:m,chronologicalStyles:a},t)}))})]})]})},Tt=function(e){var t=e.apiResult,a=e.reference,n=[{menuItem:"Heights",measurementName:"height",key:"Heights",data:t[a].height,disabled:0===t[a].height.length},{menuItem:"Weights",measurementName:"weight",key:"Weights",data:t[a].weight,disabled:0===t[a].weight.length},{menuItem:"BMIs",measurementName:"bmi",key:"BMIs",data:t[a].bmi,disabled:0===t[a].bmi.length},{menuItem:"Head Circumferences",measurementName:"ofc",key:"Head Circumferences",data:t[a].ofc,disabled:0===t[a].ofc.length}],i=Object(l.useState)(0),o=Object(r.a)(i,2),s=o[0],c=o[1];var u={fontStyle:"italic",color:"#6c757d"},h=n.map((function(e,t){return{menuItem:Object(g.jsx)(yt.a.Item,{disabled:e.disabled,children:e.menuItem},e.measurementName),render:function(){return Object(g.jsx)(ut.a.Pane,{attached:"top",children:Object(g.jsx)(Mt,{dataTitle:e.measurementName,data:e.data,chronologicalStyles:u})},e.measurementName)}}}));return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(b.a,{children:Object(g.jsx)(ut.a,{menu:{attached:"top",secondary:!0,pointing:!0},panes:h,activeIndex:s,onTabChange:function(e,t){c(t.activeIndex)}},"tabPanes")})})},Pt=a(226),Ht=function(e){var t=e.title,a=e.body,n=e.handleClose,i=e.visible,r=e.handleCancel,l=!!r;return Object(g.jsxs)(Pt.a,{title:t,open:i,size:"small",closeOnEscape:!0,children:[Object(g.jsx)(Pt.a.Header,{children:t}),Object(g.jsx)(Pt.a.Content,{children:a}),Object(g.jsxs)(Pt.a.Actions,{children:[Object(g.jsx)(h.a,{negative:!0,onClick:n,children:"OK"}),l&&Object(g.jsx)(h.a,{onClick:r,children:"Cancel"})]})]})};a(141);var It=function(e){return Object(g.jsx)(m.a,{name:"interval",placeholder:"days",value:e.intervalType,onChange:e.handleChangeIntervalType,options:e.intervalTypeOptions})},Bt=function(e){return Object(g.jsxs)("div",{style:{textAlign:"left"},children:[Object(g.jsxs)("label",{style:{padding:"10px"},children:[e.min," "]}),Object(g.jsx)("input",{type:"range",min:e.min,max:e.max,value:e.value,step:e.step,className:"slider",onChange:function(t){return e.onChange(t.target.value)}}),Object(g.jsx)("label",{style:{padding:"10px"},children:e.max}),Object(g.jsxs)("h5",{style:{display:"inline"},children:[e.label,": ",e.value," ",e.isPercentage?"%":"SDS"]})]})},Nt=[{key:"d",value:"days",text:"Days",disabled:!1},{key:"w",value:"weeks",text:"Weeks",disabled:!1},{key:"m",value:"months",text:"Months",disabled:!1},{key:"y",value:"years",text:"Years",disabled:!1}],Gt=function(e){var t=Object(l.useState)(40),a=Object(r.a)(t,2),n=a[0],o=a[1],d=Object(l.useState)(0),b=Object(r.a)(d,2),m=b[0],_=b[1],k=Object(l.useState)("1"),C=Object(r.a)(k,2),w=C[0],F=C[1],A=Object(l.useState)("20"),D=Object(r.a)(A,2),T=D[0],P=D[1],H=Object(l.useState)("years"),I=Object(r.a)(H,2),B=I[0],N=I[1],G=Object(l.useState)("1"),L=Object(r.a)(G,2),W=L[0],E=L[1],R=Object(l.useState)(!1),U=Object(r.a)(R,2),q=U[0],z=U[1],K=Object(l.useState)(.01),J=Object(r.a)(K,2),Y=J[0],V=J[1],X=Object(l.useState)(!1),Z=Object(r.a)(X,2),$=Z[0],Q=Z[1],ee=Object(l.useState)(1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],ie=Object(l.useState)("0"),re=Object(r.a)(ie,2),le=re[0],oe=re[1],se=Object(l.useState)(""),ce=Object(r.a)(se,2),ue=ce[0],he=ce[1],de=function(t){if("submit"===t.type){var a={measurement_method:e.globalState.measurementMethod,sex:e.globalState.sex,start_chronological_age:w,end_age:T,gestation_weeks:n,gestation_days:m,measurement_interval_type:B,measurement_interval_number:W,start_sds:le,noise:$,drift_range:Y,drift:q,noise_range:ae,reference:e.globalState.reference};e.fictionalFormDataSubmit(a)}else e.updateGlobalState("resetCurrent",!0)},be=function(e,t){var a=t.name,n=t.value;"start_age"===a&&F(n),"end_age"===a&&P(n),"interval_value"===a&&E(n),"startSDS"===a&&oe(n)},me=function(t){var a=e.globalState.disabled[t.key];return Object(i.a)(Object(i.a)({},t),{},{disabled:a})},ge=v.map(me),je=O.map(me);return Object(l.useEffect)((function(){switch(!0){case Number(w)<0:he("Starting age must be above 0.");break;case Number(T)>20:he("Ending age must be under 20.");break;case Number.isNaN(Number(w)):case Number.isNaN(Number(T)):case Number.isNaN(Number(W)):case Number.isNaN(Number(le)):he("Please check that all entries have valid numbers.");break;case""===w:case""===T:case""===W:case""===le:he("Please check that all entries are filled in.");break;default:he("")}}),[w,T,W,le]),Object(g.jsxs)("div",{children:[Object(g.jsxs)(s.a,{onSubmit:de,children:[Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(x,{handleChangeReference:function(t){e.updateGlobalState("reference",t.value)},reference:e.globalState.reference,referenceOptions:y})}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(f,{handleChangeMeasurementMethod:function(t){e.updateGlobalState("measurementMethod",t)},measurementMethod:e.globalState.measurementMethod,measurementOptions:ge})}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(p,{handleSexChange:function(t){e.updateGlobalState("sex",t.value)},sex:e.globalState.sex,sexOptions:je})}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(j,{handleGestationChange:function(e){var t=e.name,a=e.value;"gestation_weeks"===t?(o(a),42===a&&_(0)):"gestation_days"===t&&_(42===n?0:a)},weeks:n,days:m})}),Object(g.jsx)(c.a,{as:"h5",textAlign:"left",children:"Ages"}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(u.a,{type:"decimal",name:"start_age",placeholder:"Starting Decimal Age",value:w,label:{content:"years",basic:!0,color:"black"},labelPosition:"right",onChange:be})}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(u.a,{type:"decimal",name:"end_age",placeholder:"Ending Decimal Age",value:T,label:{content:"years",basic:!0,color:"black"},labelPosition:"right",onChange:be})}),Object(g.jsx)(c.a,{as:"h5",textAlign:"left",children:"Intervals"}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(It,{handleChangeIntervalType:function(e,t){var a=t.value;N(a)},intervalType:B,intervalTypeOptions:Nt})}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(u.a,{type:"decimal",name:"interval_value",placeholder:"Interval amount",value:W,onChange:be})}),Object(g.jsx)(c.a,{as:"h5",textAlign:"left",children:"SDS (Standard Deviation Score)"}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(s.a.Input,{label:"Starting SDS",type:"decimal",name:"startSDS",placeholder:"SDS",value:le,labelPosition:"left",onChange:be})}),Object(g.jsx)(S,{errorText:ue}),Object(g.jsx)(s.a.Field,{width:14,style:{textAlign:"left"},children:Object(g.jsx)(bt.a,{toggle:!0,label:"Add SDS drift?",onChange:function(e,t){var a=t.checked;z(a)}})}),q&&Object(g.jsx)(s.a.Field,{width:14,children:Object(g.jsx)(Bt,{isPercentage:!1,min:-3,max:3,value:Y,step:.01,onChange:function(e){V(e)},label:"Drift"})}),Object(g.jsx)(s.a.Field,{width:14,style:{textAlign:"left"},children:Object(g.jsx)(bt.a,{toggle:!0,label:"Simulate Measurement Error?",onChange:function(e,t){var a=t.checked;Q(a)}})}),$&&Object(g.jsx)(s.a.Field,{width:14,children:Object(g.jsx)(Bt,{isPercentage:!0,min:0,max:10,value:ae,step:.1,onChange:function(e){ne(e)},label:"Percentage Error"})}),Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(h.a,{content:"Generate Growth Data",type:"submit",fluid:!0,color:"black",icon:"line graph",labelPosition:"right",disabled:""!==ue})}),e.globalState.isDataPresent&&Object(g.jsx)(s.a.Field,{children:Object(g.jsx)(h.a,{content:"Reset Chart",icon:"power off",onClick:de,style:{width:"100%"},type:"reset"})})]}),"uk-who"===e.globalState.reference&&Object(g.jsx)(M,{utilitiesFormDataSubmit:function(t){if(!(t.target[0].value<100&&t.target[1].value<100)){var a={height_maternal:t.target[0].value,height_paternal:t.target[1].value,sex:e.globalState.sex};e.updateGlobalState("isMidParentalHeightRequest",!0),e.updateGlobalState("parentalHeights",{maternalHeight:t.target[0].value,paternalHeight:t.target[1].value}),console.log(e),e.handleUtilitiesFormDataSubmit(a)}},changeMaternalHeight:function(t,a){var n=e.globalState.parentalHeights.height_paternal,i={height_maternal:a.value,height_paternal:n};e.updateGlobalState("parentalHeights",i)},changePaternalHeight:function(t,a){var n={height_maternal:e.globalState.parentalHeights.height_maternal,height_paternal:a.value};e.updateGlobalState("parentalHeights",n)},maternalHeight:e.globalState.parentalHeights.height_maternal,paternalHeight:e.globalState.parentalHeights.height_paternal,removeMidParentalHeight:function(){e.updateGlobalState("mid-parental-height","reset")},midParentalHeightDataPresent:!!e.globalState["mid-parental-height"].mid_parental_height})]})},Lt=a(158),Wt=a(130),Et=a.n(Wt),Rt=a(159),Ut=a.n(Rt),qt=function(){var e=Object(Lt.a)(Et.a.mark((function e(t,a,n){var i,r,l,o;return Et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(i="https://rcpch-dgc-server-live.azurewebsites.net","/").concat(a,"/").concat(n),"mid-parental-height"===n&&(r="".concat(i,"/utilities/").concat(n)),l={"Content-Type":"application/json","Subscription-Key":"4e00b26f2c61454296ca454fa0f9ebc0"},e.next=6,Ut()({url:r,data:t,method:"POST",headers:l});case 6:return o=e.sent,e.abrupt("return",o.data);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),zt=function(){var e={turner:{height:[],weight:[],bmi:[],ofc:[]},"trisomy-21":{height:[],weight:[],bmi:[],ofc:[]},"uk-who":{height:[],weight:[],bmi:[],ofc:[],parentalHeights:{height_maternal:null,height_paternal:null,sex:null},midParentalHeights:{mid_parental_height:null,mid_parental_height_sds:null,mid_parental_height_centile:null,mid_parental_height_centile_data:null,mid_parental_height_lower_centile_data:null,mid_parental_height_upper_centile_data:null,mid_parental_height_lower_value:null,mid_parental_height_upper_value:null}}};return{calculation:{input:e,output:e},"fictional-child-data":{input:e,output:e},errors:{errors:!1,message:""},isLoading:!1,isMidparentalCalculation:!1}},Kt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"calculation",n=Object(l.useState)(zt),i=Object(r.a)(n,2),o=i[0],s=i[1],c=Object(l.useCallback)((function(n){s((function(i){var r=Ot(i);return n.height_maternal&&n.height_paternal?(r[a].input[t].parentalHeights=n,r.isMidparentalCalculation=!0):r[a].input[t][e].push(n),r.isLoading=!0,r}))}),[e,a,t]),u=Object(l.useCallback)((function(n){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Ot(n[a].input[t][e]);r.pop();var l=null;return i&&(l=n[a].output[t][e]).pop(),{newInput:r,newOutput:l}}),[e,a,t]),h=Object(l.useCallback)((function(n){s((function(i){var r=Ot(i),l=u(i,n),o=l.newInput,s=l.newOutput;return r[a].input[t][e]=o,s&&(r[a].output[t][e]=s),r}))}),[s,u,a,t,e]),d=Object(l.useCallback)((function(){s((function(n){var i=Ot(n);return i[a].input[t][e]=[],i[a].output[t][e]=[],i}))}),[e,a,t]),b=Object(l.useCallback)((function(){s((function(e){var t=Ot(e);return t.errors={errors:!1,message:""},t}))}),[]);return Object(l.useEffect)((function(){var n,i,r=!1;o.isLoading&&(o.isMidparentalCalculation?i=o[a].input[t].parentalHeights:(n=o[a].input[t][e],i=Ot(n[n.length-1])),qt(i,t,o.isMidparentalCalculation?"mid-parental-height":a).then((function(n){r||s((function(r){var l=Ot(r),o="",s=null;if(l.isMidparentalCalculation)return l.errors={errors:!1,message:"success"},l[a].input[t].parentalheights=i,l[a].output[t].midParentalHeights=n,l.isLoading=!1,l.isMidparentalCalculation=!1,l;"fictional-child-data"===a&&(s=n),"calculation"===a&&(s=l[a].output[t][e].concat([n]));var c,h=Object(P.a)(s);try{for(h.s();!(c=h.n()).done;){var d=c.value;if(s.length<2&&(o=d.measurement_calculated_values.corrected_measurement_error||d.measurement_calculated_values.chronological_measurement_error),o){if("fictional-child-data"===a)l[a].input[t][e]=[];else{var b=u(r).newInput;l[a].input[t][e]=b}return l.errors={errors:!0,message:"The server could not process the measurements. Details: ".concat(o)},l.isLoading=!1,l}}}catch(m){h.e(m)}finally{h.f()}return l[a].output[t][e]=s,l.errors={errors:!1,message:"success"},l.isLoading=!1,l}))})).catch((function(n){s((function(i){var r=Ot(i),l=u(i).newInput;r[a].input[t][e]=l;var o="There has been a problem fetching the result from the server. Error details: ".concat(n.message);return r.errors={errors:!0,message:o},r.isLoading=!1,r}))})));return function(){r=!0}}),[o,e,a,t,u]),{fetchResult:c,removeLastActiveItem:h,clearBothActiveArrays:d,clearApiErrors:b,measurements:o[a].input,results:o[a].output,apiErrors:o.errors,isLoading:o.isLoading}},Jt=function(){return{mode:"calculation",modeActiveIndex:0,reference:"uk-who",measurementMethod:"height",units:"cm",measurementMethodActiveIndex:0,sex:"male",parentalHeights:{height_maternal:null,height_paternal:null},"mid-parental-height":{mid_parental_height:null,mid_parental_height_sds:null,mid_parental_height_centile:null,mid_parental_height_centile_data:null,mid_parental_height_lower_centile_data:null,mid_parental_height_upper_centile_data:null,mid_parental_height_lower_value:null,mid_parental_height_upper_value:null},disabled:{height:!1,weight:!1,bmi:!1,ofc:!1,male:!1,female:!1},errors:{errors:!1,message:""},clearMeasurement:!1,resetCurrent:!1,undoLast:!1,isDataPresent:!1}},Yt=["height","weight","bmi","ofc","sds"],Vt=function(){var e=Object(l.useState)(Jt),t=Object(r.a)(e,2),a=t[0],n=t[1];return{globalState:a,makeGlobalStateUpdater:Object(l.useCallback)((function(e){return function(t,a){n((function(n){var i=Ot(n);switch(t){case"mode":i.mode=a,i.modeActiveIndex="calculation"===a?0:1;break;case"modeActiveIndex":switch(i.modeActiveIndex=a,a){case 0:default:i.mode="calculation";break;case 1:i.mode="fictional-child-data"}break;case"reference":i.reference=a,"turner"===a?(i.disabled={height:!1,weight:!0,bmi:!0,ofc:!0,male:!0,female:!1},i.measurementMethod="height",i.measurementMethodActiveIndex=0,i.sex="female"):(e[a][i.measurementMethod].length>0&&e[a][i.measurementMethod][0].birth_data.sex!==i.sex&&(i.sex=e[a][i.measurementMethod][0].birth_data.sex),i.disabled={height:!1,weight:!1,bmi:!1,ofc:!1,male:!1,female:!1});break;case"measurementMethod":i.measurementMethod=a,i.units=St(a);for(var r=0;r<Yt.length;r++)if(Yt[r]===a){i.measurementMethodActiveIndex=r;break}break;case"measurementMethodActiveIndex":var l=Yt[a];"turner"===i.reference&&"height"!==l?i.errors={errors:!0,message:"Unable to change measurement type"}:(i.measurementMethodActiveIndex=a,i.measurementMethod=Yt[a]);break;case"sex":var o=Object(F.a)(e[i.reference][i.measurementMethod]);if(o.length>0){var s,c=Object(P.a)(o);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(a!==u.sex){i.errors={errors:!0,message:"Unable to change sex"};break}}}catch(h){c.e(h)}finally{c.f()}}i.errors.message||(i.sex=a);break;default:i[t]=a}return i}))}}),[])}},Xt=Le;var Zt=[{menuItem:"Height",measurementName:"height",key:"Height"},{menuItem:"Weight",measurementName:"weight",key:"Weight"},{menuItem:"BMI",measurementName:"bmi",key:"BMI"},{menuItem:"Head Circumference",measurementName:"ofc",key:"Head Circumference"}],$t=[{key:"monochrome",value:"monochrome",text:"Monochrome"},{key:"trad",value:"trad",text:"Traditional"},{key:"tanner1",value:"tanner1",text:"Tanner 1"},{key:"tanner2",value:"tanner2",text:"Tanner 2"},{key:"tanner3",value:"tanner3",text:"Tanner 3"}];var Qt=function(){var e=Object(l.useState)(Xt.chart),t=Object(r.a)(e,2),a=t[0],n=t[1],i=Object(l.useState)(Xt.axes),s=Object(r.a)(i,2),c=s[0],u=s[1],d=Object(l.useState)(Xt.centiles),m=Object(r.a)(d,2),j=m[0],f=m[1],x=Object(l.useState)(Xt.sds),p=Object(r.a)(x,2),v=p[0],O=p[1],y=Object(l.useState)(!0),S=Object(r.a)(y,2),k=S[0],C=S[1],w=Object(l.useState)(Xt.measurements),F=Object(r.a)(w,2),A=F[0],D=F[1],M=Object(l.useState)({value:"tanner4",text:"Monochrome"}),H=Object(r.a)(M,2),I=H[0],B=H[1],N=Object(l.useState)(!1),G=Object(r.a)(N,2),L=G[0],W=G[1],E=Object(l.useState)({visible:!1,title:"",body:"",handleClose:null,handleCancel:null}),R=Object(r.a)(E,2),U=R[0],q=R[1],z=Vt(),K=z.globalState,J=z.makeGlobalStateUpdater,Y=Object(l.useState)(!0),V=Object(r.a)(Y,2),X=V[0],Z=V[1],$=K.mode,Q=K.modeActiveIndex,ee=K.reference,te=K.measurementMethod,ne=K.measurementMethodActiveIndex,ie=K.sex,re=K.disabled,le=K.errors,oe=K.resetCurrent,se=K.undoLast,ce=Kt(te,ee,$),ue=ce.fetchResult,he=ce.removeLastActiveItem,de=ce.clearBothActiveArrays,be=ce.clearApiErrors,ge=ce.measurements,je=ce.results,fe=ce.apiErrors,xe=ce.isLoading,pe=Object(l.useMemo)((function(){return J(je)}),[je,J]);Object(l.useEffect)((function(){if(fe.errors?q({visible:!0,title:"Unable to plot",body:fe.message,handleClose:function(){be(),q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}):"success"===fe.message&&(pe("clearMeasurement",!0),be()),le.errors){var e="Only height data is available for Turner Syndrome.";"Unable to change sex"===le.message&&(e="Each chart can only display measurements from one patient at a time. Please reset the chart before entering measurements from a new patient."),q({visible:!0,title:le.message,body:e,handleClose:function(){return q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),pe("errors",{errors:!1,message:""})}}),[le,fe,be,pe]),Object(l.useEffect)((function(){var e=Le;"trad"===I.value&&(e="male"===ie?$e:ct),"tanner1"===I.value&&(e=ae),"tanner2"===I.value&&(e=me),"tanner3"===I.value&&(e=we),f(e.centiles),n(e.chart),D(e.measurements),u(e.axes)}),[ie,I.value]),Object(l.useEffect)((function(){je[ee][te].length>0?pe("isDataPresent",!0):pe("isDataPresent",!1)}),[je,ee,te,pe]),oe&&(q({visible:!0,title:"Are you sure you want to reset?",body:"This will remove all measurements from the current chart.",handleCancel:function(){return q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){de(),q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null}),pe("mid-parental-height","empty")}}),pe("resetCurrent",!1)),se&&(q({visible:!0,title:"Are you sure you want to remove the last measurement?",body:"This will remove the last measurement entered on the chart.",handleCancel:function(){return q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})},handleClose:function(){he(!0),q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),pe("undoLast",!1));var ve=function(e,t){var a=t.activeIndex;pe("measurementMethodActiveIndex",a)},Oe=function(e){e.noise_range=e.noise_range/100,ue(e)},ye=function(e){return ue(e),!!xe},_e=function(e,t){var a,i,r,l=t.value;"trad"===l&&(i="male"===ie?$e:ct,r="Traditional"),"tanner1"===l&&(i=ae,r="Tanner 1"),"tanner2"===l&&(i=me,r="Tanner 2"),"tanner3"===l&&(i=we,r="Tanner 3"),"monochrome"===l&&(i=Le,r="Monochrome"),f(i.centiles),O(null===(a=i)||void 0===a?void 0:a.sds),n(i.chart),D(i.measurements),u(i.axes),B({value:l,text:r})},Se=function(e){if(!xe){var t=Ot(ge[ee][te]),a="";if(t.length>0){var n,i=7*e.gestation_weeks+e.gestation_days,r=[],l=Object(P.a)(t);try{for(l.s();!(n=l.n()).done;){var o=n.value;if(JSON.stringify(o)===JSON.stringify(e)){a="duplicate";break}var s=7*o.gestation_weeks+o.gestation_days;if(o.sex!==e.sex&&r.push("differing sexes"),o.birth_date!==e.birth_date&&r.push("differing date of births"),s!==i&&r.push("differing gestations"),r.length>0){a=r[0],2===r.length?a=r.join(" and "):3===r.length&&(a="".concat(r[0],", ").concat(r[1]," and ").concat(r[2]));break}}}catch(c){l.e(c)}finally{l.f()}}return a?(q("duplicate"===a?{visible:!0,title:"Duplicate entries",body:"Please check the last measurement entry as it appears to be identical to a measurement already entered.",handleClose:function(){return q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}:{visible:!0,title:"Please check entries",body:"Each chart can only display measurements from one patient at a time: ".concat(a," were detected."),handleClose:function(){return q({visible:!1,title:"",body:"",handleClose:null,handleCancel:null})}}),!1):(ue(e),!0)}},ke=Zt.map((function(e,t){return{menuItem:e.menuItem,render:function(){return k?Object(g.jsx)(ut.a.Pane,{attached:"top",disabled:re[e.measurementName],children:Object(g.jsx)(xt,{reference:ee,sex:ie,measurementMethod:e.measurementName,measurementsArray:je[ee][e.measurementName],midParentalHeightData:je[ee].midParentalHeights,chartStyle:a,axisStyle:c,gridlineStyle:Xt.gridlines,centileStyle:j,measurementStyle:A,isLoading:xe,chartType:"centile",clinicianFocus:X},"centile-".concat(t))},"charts"):Object(g.jsx)(ut.a.Pane,{attached:"top",children:Object(g.jsx)(xt,{reference:ee,sex:ie,measurementMethod:e.measurementName,measurementsArray:je[ee],midParentalHeightData:je[ee].midParentalHeights,chartStyle:a,axisStyle:c,gridlineStyle:Xt.gridlines,centileStyle:j,sdsStyle:v,measurementStyle:A,isLoading:xe,chartType:"sds"},"sds-".concat(t))},"sds")}}})),Ce=function(){return Object(g.jsx)(ut.a,{menu:{attached:"top",secondary:!0,pointing:!0},panes:ke,activeIndex:ne,onTabChange:ve},"tabPanes")},Fe=[{key:"measurements",menuItem:"Measurements",render:function(){return Object(g.jsx)(ut.a.Pane,{attached:!1,children:Object(g.jsx)(T,{handleMeasurementResult:Se,globalState:K,updateGlobalState:pe,className:"measurement-form",handleUtilitiesFormDataSubmit:ye,themeColour:j.centileStroke})},"measurements")}},{key:"examples",menuItem:"Examples",render:function(){return Object(g.jsx)(ut.a.Pane,{children:Object(g.jsx)(Gt,{fictionalFormDataSubmit:Oe,globalState:K,updateGlobalState:pe,handleUtilitiesFormDataSubmit:ye})},"examples")}}],Ae=function(){return Object(g.jsxs)("span",{children:["Theme"," ",Object(g.jsx)(ht.a,{options:$t,floating:!0,inline:!0,onChange:_e,text:I.text})]})};return Object(g.jsxs)(l.Fragment,{children:[Object(g.jsxs)(dt.a,{padded:!0,children:[Object(g.jsxs)(dt.a.Row,{children:[Object(g.jsx)(dt.a.Column,{width:6,children:Object(g.jsx)(b.a,{textAlign:"center",color:"fictional-child-data"===$?"black":null,children:Object(g.jsx)(ut.a,{panes:Fe,menu:{attached:!1,secondary:!0,pointing:!0},onTabChange:function(e,t){var a=t.activeIndex;pe("modeActiveIndex",a)},activeIndex:Q},"measurementTabs")})}),Object(g.jsx)(dt.a.Column,{width:10,children:Object(g.jsxs)(b.a,{color:"fictional-child-data"===$?"black":null,children:[L?Object(g.jsx)(Tt,{apiResult:je,reference:ee}):Object(g.jsx)("div",{children:Object(g.jsx)(Ce,{})}),Object(g.jsx)(dt.a,{verticalAlign:"middle",children:Object(g.jsxs)(dt.a.Row,{columns:3,children:[Object(g.jsxs)(dt.a.Column,{textAlign:"left",width:4,children:[Object(g.jsx)(bt.a,{radio:!0,label:"Clinician Advice",name:"checkboxRadioGroup",value:0,checked:X,onChange:function(e,t){return Z(!X)}}),Object(g.jsx)(bt.a,{radio:!0,label:"Child/Family Advice",name:"checkboxRadioGroup",value:1,checked:!X,onChange:function(e,t){return Z(!X)}})]}),Object(g.jsx)(dt.a.Column,{textAlign:"center",width:4,children:Object(g.jsx)(Ae,{})}),Object(g.jsxs)(dt.a.Column,{textAlign:"right",width:8,children:[Object(g.jsx)(h.a,{onClick:function(){C(!k)},color:"black",disabled:L,children:k?"Show SDS Chart":"Show Centile Charts"}),Object(g.jsx)(h.a,{disabled:!K.isDataPresent,className:"selectUpperMargin",onClick:function(){W(!L)},children:L?"Chart":"Results"})]})]})})]})})]}),Object(g.jsx)(dt.a.Row,{children:Object(g.jsx)(o.a,{children:Object(g.jsx)(_.a,{icon:"warning sign",header:"DISCLAIMER",content:"This is for demonstration purposes only and is not for clinical use.",color:"red"})})})]}),Object(g.jsx)(Ht,{title:U.title,body:U.body,visible:U.visible,handleClose:U.handleClose,handleCancel:U.handleCancel})]})};var ea=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(Qt,{})})};var ta=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(ea,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(207);n.render(Object(g.jsx)(ta,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[208,1,2]]]);
//# sourceMappingURL=main.753bea7a.chunk.js.map